(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[595],{29583:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>q});var a=t(18841),l=t(58669),r=t(28198),n=t(33544),i=t(77902),c=t(98356),d=t(59172),o=t(91530),m=t(33086),x=t(17167),h=t(83190),u=t(56630),p=t(23718),g=t(42542),f=t(23473),j=t(63615),v=t(64165),N=t(69547),b=t(17550),y=t(20791),w=t(3648),A=t(59606),k=t(45185),C=t(14967),F=t(65939),S=t(70663),T=t(53333),E=t(98156),R=t(84731),D=t(30897),M=t(7934),B=t(24156),$=t(44166),z=t(2570),P=t(87570),I=t(74843),J=t(63627),V=t(55036);let O=[500,900];async function _(e){var s;let t;return"mock"!==(null!=(s=V.env.NEXT_PUBLIC_AI_MODE)?s:"mock")&&B.vF.warn("AI client is set to non-mock mode, but no real backend implementation is provided. Falling back to mock.",void 0,"aiClient"),await (t=(()=>{let[e,s]=O;return Math.floor(Math.random()*(s-e+1))+e})(),new Promise(e=>setTimeout(e,t))),{suggestions:(e=>{var s,t,a,l,r;let n=null!=(t=null==(s=e.keywords)?void 0:s.split(/[,、，]/).map(e=>e.trim()).filter(Boolean))?t:[],i=e.mood?"【".concat(e.mood,"】"):"【実況】",c=e.videoTheme?e.videoTheme.slice(0,16):"新作ゲームをプレイ",d=null!=(a=e.baseTitle)?a:"".concat(i).concat(c);return["".concat(d,"！").concat(n.slice(0,2).join("\xd7"),"の魅力を徹底解説"),"".concat(d," - ").concat(null!=(l=e.targetAudience)?l:"みんな"," 必見の神回"),"".concat(i).concat(c,"の裏話を暴露！").concat(null!=(r=n[0])?r:"初見","のリアクションが話題")].map((e,s)=>({id:"title-".concat(Date.now(),"-").concat(s),text:e}))})(e),recommendedHashtags:(e=>{let s=new Set;return s.add("VTuber"),e.targetAudience&&s.add(e.targetAudience.replace(/\s+/g,"")),e.keywords&&e.keywords.split(/[,、，]/).map(e=>e.trim()).filter(Boolean).slice(0,3).forEach(e=>s.add(e.replace(/\s+/g,""))),e.mood&&s.add(e.mood.replace(/\s+/g,"")),Array.from(s).map(e=>e.replace(/^#/,""))})(e),insights:["視聴者の注意を引くキーワードを冒頭に置いています。","ハッシュタグを活用し、関連トレンドへ露出しやすい構成にしています。"]}}var Z=t(60860);let H=window.localStorage;function W(e){return"function"==typeof e?e():e}let G=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,[s,t,{reset:a,isHydrated:r}]=function(e,s){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{namespace:a,storage:r=null!=H?H:void 0,version:n=1,migrate:i,onError:c}=t,d=(0,l.useMemo)(()=>a?"".concat(a,":").concat(e):e,[e,a]),o=(0,l.useRef)(!1),m=(0,l.useCallback)(()=>{if(!r)return W(s);try{let e=(0,Z.GJ)(d);if(!e)return W(s);if("object"==typeof e&&null!==e&&"value"in e&&"version"in e){if(e.version===n)return e.value;if(i)return i(e.value,e.version);return B.vF.warn('usePersistentState: version mismatch for key "'.concat(d,'". Expected v').concat(n,", received v").concat(e.version,". Falling back to default."),void 0,"usePersistentState"),W(s)}if(i)return i(e,null);return e}catch(e){return B.vF.error('usePersistentState: failed to read persisted value for key "'.concat(d,'"'),e,"usePersistentState"),null==c||c(e),W(s)}},[s,i,c,r,d,n]),[x,h]=(0,l.useState)(m);(0,l.useEffect)(()=>{o.current=!0},[]);let u=(0,l.useCallback)(e=>{if(r)try{(0,Z.PX)(d,{version:n,value:e})}catch(e){B.vF.error('usePersistentState: failed to persist key "'.concat(d,'"'),e,"usePersistentState"),null==c||c(e)}},[c,r,d,n]);return[x,(0,l.useCallback)(e=>{h(s=>{let t="function"==typeof e?e(s):e;return u(t),t})},[u]),{reset:(0,l.useCallback)(()=>{if(h(W(s)),r)try{(0,Z.Od)(d)}catch(e){B.vF.error('usePersistentState: failed to remove key "'.concat(d,'"'),e,"usePersistentState"),null==c||c(e)}},[s,c,d]),isHydrated:o.current}]}("history",()=>[],{namespace:"title-generator",version:1,onError:e=>{B.vF.error("タイトル履歴の復元に失敗しました",e,"useTitleHistory"),F.oR.error("履歴の読み込みに失敗しました")}}),n=(0,l.useCallback)(s=>{t(t=>{let a=[s,...t];return a.length>e&&F.oR.info("履歴は".concat(e,"件までです。古いデータを自動的に削除しました。")),a.slice(0,e)})},[e,t]);return{history:s,addHistory:n,removeHistory:(0,l.useCallback)(e=>{t(s=>s.filter(s=>s.id!==e)),F.oR.success("履歴を削除しました")},[t]),clearHistory:(0,l.useCallback)(()=>{confirm("すべての履歴を削除しますか？")&&(a(),F.oR.success("すべての履歴を削除しました"))},[a]),isHydrated:r}};var X=t(90584),L=t(75359),U=t(42990);let Y=(0,l.memo)(function(e){let{items:s,onSelect:t,onDelete:n,onClear:i,isHydrated:c=!0}=e,d=c&&s.length>0,o=(0,l.useMemo)(()=>s.map(e=>(0,a.jsxs)(E.Zp,{className:(0,T.cn)("cursor-pointer hover:border-[#20B2AA] transition-all group relative overflow-visible"),onClick:()=>t(e),children:[(0,a.jsx)("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-transparent group-hover:bg-[#20B2AA] transition-colors rounded-l-xl -ml-2"}),(0,a.jsx)(E.Wu,{className:"p-3",children:(0,a.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[e.titles.length>0&&(0,a.jsx)("p",{className:"text-sm font-medium truncate mb-1",children:e.titles[0].text}),e.inputData.videoTheme&&(0,a.jsxs)("p",{className:"text-xs text-muted-foreground truncate mb-1",children:[e.inputData.videoTheme.substring(0,50),e.inputData.videoTheme.length>50?"...":""]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[(0,a.jsx)(X.A,{className:"h-3 w-3"}),(0,a.jsx)("span",{children:(e=>{let s=Date.now()-e,t=Math.floor(s/6e4),a=Math.floor(s/36e5),l=Math.floor(s/864e5);return t<1?"たった今":t<60?"".concat(t,"分前"):a<24?"".concat(a,"時間前"):l<7?"".concat(l,"日前"):new Date(e).toLocaleString("ja-JP",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})})(e.timestamp)}),(0,a.jsx)("span",{className:"text-[#808080]",children:"・"}),(0,a.jsxs)("span",{children:[e.titles.length,"件のタイトル案"]})]})]}),(0,a.jsx)(r.$,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0 opacity-0 group-hover:opacity-100 text-red-400 hover:text-red-300 transition-opacity",onClick:s=>{s.stopPropagation(),n(e.id)},"aria-label":"履歴を削除",children:(0,a.jsx)(L.A,{className:"h-3 w-3"})})]})})]},e.id)),[s,n,t]);return(0,a.jsxs)(E.Zp,{children:[(0,a.jsx)(E.aR,{children:(0,a.jsxs)(E.ZB,{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{children:"生成履歴"}),d&&(0,a.jsx)(r.$,{variant:"ghost",size:"sm",onClick:i,className:"text-red-400 hover:text-red-300","aria-label":"すべての履歴を削除",children:(0,a.jsx)(L.A,{className:"h-4 w-4"})})]})}),(0,a.jsx)(E.Wu,{children:c?d?(0,a.jsx)("div",{className:"space-y-2 md:max-h-[calc(100vh-300px)] md:overflow-y-auto",children:o}):(0,a.jsxs)("div",{className:"text-center text-sm text-muted-foreground py-8",children:[(0,a.jsx)(U.A,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),(0,a.jsx)("p",{children:"生成履歴がありません"}),(0,a.jsx)("p",{className:"text-xs mt-2",children:"タイトルと概要欄を生成すると、ここに履歴が表示されます"})]}):(0,a.jsx)("div",{className:"text-center text-sm text-muted-foreground py-8",children:(0,a.jsx)("p",{children:"履歴を読み込んでいます..."})})})]})});function q(){let{isDesktop:e}=(0,D.c)({defaultOpen:!0,desktopDefaultOpen:!0}),[s,t]=(0,l.useState)("settings"),[V,O]=(0,l.useState)("input"),[Z,H]=(0,l.useState)("edit"),[W,X]=(0,l.useState)(!1),[L,U]=(0,l.useState)(""),[q,K]=(0,l.useState)(""),[Q,ee]=(0,l.useState)([]),[es,et]=(0,l.useState)(""),[ea,el]=(0,l.useState)(null),{history:er,addHistory:en,removeHistory:ei,clearHistory:ec,isHydrated:ed}=G(),[eo,em]=(0,l.useState)([]),ex=(0,l.useCallback)(e=>{0!==e.length&&em(s=>s.length===e.length&&s.every((s,t)=>s===e[t])?s:e)},[]),[eh,eu]=(0,l.useState)(""),[ep,eg]=(0,l.useState)("default"),[ef,ej]=(0,l.useState)(!1),[ev,eN]=(0,l.useState)(!1),[eb,ey]=(0,l.useState)(!1),[ew,eA]=(0,l.useState)(null),ek="title-generator-input-draft",eC="title-generator-hashtag-favorites",eF=["VTuber","ゲーム実況","新作ゲーム","実況","エンタメ"],[eS,eT]=(0,l.useState)(""),[eE,eR]=(0,l.useState)(""),[eD,eM]=(0,l.useState)(""),[eB,e$]=(0,l.useState)(""),[ez,eP]=(0,l.useState)({}),{handleAsyncError:eI}=(0,M.u)(),eJ=(0,l.useRef)(null),eV=(0,l.useRef)(!0),eO=(0,l.useCallback)(()=>{eJ.current&&(clearTimeout(eJ.current),eJ.current=null)},[]),e_=(0,l.useCallback)(()=>{try{let e={videoTheme:eS,keywords:eE,targetAudience:eD,videoMood:eB,timestamp:Date.now()};localStorage.setItem(ek,JSON.stringify(e))}catch(e){console.error("入力内容保存失敗",e)}},[eS,eE,eD,eB]);(0,l.useEffect)(()=>{try{let e=localStorage.getItem(ek);if(e){let s=JSON.parse(e);s&&"object"==typeof s&&((Date.now()-(s.timestamp||0))/864e5<7?(s.videoTheme&&eT(s.videoTheme),s.keywords&&eR(s.keywords),s.targetAudience&&eM(s.targetAudience),s.videoMood&&e$(s.videoMood)):localStorage.removeItem(ek))}eV.current=!1}catch(e){console.error("入力内容読み込み失敗",e),eV.current=!1}},[]),(0,l.useEffect)(()=>{if(!eV.current)return eO(),eJ.current=setTimeout(()=>{e_(),eJ.current=null},1e3),()=>{eO()}},[eS,eE,eD,eB,e_,eO]),(0,l.useEffect)(()=>()=>{eO()},[eO]);let eZ=(0,l.useCallback)(e=>{ee(e.titles),et(e.description),K(e.description),e.titles.length>0&&U(e.titles[0].text),eT(e.inputData.videoTheme),eR(e.inputData.keywords),eM(e.inputData.targetAudience),e$(e.inputData.videoMood),O("input"),F.oR.success("履歴から読み込みました")},[]),eH=(0,l.useCallback)(e=>{ei(e)},[ei]),eW=[{id:"default",name:"デフォルト",description:"標準的な構成（概要、タイムスタンプ、関連動画、ハッシュタグ、SNS）",sections:[{type:"summary",content:"この動画では、{videoTheme}について詳しく解説しています。",enabled:!0,order:1},{type:"timestamp",title:"タイムスタンプ",content:"00:00 オープニング\n02:30 本編開始\n15:45 まとめ",enabled:!0,order:2},{type:"related",title:"関連動画",content:"・前回の動画: [リンク]\n・次回予告: [リンク]",enabled:!0,order:3},{type:"hashtag",title:"ハッシュタグ",content:"{hashtags}",enabled:!0,order:4},{type:"sns",title:"SNS",content:"Twitter: @your_twitter\nInstagram: @your_instagram",enabled:!0,order:5}]},{id:"game-streaming",name:"ゲーム実況用",description:"ゲーム実況向けの構成（概要、タイムスタンプ、ハッシュタグ）",sections:[{type:"summary",content:"この動画では、{videoTheme}を実況プレイしています。",enabled:!0,order:1},{type:"timestamp",title:"タイムスタンプ",content:"00:00 オープニング\n02:30 ゲーム開始\n20:00 ハイライト",enabled:!0,order:2},{type:"hashtag",title:"ハッシュタグ",content:"{hashtags}",enabled:!0,order:3},{type:"sns",title:"SNS",content:"Twitter: @your_twitter",enabled:!0,order:4}]},{id:"singing-stream",name:"歌枠用",description:"歌枠向けの構成（概要、セットリスト、ハッシュタグ）",sections:[{type:"summary",content:"この動画では、{videoTheme}を歌わせていただきました！",enabled:!0,order:1},{type:"setlist",title:"セットリスト",content:"1. [曲名1]\n2. [曲名2]\n3. [曲名3]",enabled:!0,order:2},{type:"hashtag",title:"ハッシュタグ",content:"{hashtags}",enabled:!0,order:3},{type:"sns",title:"SNS",content:"Twitter: @your_twitter",enabled:!0,order:4}]},{id:"collaboration",name:"コラボ用",description:"コラボ配信向けの構成（概要、ゲスト情報、タイムスタンプ、ハッシュタグ）",sections:[{type:"summary",content:"この動画では、{videoTheme}をコラボ配信しました！",enabled:!0,order:1},{type:"guest",title:"ゲスト",content:"ゲスト: [ゲスト名]\nチャンネル: [チャンネルリンク]",enabled:!0,order:2},{type:"timestamp",title:"タイムスタンプ",content:"00:00 オープニング\n05:00 本編開始",enabled:!0,order:3},{type:"hashtag",title:"ハッシュタグ",content:"{hashtags}",enabled:!0,order:4},{type:"sns",title:"SNS",content:"Twitter: @your_twitter",enabled:!0,order:5}]},{id:"simple",name:"シンプル",description:"シンプルな構成（概要、ハッシュタグのみ）",sections:[{type:"summary",content:"{videoTheme}",enabled:!0,order:1},{type:"hashtag",title:"ハッシュタグ",content:"{hashtags}",enabled:!0,order:2}]}],[eG,eX]=(0,l.useState)([]);(0,l.useEffect)(()=>{try{let e=localStorage.getItem("title-generator-description-templates");if(e){let s=JSON.parse(e);eX(Array.isArray(s)?s:[])}}catch(e){console.error("カスタムテンプレート読み込み失敗",e)}},[]);let eL=(0,l.useMemo)(()=>[...eW,...eG],[eG]),eU=(0,l.useCallback)(e=>{let s=[...e.sections].filter(e=>e.enabled).sort((e,s)=>e.order-s.order),t="";return s.forEach((e,a)=>{let l=e.content;l=(l=l.replace(/{videoTheme}/g,eS||"[動画のテーマ]")).replace(/{hashtags}/g,eo.length>0?eo.map(e=>"#".concat(e)).join(" "):"#VTuber #エンタメ"),"hashtag"===e.type?t+="【".concat(e.title||"ハッシュタグ","】\n").concat(l,"\n"):e.title?t+="【".concat(e.title,"】\n").concat(l,"\n"):t+="".concat(l,"\n"),a<s.length-1&&(t+="\n")}),t.trim()},[eS,eo]),eY=(0,l.useCallback)(e=>{let s=e.match(/【ハッシュタグ】\s*\n([\s\S]*?)(?=\n【|$)/);if(!s)return[];let t=s[1].trim().match(/#([\w\u3040-\u309F\u30A0-\u30FF\u4E00-\u9FAF]+)/g);return t?t.map(e=>e.replace("#","")):[]},[]),eq=(0,l.useCallback)(e=>{if(e===ep)return;let s=eL.find(s=>s.id===e);if(!s)return;let t=eU(s);et(t),K(t),eg(e);let a=eY(t);a.length>0&&ex(a),F.oR.success("「".concat(s.name,"」テンプレートを適用しました"))},[eL,eY,eU,ep,ex]),eK=(0,l.useCallback)(e=>{let s=e.trim();return s?s.length<10?{message:"".concat(10,"文字以上入力してください"),suggestion:"もう少し具体的な内容を記入すると、より良いタイトルが生成されます"}:s.length>500?{message:"".concat(500,"文字以内で入力してください"),suggestion:"重要なポイントをまとめて入力してください"}:null:{message:"動画のテーマ・内容は必須です",suggestion:"動画の内容や台本の要約を10文字以上入力してください"}},[]),eQ=(0,l.useCallback)(e=>e.trim().length>100?{message:"".concat(100,"文字以内で入力してください"),suggestion:"カンマ区切りで主要なキーワードのみを入力してください"}:null,[]),e0=(0,l.useCallback)(e=>e.trim().length>100?{message:"".concat(100,"文字以内で入力してください"),suggestion:"簡潔にターゲット層を入力してください（例: 10代男性、VTuberファン）"}:null,[]),e1=(0,l.useCallback)(e=>e.trim().length>100?{message:"".concat(100,"文字以内で入力してください"),suggestion:"簡潔に雰囲気を入力してください（例: 面白い、感動、解説）"}:null,[]),e2=(0,l.useCallback)((e,s)=>{let t=null;switch(e){case"videoTheme":t=eK(s);break;case"keywords":t=eQ(s);break;case"targetAudience":t=e0(s);break;case"videoMood":t=e1(s)}eP(s=>({...s,[e]:t||void 0}))},[eK,eQ,e0,e1]),e4=(0,l.useCallback)(()=>{try{let e=localStorage.getItem("title-generator-favorites");return e?new Set(JSON.parse(e)):new Set}catch(e){return new Set}},[]),e3=(0,l.useCallback)(async e=>{let s=await _({videoTheme:eS,keywords:eE,targetAudience:eD,mood:eB,baseTitle:e,hashtags:eo}),t=e4(),a=Date.now(),l=s.suggestions.map((e,s)=>{var l;return{id:null!=(l=e.id)?l:"title-".concat(a,"-").concat(s),text:e.text,isFavorite:t.has(e.text)}});return{titles:[...l.filter(e=>e.isFavorite),...l.filter(e=>!e.isFavorite)],recommendedHashtags:s.recommendedHashtags}},[eS,eE,eD,eB,eo,e4]),e5=(0,l.useCallback)(e=>{let s=eL.find(e=>e.id===ep)||eW[0],t=null!=e?e:eo,a=t.length>0?t:eF;return eU({...s,sections:s.sections.map(e=>"hashtag"===e.type?{...e,content:a.map(e=>"#".concat(e)).join(" ")}:e)})},[eL,ep,eW,eo,eU]),e6=(0,l.useCallback)(async()=>{if(!eS.trim())return void F.oR.error("入力エラー",{description:"動画のテーマ・内容を入力してください"});eN(!0);try{let{titles:e}=await e3();ee(e),e.length>0&&U(e[0].text),F.oR.success("タイトルを再生成しました")}catch(e){B.vF.error("タイトル再生成失敗",e,"TitleGenerator"),F.oR.error("タイトルの再生成に失敗しました")}finally{eN(!1)}},[eS,e3]),e7=(0,l.useCallback)(async()=>{if(!eS.trim())return void F.oR.error("入力エラー",{description:"動画のテーマ・内容を入力してください"});ey(!0);try{await new Promise(e=>setTimeout(e,1e3));let e=e5();et(e),K(e);let s=eY(e);s.length>0&&ex(s),F.oR.success("概要欄を再生成しました")}catch(e){B.vF.error("概要欄再生成失敗",e,"TitleGenerator"),F.oR.error("概要欄の再生成に失敗しました")}finally{ey(!1)}},[eS,e5,eY,ex]),e8=(0,l.useCallback)(async(e,s)=>{eA(e);try{await new Promise(e=>setTimeout(e,800));let t=[s.replace("【初見】","【実況】"),s.replace("挑戦","攻略"),s+"【衝撃の結末】"],a=t[Math.floor(Math.random()*t.length)];ee(s=>s.map(s=>s.id===e?{...s,text:a}:s)),F.oR.success("タイトル案を再生成しました")}catch(e){B.vF.error("個別タイトル再生成失敗",e,"TitleGenerator"),F.oR.error("タイトル案の再生成に失敗しました")}finally{eA(null)}},[]),e9=(0,l.useCallback)(async e=>{eN(!0);try{let{titles:s}=await e3(e);ee(e=>{let t=new Set(e.map(e=>e.text)),a=s.filter(e=>!t.has(e.text));return[...e.filter(e=>e.isFavorite),...a,...e.filter(e=>!e.isFavorite&&!t.has(e.text))]}),F.oR.success("別パターンを生成しました")}catch(e){B.vF.error("別パターン生成失敗",e,"TitleGenerator"),F.oR.error("別パターンの生成に失敗しました")}finally{eN(!1)}},[e3]),se=(0,l.useCallback)(async()=>{let s=eK(eS);if(s){eP({videoTheme:s}),F.oR.error("入力エラー",{description:s.message});return}let a=eQ(eE),l=e0(eD),r=e1(eB);eP({keywords:a||void 0,targetAudience:l||void 0,videoMood:r||void 0}),(a||l||r)&&F.oR.warning("一部の入力に問題がありますが、生成を続行します",{duration:3e3}),X(!0),await eI(async()=>{let{titles:s,recommendedHashtags:a}=await e3(),l=eo.length>0?eo:a.length>0?a:eF;0===eo.length&&ex(l);let r=e5(l);ee(s),et(r),s.length>0&&U(s[0].text),K(r),en({id:"history-".concat(Date.now()),timestamp:Date.now(),titles:s,description:r,inputData:{videoTheme:eS,keywords:eE,targetAudience:eD,videoMood:eB}});try{localStorage.removeItem(ek)}catch(e){console.error("一時保存クリア失敗",e)}e||t("results")},"生成中にエラーが発生しました"),X(!1)},[eS,eE,eD,eB,eI,e,en]),ss=(0,l.useCallback)(e=>{U(e)},[]),st=(0,l.useCallback)(async(e,s)=>{try{await navigator.clipboard.writeText(e),el(s),setTimeout(()=>el(null),2e3),F.oR.success("コピーしました")}catch(e){B.vF.error("コピー失敗",e,"TitleGenerator"),F.oR.error("コピーに失敗しました")}},[]),sa=(0,l.useCallback)((e,s)=>{ee(s=>{let t=s.find(s=>s.id===e),a=!(null==t?void 0:t.isFavorite),l=s.map(s=>s.id===e?{...s,isFavorite:!s.isFavorite}:s),r=[...l.filter(e=>e.isFavorite),...l.filter(e=>!e.isFavorite)];try{let e=new Set;r.forEach(s=>{s.isFavorite&&e.add(s.text)}),localStorage.setItem("title-generator-favorites",JSON.stringify(Array.from(e)))}catch(e){B.vF.error("お気に入り保存失敗",e,"TitleGenerator")}return F.oR.success(a?"お気に入りに追加しました":"お気に入りを解除しました"),r})},[]),sl=(0,l.useCallback)((e,s)=>{let t=e.length,a=s.split(/[,、，]/).map(e=>e.trim()).filter(e=>e.length>0),l=0;a.forEach(s=>{e.toLowerCase().includes(s.toLowerCase())&&l++});let r=a.length>0?Math.round(l/a.length*100):0,n=[];e.includes("【")&&e.includes("】")&&n.push("構造化"),(e.includes("！")||e.includes("!"))&&n.push("キャッチー"),(e.includes("？")||e.includes("?"))&&n.push("疑問形"),r>=50&&n.push("キーワード豊富"),t<=60&&t>=30&&n.push("最適長"),t>60&&n.push("長文"),t<30&&n.push("短文");let i=0;t>=30&&t<=60?i+=40:t>60&&t<=70?i+=30:t>70?i+=10:t>=20&&t<30?i+=25:i+=10,i+=Math.round(r/100*30);let c=0;n.includes("構造化")&&(c+=10),n.includes("キャッチー")&&(c+=10),n.includes("最適長")&&(c+=10);let d=Math.round(.8*(i+=Math.min(c,30)));return{charCount:t,keywordCoverage:r,features:n,score:Math.min(i,100),clickRateScore:d,isOverRecommended:t>60}},[]),sr=(0,l.useCallback)(e=>{let s=e.length>0?e.map(e=>"#".concat(e)).join(" "):"#VTuber #ゲーム実況 #新作ゲーム #実況 #エンタメ";et(e=>e.includes("【ハッシュタグ】")?e.replace(/【ハッシュタグ】\s*\n([\s\S]*?)(?=\n【|$)/,"【ハッシュタグ】\n".concat(s)):e+(e.endsWith("\n")?"":"\n")+"\n【ハッシュタグ】\n".concat(s)),K(e=>e.includes("【ハッシュタグ】")?e.replace(/【ハッシュタグ】\s*\n([\s\S]*?)(?=\n【|$)/,"【ハッシュタグ】\n".concat(s)):e+(e.endsWith("\n")?"":"\n")+"\n【ハッシュタグ】\n".concat(s))},[]),sn=(0,l.useCallback)(e=>{let s=e.trim().replace(/^#/,"");if(!s||eo.includes(s))return;let t=[...eo,s];ex(t),sr(t),eu("")},[eo,ex,sr]),si=(0,l.useCallback)(e=>{let s=eo.filter(s=>s!==e);ex(s),sr(s)},[eo,ex,sr]),sc=(0,l.useCallback)(e=>{try{let s=localStorage.getItem(eC),t=s?JSON.parse(s):[];if(!t.includes(e)){let s=[...t,e];localStorage.setItem(eC,JSON.stringify(s)),F.oR.success("ハッシュタグをお気に入りに追加しました")}}catch(e){console.error("ハッシュタグお気に入り保存失敗",e)}},[]),sd=(0,l.useCallback)(()=>{try{let e=localStorage.getItem(eC);return e?JSON.parse(e):[]}catch(e){return console.error("ハッシュタグお気に入り読み込み失敗",e),[]}},[]),so=(0,l.useCallback)((e,s)=>{let t=[];return e.split(/[,、，]/).map(e=>e.trim()).filter(e=>e.length>0).forEach(e=>{e.length<=10&&t.push(e)}),(s.includes("ゲーム")||s.includes("ゲーム実況"))&&t.push("VTuber","ゲーム実況","実況"),(s.includes("歌")||s.includes("歌枠"))&&t.push("VTuber","歌枠","歌ってみた"),s.includes("コラボ")&&t.push("VTuber","コラボ","コラボ配信"),t.push("VTuber","バーチャルYouTuber","エンタメ"),Array.from(new Set(t))},[]);(0,l.useEffect)(()=>{if(es){let e=eY(es);e.length>0&&ex(e)}},[es,eY,ex]);let sm=(0,l.useCallback)(e=>{if(!e.destination)return;let s=e.source.index,t=e.destination.index;s!==t&&ee(e=>{let a=Array.from(e),[l]=a.splice(s,1);return a.splice(t,0,l),[...a.filter(e=>e.isFavorite),...a.filter(e=>!e.isFavorite)]})},[]),sx=(0,a.jsx)("div",{className:"flex flex-col h-full p-4 sm:p-6 space-y-4 relative",children:(0,a.jsxs)($.tU,{value:V,onValueChange:O,className:"flex-1 flex flex-col min-w-0",children:[(0,a.jsxs)($.j7,{className:"grid w-full grid-cols-2 mb-4",children:[(0,a.jsx)($.Xi,{value:"input",children:"入力"}),(0,a.jsxs)($.Xi,{value:"history",children:["履歴",ed&&er.length>0&&(0,a.jsx)(C.E,{variant:"secondary",className:"ml-2 h-5 px-1.5 text-xs",children:er.length})]})]}),(0,a.jsxs)($.av,{value:"input",className:"flex-1 space-y-4 md:overflow-auto mt-0",children:[(0,a.jsxs)(E.Zp,{children:[(0,a.jsx)(E.aR,{children:(0,a.jsx)(E.ZB,{children:"動画情報入力"})}),(0,a.jsxs)(E.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)(c.J,{htmlFor:"video-theme",className:"flex items-center gap-2",children:[(0,a.jsx)("span",{children:"動画のテーマ・内容"}),(0,a.jsx)(C.E,{variant:"destructive",className:"text-[10px] px-1.5 py-0",children:"必須"})]}),(0,a.jsx)(n.T,{id:"video-theme",placeholder:"例: 新作RPGゲームを初見プレイ。序盤のキャラクター作成から、最初のボス戦までの流れを実況します。",value:eS,onChange:e=>{eT(e.target.value),e2("videoTheme",e.target.value)},onBlur:()=>e2("videoTheme",eS),rows:4,className:(0,T.cn)("resize-y",ez.videoTheme&&"border-red-500 focus-visible:ring-red-500")}),(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mt-1 gap-1 md:gap-0",children:[(0,a.jsxs)("div",{className:"flex-1",children:[ez.videoTheme&&(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("p",{className:"text-xs text-red-500",children:ez.videoTheme.message}),ez.videoTheme.suggestion&&(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:ez.videoTheme.suggestion})]}),!ez.videoTheme&&(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:[10,"〜",500,"文字推奨。動画の内容や台本の要約を具体的に入力してください。"]})]}),(0,a.jsxs)("span",{className:(0,T.cn)("text-xs md:ml-2",eS.length<10||eS.length>500?"text-red-500":"text-muted-foreground"),children:[eS.length,"/",500]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(c.J,{htmlFor:"keywords",children:"主要キーワード"}),(0,a.jsx)(i.p,{id:"keywords",placeholder:"例: ゲーム名, キャラクター名, 感想",value:eE,onChange:e=>{eR(e.target.value),e2("keywords",e.target.value)},onBlur:()=>e2("keywords",eE),className:(0,T.cn)(ez.keywords&&"border-red-500 focus-visible:ring-red-500")}),(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mt-1 gap-1 md:gap-0",children:[(0,a.jsxs)("div",{className:"flex-1",children:[ez.keywords&&(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("p",{className:"text-xs text-red-500",children:ez.keywords.message}),ez.keywords.suggestion&&(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:ez.keywords.suggestion})]}),!ez.keywords&&(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"カンマ区切りで入力。タイトル生成に使用されます。"})]}),(0,a.jsxs)("span",{className:(0,T.cn)("text-xs md:ml-2",eE.length>100?"text-red-500":"text-muted-foreground"),children:[eE.length,"/",100]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c.J,{htmlFor:"target-audience",children:"ターゲット層"}),(0,a.jsx)(i.p,{id:"target-audience",placeholder:"例: 10代男性, VTuberファン",value:eD,onChange:e=>{eM(e.target.value),e2("targetAudience",e.target.value)},onBlur:()=>e2("targetAudience",eD),className:(0,T.cn)(ez.targetAudience&&"border-red-500 focus-visible:ring-red-500")}),(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mt-1 gap-1 md:gap-0",children:[(0,a.jsxs)("div",{className:"flex-1",children:[ez.targetAudience&&(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("p",{className:"text-xs text-red-500",children:ez.targetAudience.message}),ez.targetAudience.suggestion&&(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:ez.targetAudience.suggestion})]}),!ez.targetAudience&&(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"任意。視聴者の属性を入力。"})]}),(0,a.jsxs)("span",{className:(0,T.cn)("text-xs md:ml-2",eD.length>100?"text-red-500":"text-muted-foreground"),children:[eD.length,"/",100]})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c.J,{htmlFor:"video-mood",children:"動画の雰囲気"}),(0,a.jsx)(i.p,{id:"video-mood",placeholder:"例: 面白い, 感動, 解説",value:eB,onChange:e=>{e$(e.target.value),e2("videoMood",e.target.value)},onBlur:()=>e2("videoMood",eB),className:(0,T.cn)(ez.videoMood&&"border-red-500 focus-visible:ring-red-500")}),(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mt-1 gap-1 md:gap-0",children:[(0,a.jsxs)("div",{className:"flex-1",children:[ez.videoMood&&(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("p",{className:"text-xs text-red-500",children:ez.videoMood.message}),ez.videoMood.suggestion&&(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:ez.videoMood.suggestion})]}),!ez.videoMood&&(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"任意。動画の雰囲気やトーンを入力。"})]}),(0,a.jsxs)("span",{className:(0,T.cn)("text-xs md:ml-2",eB.length>100?"text-red-500":"text-muted-foreground"),children:[eB.length,"/",100]})]})]})]})]}),(0,a.jsx)(r.$,{size:"lg",className:"w-full",onClick:se,disabled:W,children:W?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.A,{className:"mr-2 h-5 w-5 animate-spin"}),"生成中..."]}):"生成する"})]}),(0,a.jsx)($.av,{value:"history",className:"flex-1 space-y-4 md:overflow-auto mt-0",children:(0,a.jsx)(Y,{items:er,onSelect:eZ,onDelete:eH,onClear:ec,isHydrated:ed})})]})}),sh=(0,a.jsxs)("div",{className:"flex flex-col h-full p-4 sm:p-6 space-y-4 relative",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3 md:gap-0 mb-4",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold",children:"生成結果"}),Q.length>0||es?(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2",children:[Q.length>0&&(0,a.jsx)(r.$,{variant:"outline",size:"sm",onClick:e6,disabled:ev||W,children:ev?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.A,{className:"mr-2 h-4 w-4 animate-spin"}),"再生成中..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.A,{className:"mr-2 h-4 w-4"}),"タイトルのみ再生成"]})}),es&&(0,a.jsx)(r.$,{variant:"outline",size:"sm",onClick:e7,disabled:eb||W,children:eb?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.A,{className:"mr-2 h-4 w-4 animate-spin"}),"再生成中..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.A,{className:"mr-2 h-4 w-4"}),"概要欄のみ再生成"]})})]}):null]}),(0,a.jsx)(R.w,{}),(0,a.jsxs)("div",{className:"flex-grow space-y-4 md:overflow-auto",children:[(0,a.jsxs)(E.Zp,{children:[(0,a.jsx)(E.aR,{children:(0,a.jsx)(E.ZB,{children:"最終編集エリア"})}),(0,a.jsxs)(E.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(c.J,{htmlFor:"final-title",children:"最終タイトル"}),(0,a.jsxs)("div",{className:"flex flex-col md:flex-row space-y-2 md:space-y-0 md:space-x-2",children:[W?(0,a.jsx)(I.EA,{className:"h-10 w-full"}):(0,a.jsx)(i.p,{id:"final-title",placeholder:"AIが生成したタイトル案",value:L,onChange:e=>U(e.target.value),className:"flex-1"}),(0,a.jsx)(r.$,{variant:"outline",onClick:()=>navigator.clipboard.writeText(L),disabled:!L,className:"w-full md:w-auto",children:"コピー"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)(c.J,{htmlFor:"final-description",children:["最終概要欄",(0,a.jsxs)("span",{className:(0,T.cn)("ml-2 text-xs font-normal",q.length>5e3?"text-red-400":q.length>4500?"text-yellow-400":"text-muted-foreground"),children:["(",q.length," / ",5e3,")"]})]}),(0,a.jsxs)("div",{className:"flex flex-col md:flex-row space-y-2 md:space-y-0 md:space-x-2",children:[W?(0,a.jsx)(I.EA,{className:"h-24 w-full"}):(0,a.jsx)(n.T,{id:"final-description",placeholder:"AIが生成した概要欄",value:q,onChange:e=>K(e.target.value),rows:8,className:"resize-y flex-1"}),(0,a.jsx)(r.$,{variant:"outline",onClick:()=>{navigator.clipboard.writeText(q),F.oR.success("概要欄をコピーしました")},disabled:!q,className:"w-full md:w-auto",children:"コピー"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)(c.J,{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("span",{className:"flex items-center gap-2",children:[(0,a.jsx)(m.A,{className:"h-4 w-4"}),"概要欄テンプレート"]}),(0,a.jsxs)(r.$,{variant:"ghost",size:"sm",className:"h-7 text-xs",onClick:()=>ej(!ef),children:[(0,a.jsx)(x.A,{className:"h-3 w-3 mr-1"}),ef?"プレビューを閉じる":"プレビュー"]})]}),(0,a.jsxs)("div",{className:"flex gap-2 mb-2",children:[(0,a.jsxs)(z.l6,{value:ep,onValueChange:eq,children:[(0,a.jsx)(z.bq,{className:"flex-1 truncate",children:(0,a.jsx)(z.yv,{children:(()=>{let e=eL.find(e=>e.id===ep)||eW[0];return e?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"md:hidden",children:e.name}),(0,a.jsxs)("span",{className:"hidden md:inline truncate",children:[e.name,e.description&&(0,a.jsxs)("span",{className:"text-muted-foreground ml-1",children:["(",e.description,")"]})]})]}):(0,a.jsx)("span",{children:"テンプレートを選択"})})()})}),(0,a.jsxs)(z.gC,{children:[(0,a.jsx)("div",{className:"px-2 py-1.5 text-xs font-semibold text-muted-foreground",children:"プリセット"}),eW.map(e=>(0,a.jsx)(z.eb,{value:e.id,children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium",children:e.name}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:e.description})]})},e.id)),eG.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"px-2 py-1.5 text-xs font-semibold text-muted-foreground mt-2",children:"カスタム"}),eG.map(e=>(0,a.jsx)(z.eb,{value:e.id,children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium",children:e.name}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:e.description})]})},e.id))]})]})]}),(0,a.jsxs)(P.lG,{children:[(0,a.jsx)(P.zM,{asChild:!0,children:(0,a.jsx)(r.$,{variant:"outline",size:"sm",className:"h-10",children:(0,a.jsx)(h.A,{className:"h-4 w-4"})})}),(0,a.jsxs)(P.Cf,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[(0,a.jsxs)(P.c7,{children:[(0,a.jsx)(P.L3,{children:"カスタムテンプレートを作成"}),(0,a.jsx)(P.rr,{children:"新しい概要欄テンプレートを作成します"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(c.J,{htmlFor:"template-name",children:"テンプレート名"}),(0,a.jsx)(i.p,{id:"template-name",placeholder:"例: ゲーム実況用（カスタム）",className:"mt-1"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c.J,{htmlFor:"template-description",children:"説明"}),(0,a.jsx)(i.p,{id:"template-description",placeholder:"このテンプレートの説明",className:"mt-1"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c.J,{children:"セクション構成"}),(0,a.jsxs)("div",{className:"mt-2 space-y-2 text-sm text-muted-foreground",children:[(0,a.jsx)("p",{children:"現在のテンプレート機能では、プリセットテンプレートの選択と適用が可能です。"}),(0,a.jsx)("p",{children:"カスタムテンプレートの作成機能は次回実装予定です。"})]})]})]})]})]})]}),ef&&(()=>{let e=eL.find(e=>e.id===ep)||eW[0];return(0,a.jsxs)(E.Zp,{className:"mb-2",children:[(0,a.jsx)(E.aR,{className:"pb-2",children:(0,a.jsxs)(E.ZB,{className:"text-sm",children:["テンプレート構造: ",e.name]})}),(0,a.jsxs)(E.Wu,{className:"space-y-2",children:[(0,a.jsx)("div",{className:"text-xs text-muted-foreground mb-2",children:e.description}),e.sections.filter(e=>e.enabled).sort((e,s)=>e.order-s.order).map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs p-2 bg-muted/30 rounded",children:[(0,a.jsx)(C.E,{variant:"outline",className:"text-[10px]",children:s+1}),(0,a.jsx)("span",{className:"font-medium",children:e.title||"summary"===e.type?"動画の概要":e.type}),(0,a.jsx)("span",{className:"text-muted-foreground ml-auto",children:e.type})]},s))]})]})})()]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)(c.J,{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("span",{className:"flex items-center gap-2",children:[(0,a.jsx)(u.A,{className:"h-4 w-4"}),"ハッシュタグ"]}),(0,a.jsxs)("span",{className:(0,T.cn)("text-xs font-normal",eo.length>15?"text-yellow-400":eo.length>=10&&eo.length<=15?"text-green-400":"text-muted-foreground"),children:[eo.length," / ",15,"（推奨: 10-15個）"]})]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2 p-3 border rounded-md min-h-[60px] bg-muted/30 mb-2",children:0===eo.length?(0,a.jsx)("div",{className:"text-sm text-muted-foreground italic w-full text-center py-2",children:"ハッシュタグがありません"}):eo.map(e=>(0,a.jsxs)(C.E,{variant:"secondary",className:"flex items-center gap-1.5 px-2 py-1 text-sm group/hashtag",children:[(0,a.jsx)(u.A,{className:"h-3 w-3"}),e,(0,a.jsxs)("div",{className:"flex items-center gap-0.5",children:[(0,a.jsx)(r.$,{variant:"ghost",size:"sm",className:"h-4 w-4 p-0 opacity-0 group-hover/hashtag:opacity-100 hover:bg-[#20B2AA]/20 hover:text-[#20B2AA] rounded-full transition-opacity",onClick:s=>{s.stopPropagation(),sc(e)},"aria-label":"".concat(e,"をお気に入りに追加"),children:(0,a.jsx)(p.A,{className:"h-3 w-3"})}),(0,a.jsx)(r.$,{variant:"ghost",size:"sm",className:"h-4 w-4 p-0 hover:bg-destructive hover:text-destructive-foreground rounded-full",onClick:()=>si(e),"aria-label":"".concat(e,"を削除"),children:(0,a.jsx)(g.A,{className:"h-3 w-3"})})]})]},e))}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(i.p,{placeholder:"ハッシュタグを入力（#は不要）",value:eh,onChange:e=>eu(e.target.value),onKeyDown:e=>{"Enter"===e.key&&eh.trim()&&sn(eh)},className:"flex-1"}),(0,a.jsx)(r.$,{variant:"outline",size:"sm",onClick:()=>{eh.trim()&&sn(eh)},disabled:!eh.trim(),children:(0,a.jsx)(h.A,{className:"h-4 w-4"})})]}),(0,a.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(()=>{let e=so(eE,eS).filter(e=>!eo.includes(e));return e.length>0&&(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"候補:"}),e.slice(0,5).map(e=>(0,a.jsxs)(r.$,{variant:"outline",size:"sm",className:"text-xs h-9 md:h-7",onClick:()=>sn(e),children:[(0,a.jsx)(f.A,{className:"h-3 w-3 md:h-3 mr-1"}),e]},e))]})})(),(()=>{let e=sd().filter(e=>!eo.includes(e));return e.length>0&&(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"お気に入り:"}),e.slice(0,5).map(e=>(0,a.jsxs)(r.$,{variant:"outline",size:"sm",className:"text-xs h-9 md:h-7",onClick:()=>sn(e),children:[(0,a.jsx)(p.A,{className:"h-3 w-3 md:h-3 mr-1 fill-[#20B2AA] text-[#20B2AA]"}),e]},e))]})})()]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"プリセット:"}),(0,a.jsx)(r.$,{variant:"outline",size:"sm",className:"text-xs h-7",onClick:()=>{let e=["VTuber","ゲーム実況","実況","エンタメ"];ex(e),sr(e)},children:"ゲーム実況"}),(0,a.jsx)(r.$,{variant:"outline",size:"sm",className:"text-xs h-7",onClick:()=>{let e=["VTuber","歌枠","歌ってみた","エンタメ"];ex(e),sr(e)},children:"歌枠"}),(0,a.jsx)(r.$,{variant:"outline",size:"sm",className:"text-xs h-7",onClick:()=>{let e=["VTuber","コラボ","コラボ配信","エンタメ"];ex(e),sr(e)},children:"コラボ"})]})]})]})]})]}),(0,a.jsx)("h3",{className:"text-xl font-semibold",children:"AI提案エリア"}),W?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"w-full h-full bg-[#2D2D2D] rounded-md flex flex-col items-center justify-center text-center p-8 min-h-[400px]",children:[(0,a.jsx)(d.A,{className:"w-16 h-16 text-[#A0A0A0] mb-4 animate-spin","aria-hidden":"true"}),(0,a.jsx)("h3",{className:"text-xl font-semibold text-[#E0E0E0]",children:"タイトルと概要欄を生成中..."}),(0,a.jsx)("p",{className:"text-[#A0A0A0] mt-2",children:"AIが最適なタイトルと概要欄を考えています。しばらくお待ちください。"})]}),(0,a.jsxs)("div",{className:"space-y-4",role:"status","aria-label":"タイトルと概要欄生成中",children:[(0,a.jsx)(I.EA,{className:"h-20 w-full"}),(0,a.jsx)(I.EA,{className:"h-20 w-full"}),(0,a.jsx)(I.EA,{className:"h-20 w-full"})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(E.Zp,{children:[(0,a.jsx)(E.aR,{children:(0,a.jsxs)(E.ZB,{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{children:"タイトル案"}),Q.length>0&&(0,a.jsx)("span",{className:"text-xs text-muted-foreground font-normal",children:Q.filter(e=>e.isFavorite).length>0&&(0,a.jsxs)(C.E,{variant:"outline",className:"ml-2",children:[Q.filter(e=>e.isFavorite).length,"件お気に入り"]})})]})}),(0,a.jsx)(E.Wu,{className:"space-y-2",children:0===Q.length?(0,a.jsx)("div",{className:"text-center text-sm text-muted-foreground py-8",children:"タイトル案がありません"}):(0,a.jsx)(S.JY,{onDragEnd:sm,children:(0,a.jsx)(S.gL,{droppableId:"title-options",children:e=>(0,a.jsxs)("div",{...e.droppableProps,ref:e.innerRef,className:"space-y-2",children:[Q.map((e,s)=>(0,a.jsx)(S.sx,{draggableId:e.id,index:s,isDragDisabled:e.isFavorite,children:(t,l)=>(0,a.jsxs)("div",{ref:t.innerRef,...t.draggableProps,className:(0,T.cn)("flex items-center gap-2 p-3 border rounded-md transition-all",e.isFavorite?"bg-[#2D2D2D] border-[#20B2AA]/50":"hover:bg-accent/50",l.isDragging&&"shadow-lg opacity-90 bg-[#3A3A3A]",e.isFavorite&&"border-l-4 border-l-[#20B2AA]"),children:[!e.isFavorite&&(0,a.jsx)("div",{...t.dragHandleProps,className:"hidden md:flex flex-shrink-0 cursor-grab active:cursor-grabbing text-muted-foreground hover:text-foreground","aria-label":"ドラッグして並び替え",children:(0,a.jsx)(j.A,{className:"h-4 w-4"})}),(0,a.jsx)(r.$,{variant:"ghost",size:"sm",className:(0,T.cn)("flex-shrink-0 h-8 w-8 p-0",e.isFavorite&&"text-[#20B2AA]"),onClick:()=>sa(e.id,e.text),"aria-label":e.isFavorite?"お気に入りを解除":"お気に入りに追加",children:(0,a.jsx)(p.A,{className:(0,T.cn)("h-4 w-4",e.isFavorite?"fill-[#20B2AA] text-[#20B2AA]":"")})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("span",{className:(0,T.cn)("block text-sm mb-2",e.isFavorite&&"font-medium"),children:e.text}),(()=>{let s=sl(e.text,eE);return(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-2 text-xs",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 md:hidden",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsxs)("span",{className:(0,T.cn)("font-medium",s.isOverRecommended?"text-yellow-400":s.charCount>=30&&s.charCount<=60?"text-green-400":"text-muted-foreground"),children:[s.charCount,"文字"]}),s.isOverRecommended&&(0,a.jsx)(v.A,{className:"h-3 w-3 text-yellow-400"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"スコア:"}),(0,a.jsx)("span",{className:(0,T.cn)("font-semibold",s.score>=80?"text-green-400":s.score>=60?"text-yellow-400":"text-red-400"),children:s.score}),(0,a.jsx)("span",{className:"text-muted-foreground text-[10px]",children:"/100"})]})]}),(0,a.jsxs)("div",{className:"hidden md:flex md:flex-wrap md:items-center md:gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsxs)("span",{className:(0,T.cn)("font-medium",s.isOverRecommended?"text-yellow-400":s.charCount>=30&&s.charCount<=60?"text-green-400":"text-muted-foreground"),children:[s.charCount,"文字"]}),s.isOverRecommended&&(0,a.jsx)(v.A,{className:"h-3 w-3 text-yellow-400"}),s.charCount>=30&&s.charCount<=60&&(0,a.jsx)(C.E,{variant:"outline",className:"text-[10px] px-1.5 py-0 h-4 border-green-400/50 text-green-400",children:"推奨"})]}),eE.trim()&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(N.A,{className:"h-3 w-3 text-muted-foreground"}),(0,a.jsxs)("span",{className:"text-muted-foreground",children:["キーワード: ",s.keywordCoverage,"%"]}),s.keywordCoverage>=50&&(0,a.jsx)(C.E,{variant:"outline",className:"text-[10px] px-1.5 py-0 h-4 border-blue-400/50 text-blue-400",children:"高"})]}),s.features.length>0&&(0,a.jsx)("div",{className:"flex items-center gap-1 flex-wrap",children:s.features.map((e,s)=>(0,a.jsx)(C.E,{variant:"secondary",className:"text-[10px] px-1.5 py-0 h-4",children:e},s))}),(0,a.jsxs)("div",{className:"flex items-center gap-1 ml-auto",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"スコア:"}),(0,a.jsx)("span",{className:(0,T.cn)("font-semibold",s.score>=80?"text-green-400":s.score>=60?"text-yellow-400":"text-red-400"),children:s.score}),(0,a.jsx)("span",{className:"text-muted-foreground text-[10px]",children:"/100"}),(0,a.jsx)("div",{className:"flex gap-0.5 ml-1",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,a.jsx)(p.A,{className:(0,T.cn)("h-2.5 w-2.5",t<Math.round(s.score/20)?"fill-yellow-400 text-yellow-400":"text-muted-foreground/30")},t))})]})]})]})})()]}),(0,a.jsxs)("div",{className:"flex gap-2 flex-shrink-0",children:[(0,a.jsx)(r.$,{variant:"outline",size:"sm",onClick:()=>ss(e.text),"aria-label":"タイトル案".concat(s+1,"を選択"),children:"選択"}),(0,a.jsx)(r.$,{variant:"ghost",size:"sm",onClick:()=>st(e.text,e.id),"aria-label":"タイトル案".concat(s+1,"をコピー"),children:ea===e.id?(0,a.jsx)(b.A,{className:"h-4 w-4 text-[#20B2AA]"}):(0,a.jsx)(y.A,{className:"h-4 w-4"})}),(0,a.jsx)(r.$,{variant:"ghost",size:"sm",onClick:s=>{s.stopPropagation(),e8(e.id,e.text)},disabled:ew===e.id,"aria-label":"タイトル案".concat(s+1,"を再生成"),title:"このタイトル案を再生成",className:"hidden md:flex",children:ew===e.id?(0,a.jsx)(d.A,{className:"h-4 w-4 animate-spin"}):(0,a.jsx)(o.A,{className:"h-4 w-4"})}),(0,a.jsx)(r.$,{variant:"ghost",size:"sm",onClick:s=>{s.stopPropagation(),e9(e.text)},disabled:ev,"aria-label":"タイトル案".concat(s+1,"をもとに別パターンを生成"),title:"この案をもとに別パターンを生成",className:"hidden md:flex",children:ev?(0,a.jsx)(d.A,{className:"h-4 w-4 animate-spin"}):(0,a.jsx)(w.A,{className:"h-4 w-4"})}),(0,a.jsxs)(J.rI,{children:[(0,a.jsx)(J.ty,{asChild:!0,children:(0,a.jsx)(r.$,{variant:"ghost",size:"sm",className:"md:hidden","aria-label":"その他のオプション",children:(0,a.jsx)(A.A,{className:"h-4 w-4"})})}),(0,a.jsxs)(J.SQ,{align:"end",className:"bg-[#2D2D2D] border-[#4A4A4A] shadow-lg",children:[(0,a.jsx)(J._2,{onClick:s=>{s.stopPropagation(),e8(e.id,e.text)},disabled:ew===e.id,children:ew===e.id?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.A,{className:"mr-2 h-4 w-4 animate-spin"}),"再生成中..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.A,{className:"mr-2 h-4 w-4"}),"このタイトル案を再生成"]})}),(0,a.jsx)(J._2,{onClick:s=>{s.stopPropagation(),e9(e.text)},disabled:ev,children:ev?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.A,{className:"mr-2 h-4 w-4 animate-spin"}),"生成中..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(w.A,{className:"mr-2 h-4 w-4"}),"別パターンを生成"]})})]})]})]})]})},e.id)),e.placeholder]})})})})]}),(0,a.jsxs)(E.Zp,{children:[(0,a.jsx)(E.aR,{children:(0,a.jsxs)(E.ZB,{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{children:"概要欄"}),(0,a.jsx)($.tU,{value:Z,onValueChange:e=>H(e),className:"w-auto",children:(0,a.jsxs)($.j7,{className:"h-8",children:[(0,a.jsxs)($.Xi,{value:"edit",className:"text-xs px-3",children:[(0,a.jsx)(k.A,{className:"h-3 w-3 mr-1.5"}),"編集"]}),(0,a.jsxs)($.Xi,{value:"preview",className:"text-xs px-3",children:[(0,a.jsx)(x.A,{className:"h-3 w-3 mr-1.5"}),"プレビュー"]})]})})]})}),(0,a.jsx)(E.Wu,{className:"space-y-4",children:(0,a.jsxs)($.tU,{value:Z,onValueChange:e=>H(e),children:[(0,a.jsxs)($.av,{value:"edit",className:"space-y-2 mt-0",children:[(0,a.jsxs)("div",{className:"flex justify-end items-center gap-2 text-xs",children:[(0,a.jsxs)("span",{className:(0,T.cn)(es.length>5e3?"text-red-400 font-semibold":es.length>4500?"text-yellow-400":"text-muted-foreground"),children:[es.length," / ",5e3]}),es.length>5e3&&(0,a.jsx)(C.E,{variant:"destructive",className:"text-xs",children:"制限超過"})]}),(0,a.jsx)(n.T,{value:es,onChange:e=>{let s=e.target.value;et(s),K(s)},placeholder:"AIが生成した概要欄（編集可能）",rows:12,className:"resize-y font-mono text-sm"})]}),(0,a.jsxs)($.av,{value:"preview",className:"mt-0",children:[(0,a.jsx)("div",{className:"border rounded-lg p-4 bg-[#0F0F0F] min-h-[200px]",children:es?(0,a.jsx)("div",{className:"text-sm text-white whitespace-pre-wrap font-sans leading-relaxed",children:es.split("\n").map((e,s)=>{let t=e.match(/^【(.+?)】/);if(t){let l=t[1];return(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsxs)("div",{className:"text-[#20B2AA] font-semibold mb-1",children:["【",l,"】"]}),(0,a.jsx)("div",{className:"text-gray-300 ml-2",children:e.replace(/^【.+?】/,"").trim()||"\xa0"})]},s)}return e.includes("#")||e.trim().startsWith("#")?(0,a.jsx)("div",{className:"mb-2 text-[#3EA6FF]",children:e},s):e.match(/^\d{1,2}:\d{2}/)?(0,a.jsx)("div",{className:"mb-1 text-[#3EA6FF] font-medium",children:e},s):(0,a.jsx)("div",{className:"mb-1 text-gray-300",children:e||"\xa0"},s)})}):(0,a.jsx)("div",{className:"text-gray-500 text-sm italic",children:"概要欄がありません"})}),(0,a.jsx)("div",{className:"flex justify-end items-center gap-2 text-xs mt-2",children:(0,a.jsxs)("span",{className:(0,T.cn)(es.length>5e3?"text-red-400 font-semibold":es.length>4500?"text-yellow-400":"text-muted-foreground"),children:[es.length," / ",5e3]})})]})]})})]})]})]})]});return(0,a.jsxs)("div",{className:"h-full flex flex-col md:flex-row md:h-screen",children:[(0,a.jsxs)("div",{className:"hidden md:flex md:flex-row w-full h-full",children:[(0,a.jsx)("aside",{className:"w-full md:w-72 lg:w-80 xl:w-96 border-r border-[#4A4A4A] bg-[#1A1A1A] overflow-y-auto",children:sx}),(0,a.jsx)("main",{className:"flex-1 p-3 sm:p-4 bg-[#1A1A1A] overflow-y-auto",children:sh})]}),(0,a.jsxs)("div",{className:"w-full h-[calc(100vh-4.1rem)] flex flex-col overflow-y-auto md:hidden",children:[(0,a.jsx)("div",{className:"bg-background flex-shrink-0",children:(0,a.jsx)($.tU,{defaultValue:"settings",value:s,onValueChange:t,className:"w-full flex flex-col",children:(0,a.jsx)("div",{className:"px-2 pt-2 pb-0",children:(0,a.jsxs)($.j7,{className:"grid w-full grid-cols-2 border-b border-[#4A4A4A] rounded-none bg-transparent p-0 h-auto",children:[(0,a.jsx)($.Xi,{value:"settings",className:"data-[state=active]:bg-transparent data-[state=active]:shadow-none rounded-none border-b-2 border-transparent data-[state=active]:border-[#00D4FF] data-[state=active]:text-[#00D4FF] px-2 py-2 relative",children:"設定"}),(0,a.jsx)($.Xi,{value:"results",className:"data-[state=active]:bg-transparent data-[state=active]:shadow-none rounded-none border-b-2 border-transparent data-[state=active]:border-[#00D4FF] data-[state=active]:text-[#00D4FF] px-2 py-2 relative",children:"結果"})]})})})}),(0,a.jsxs)($.tU,{value:s,onValueChange:t,className:"w-full flex-1 flex flex-col",children:[(0,a.jsx)($.av,{value:"settings",className:"flex-1 mt-0",children:sx}),(0,a.jsx)($.av,{value:"results",className:"flex-1 mt-0",children:sh})]})]})]})}},45674:(e,s,t)=>{Promise.resolve().then(t.bind(t,29583))}},e=>{e.O(0,[96,76,358],()=>e(e.s=45674)),_N_E=e.O()}]);