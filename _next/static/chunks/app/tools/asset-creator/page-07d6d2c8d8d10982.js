(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1064],{318:(e,t,r)=>{Promise.resolve().then(r.bind(r,7054))},2392:(e,t,r)=>{"use strict";r.d(t,{U:()=>i});var s=r(5766);function i(e){let[t,r]=s.useState(!1);return s.useEffect(()=>{function t(e){r(e.matches)}let s=window.matchMedia(e);return s.addEventListener("change",t),r(s.matches),()=>s.removeEventListener("change",t)},[e]),t}},4038:(e,t,r)=>{"use strict";r.d(t,{Xi:()=>o,av:()=>d,j7:()=>l,tU:()=>n});var s=r(6166);r(5766);var i=r(3692),a=r(6821);function n(e){let{className:t,...r}=e;return(0,s.jsx)(i.bL,{"data-slot":"tabs",className:(0,a.cn)("flex flex-col gap-2",t),...r})}function l(e){let{className:t,...r}=e;return(0,s.jsx)(i.B8,{"data-slot":"tabs-list",className:(0,a.cn)("bg-secondary text-secondary-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",t),...r})}function o(e){let{className:t,...r}=e;return(0,s.jsx)(i.l9,{"data-slot":"tabs-trigger",className:(0,a.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...r})}function d(e){let{className:t,...r}=e;return(0,s.jsx)(i.UC,{"data-slot":"tabs-content",className:(0,a.cn)("flex-1 outline-none",t),...r})}},4139:(e,t,r)=>{"use strict";r.d(t,{T:()=>n});var s=r(6166),i=r(5766),a=r(6821);let n=i.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,s.jsx)("textarea",{className:(0,a.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...i})});n.displayName="Textarea"},6240:(e,t,r)=>{"use strict";r.d(t,{q7:()=>S,bL:()=>R});var s=r(5766),i=r(1261),a=r(7516),n=r(8935),l=r(8436),o=r(7918),d=r(6166),c="Toggle",u=s.forwardRef((e,t)=>{let{pressed:r,defaultPressed:s,onPressedChange:i,...n}=e,[u,h]=(0,o.i)({prop:r,onChange:i,defaultProp:null!=s&&s,caller:c});return(0,d.jsx)(a.sG.button,{type:"button","aria-pressed":u,"data-state":u?"on":"off","data-disabled":e.disabled?"":void 0,...n,ref:t,onClick:(0,l.mK)(e.onClick,()=>{e.disabled||h(!u)})})});u.displayName=c;var h=r(9482),g="ToggleGroup",[x,m]=(0,i.A)(g,[n.RG]),f=(0,n.RG)(),p=s.forwardRef((e,t)=>{let{type:r,...s}=e;if("single"===r)return(0,d.jsx)(j,{...s,ref:t});if("multiple"===r)return(0,d.jsx)(w,{...s,ref:t});throw Error("Missing prop `type` expected on `".concat(g,"`"))});p.displayName=g;var[v,b]=x(g),j=s.forwardRef((e,t)=>{let{value:r,defaultValue:i,onValueChange:a=()=>{},...n}=e,[l,c]=(0,o.i)({prop:r,defaultProp:null!=i?i:"",onChange:a,caller:g});return(0,d.jsx)(v,{scope:e.__scopeToggleGroup,type:"single",value:s.useMemo(()=>l?[l]:[],[l]),onItemActivate:c,onItemDeactivate:s.useCallback(()=>c(""),[c]),children:(0,d.jsx)(k,{...n,ref:t})})}),w=s.forwardRef((e,t)=>{let{value:r,defaultValue:i,onValueChange:a=()=>{},...n}=e,[l,c]=(0,o.i)({prop:r,defaultProp:null!=i?i:[],onChange:a,caller:g}),u=s.useCallback(e=>c(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[...t,e]}),[c]),h=s.useCallback(e=>c(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.filter(t=>t!==e)}),[c]);return(0,d.jsx)(v,{scope:e.__scopeToggleGroup,type:"multiple",value:l,onItemActivate:u,onItemDeactivate:h,children:(0,d.jsx)(k,{...n,ref:t})})});p.displayName=g;var[y,N]=x(g),k=s.forwardRef((e,t)=>{let{__scopeToggleGroup:r,disabled:s=!1,rovingFocus:i=!0,orientation:l,dir:o,loop:c=!0,...u}=e,g=f(r),x=(0,h.jH)(o),m={role:"group",dir:x,...u};return(0,d.jsx)(y,{scope:r,rovingFocus:i,disabled:s,children:i?(0,d.jsx)(n.bL,{asChild:!0,...g,orientation:l,dir:x,loop:c,children:(0,d.jsx)(a.sG.div,{...m,ref:t})}):(0,d.jsx)(a.sG.div,{...m,ref:t})})}),C="ToggleGroupItem",E=s.forwardRef((e,t)=>{let r=b(C,e.__scopeToggleGroup),i=N(C,e.__scopeToggleGroup),a=f(e.__scopeToggleGroup),l=r.value.includes(e.value),o=i.disabled||e.disabled,c={...e,pressed:l,disabled:o},u=s.useRef(null);return i.rovingFocus?(0,d.jsx)(n.q7,{asChild:!0,...a,focusable:!o,active:l,ref:u,children:(0,d.jsx)(z,{...c,ref:t})}):(0,d.jsx)(z,{...c,ref:t})});E.displayName=C;var z=s.forwardRef((e,t)=>{let{__scopeToggleGroup:r,value:s,...i}=e,a=b(C,r),n={role:"radio","aria-checked":e.pressed,"aria-pressed":void 0},l="single"===a.type?n:void 0;return(0,d.jsx)(u,{...l,...i,ref:t,onPressedChange:e=>{e?a.onItemActivate(s):a.onItemDeactivate(s)}})}),R=p,S=E},6614:(e,t,r)=>{"use strict";r.d(t,{$:()=>o,r:()=>l});var s=r(6166);r(5766);var i=r(1205),a=r(4911),n=r(6821);let l=(0,a.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function o(e){let{className:t,variant:r,size:a,asChild:o=!1,...d}=e,c=o?i.DX:"button";return(0,s.jsx)(c,{"data-slot":"button",className:(0,n.cn)(l({variant:r,size:a,className:t})),...d})}},7054:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>F});var s=r(6166),i=r(5766),a=r(2789),n=r(9227),l=r(6614),o=r(6179),d=r(2391),c=r(6423),u=r(1021),h=r(508),g=r(4038),x=r(2392),m=r(4139),f=r(9885),p=r(388),v=r(9534),b=r(8448),j=r(6821),w=r(3202),y=r(5742),N=r(2811),k=r(542);let C=i.memo(e=>{let{id:t,isSelected:r,text:a,color:n="white",fontSize:l="2rem",className:o,x:d,y:c,width:u,height:h,rotation:g,onDragStop:x,onResizeStop:m,enableResizing:f,disableDragging:p}=e,{updateLayer:v}=(0,w.S)(),[b,y]=(0,i.useState)({x:d,y:c}),[C,E]=(0,i.useState)(!1),z=(0,i.useRef)(null),R=(0,i.useRef)(null);(0,i.useEffect)(()=>{y({x:d,y:c})},[d,c]);let S=(0,i.useCallback)(e=>{var r;e.preventDefault(),e.stopPropagation(),E(!0);let s=null==(r=z.current)?void 0:r.getSelfElement();if(!s)return;let i=s.parentElement;if(!i)return;let a=i.getBoundingClientRect(),n=a.left+b.x+u/2,l=a.top+b.y+h/2,o=e=>{if(0===e.touches.length)return;let r=e.touches[0].clientX-n;v(t,{rotation:180/Math.PI*Math.atan2(e.touches[0].clientY-l,r)+90})},d=()=>{E(!1),window.removeEventListener("touchmove",o),window.removeEventListener("touchend",d)};window.addEventListener("touchmove",o),window.addEventListener("touchend",d)},[t,v,b.x,b.y,u,h]);return(0,i.useEffect)(()=>{let e=R.current;if(e)return e.addEventListener("touchstart",S,{passive:!1}),()=>{e.removeEventListener("touchstart",S)}},[S]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(N.p,{ref:z,size:{width:u,height:h},position:b,onDragStart:()=>{if(C)return!1},onDrag:(e,t)=>{C||y({x:t.x,y:t.y})},onDragStop:x,onResizeStop:m,minWidth:50,minHeight:20,enableResizing:f,disableDragging:p||C,className:"border border-dashed border-transparent hover:border-gray-500 transition-colors duration-200",style:{display:"flex",alignItems:"center",justifyContent:"center"},children:(0,s.jsx)("div",{className:"w-full h-full flex items-center justify-center",style:{transform:"rotate(".concat(g,"deg)"),transformOrigin:"center"},children:(0,s.jsx)("p",{className:(0,j.cn)("cursor-move",o),style:{color:n,fontSize:l,lineHeight:1,whiteSpace:"pre-wrap"},children:a})})}),r&&(0,s.jsx)("div",{ref:R,onMouseDown:e=>{var r;e.preventDefault(),e.stopPropagation(),E(!0);let s=null==(r=z.current)?void 0:r.getSelfElement();if(!s)return;let i=s.parentElement;if(!i)return;let a=i.getBoundingClientRect(),n=a.left+b.x+u/2,l=a.top+b.y+h/2,o=e=>{let r=e.clientX-n;v(t,{rotation:180/Math.PI*Math.atan2(e.clientY-l,r)+90})},d=()=>{E(!1),window.removeEventListener("mousemove",o),window.removeEventListener("mouseup",d)};window.addEventListener("mousemove",o),window.addEventListener("mouseup",d)},className:"absolute cursor-grab active:cursor-grabbing bg-white border rounded-full p-1 shadow z-10",style:{left:b.x+u/2,top:b.y-30,transform:"translateX(-50%)"},children:(0,s.jsx)(k.A,{className:"h-4 w-4"})})]})}),E=i.memo(e=>{let{id:t,isSelected:r,src:a,alt:n,x:l,y:o,width:d,height:c,rotation:u,onDragStop:h,onResize:g,onResizeStop:x,onSelect:m,isLocked:f,isDraggable:p,lockAspectRatio:v,enableResizing:b,disableDragging:j,onRotateStart:y,onRotate:C,onRotateStop:E}=e,{updateLayer:z}=(0,w.S)(),[R,S]=(0,i.useState)({x:l,y:o}),[L,A]=(0,i.useState)(!1),D=(0,i.useRef)(null),P=(0,i.useRef)(null);(0,i.useEffect)(()=>{S({x:l,y:o})},[l,o]);let $=(0,i.useCallback)(e=>{var r;e.preventDefault(),e.stopPropagation(),A(!0);let s=null==(r=D.current)?void 0:r.getSelfElement();if(!s)return;let i=s.parentElement;if(!i)return;let a=i.getBoundingClientRect(),n=a.left+R.x+d/2,l=a.top+R.y+c/2,o=e=>{if(0===e.touches.length)return;let r=e.touches[0].clientX-n;z(t,{rotation:180/Math.PI*Math.atan2(e.touches[0].clientY-l,r)+90})},u=()=>{A(!1),window.removeEventListener("touchmove",o),window.removeEventListener("touchend",u)};window.addEventListener("touchmove",o),window.addEventListener("touchend",u)},[t,z,R.x,R.y,d,c]);return(0,i.useEffect)(()=>{let e=P.current;if(e)return e.addEventListener("touchstart",$,{passive:!1}),()=>{e.removeEventListener("touchstart",$)}},[$]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(N.p,{ref:D,size:{width:d,height:c},position:R,onDragStart:()=>{if(L)return!1},onDrag:(e,t)=>{L||S({x:t.x,y:t.y})},onDragStop:h,onResize:g,onResizeStop:x,lockAspectRatio:v,enableResizing:b,disableDragging:j||L,className:"border border-dashed border-transparent hover:border-gray-500 transition-colors duration-200",children:(0,s.jsx)("div",{style:{width:"100%",height:"100%",transform:"rotate(".concat(u,"deg)"),transformOrigin:"center"},children:(0,s.jsx)("div",{style:{width:"100%",height:"100%",backgroundImage:a?"url(".concat(a,")"):"none",backgroundSize:"cover",backgroundPosition:"center"}})})}),r&&(0,s.jsx)("div",{ref:P,onMouseDown:e=>{var r;e.preventDefault(),e.stopPropagation(),A(!0);let s=null==(r=D.current)?void 0:r.getSelfElement();if(!s)return;let i=s.parentElement;if(!i)return;let a=i.getBoundingClientRect(),n=a.left+R.x+d/2,l=a.top+R.y+c/2,o=e=>{let r=e.clientX-n;z(t,{rotation:180/Math.PI*Math.atan2(e.clientY-l,r)+90})},u=()=>{A(!1),window.removeEventListener("mousemove",o),window.removeEventListener("mouseup",u)};window.addEventListener("mousemove",o),window.addEventListener("mouseup",u)},className:"absolute cursor-grab active:cursor-grabbing bg-white border rounded-full p-1 shadow z-10",style:{left:R.x+d/2,top:R.y-30,transform:"translateX(-50%)"},children:(0,s.jsx)(k.A,{className:"h-4 w-4"})})]})}),z=e=>{let{id:t,isSelected:r,shapeType:a,backgroundColor:n,borderColor:l,borderWidth:o,rotation:d,onDragStop:c,onResize:u,onResizeStop:h,lockAspectRatio:g,enableResizing:x,disableDragging:m,x:f,y:p,width:v,height:b}=e,{updateLayer:j}=(0,w.S)(),[y,C]=(0,i.useState)({x:f||0,y:p||0}),[E,z]=(0,i.useState)(!1),R=(0,i.useRef)(null),S=(0,i.useRef)(null);(0,i.useEffect)(()=>{C({x:f||0,y:p||0})},[f,p]);let L=(0,i.useCallback)(e=>{var r;e.preventDefault(),e.stopPropagation(),z(!0);let s=null==(r=R.current)?void 0:r.getSelfElement();if(!s)return;let i=s.parentElement;if(!i)return;let a=i.getBoundingClientRect(),n=a.left+y.x+v/2,l=a.top+y.y+b/2,o=e=>{if(0===e.touches.length)return;let r=e.touches[0].clientX-n;j(t,{rotation:180/Math.PI*Math.atan2(e.touches[0].clientY-l,r)+90})},d=()=>{z(!1),window.removeEventListener("touchmove",o),window.removeEventListener("touchend",d)};window.addEventListener("touchmove",o),window.addEventListener("touchend",d)},[t,j,y.x,y.y,v,b]);return(0,i.useEffect)(()=>{let e=S.current;if(e)return e.addEventListener("touchstart",L,{passive:!1}),()=>{e.removeEventListener("touchstart",L)}},[L]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(N.p,{ref:R,size:{width:v,height:b},position:y,onDragStart:()=>{if(E)return!1},onDrag:(e,t)=>{E||C({x:t.x,y:t.y})},onDragStop:c,onResize:u,onResizeStop:h,lockAspectRatio:g,enableResizing:x,disableDragging:m||E,className:"border border-dashed border-transparent hover:border-gray-500 transition-colors duration-200",children:(0,s.jsx)("div",{style:{width:"100%",height:"100%",transform:"rotate(".concat(d,"deg)"),transformOrigin:"center"},children:(()=>{let e={width:"100%",height:"100%",style:{overflow:"visible"}};switch(a){case"line":return(0,s.jsx)("svg",{...e,children:(0,s.jsx)("line",{x1:0,y1:b/2,x2:v,y2:b/2,stroke:l,strokeWidth:o})});case"arrow":return(0,s.jsxs)("svg",{...e,children:[(0,s.jsx)("defs",{children:(0,s.jsx)("marker",{id:"arrowhead-".concat(t),markerWidth:"10",markerHeight:"7",refX:"10",refY:"3.5",orient:"auto",fill:l,children:(0,s.jsx)("polygon",{points:"0 0, 10 3.5, 0 7"})})}),(0,s.jsx)("line",{x1:0,y1:b/2,x2:v-10,y2:b/2,stroke:l,strokeWidth:o,markerEnd:"url(#arrowhead-".concat(t,")")})]});default:return(0,s.jsx)("div",{style:{width:"100%",height:"100%",backgroundColor:n,border:"".concat(o,"px solid ").concat(l),borderRadius:"circle"===a?"50%":"0"}})}})()})}),r&&(0,s.jsx)("div",{ref:S,onMouseDown:e=>{var r;e.preventDefault(),e.stopPropagation(),z(!0);let s=null==(r=R.current)?void 0:r.getSelfElement();if(!s)return;let i=s.parentElement;if(!i)return;let a=i.getBoundingClientRect(),n=a.left+y.x+v/2,l=a.top+y.y+b/2,o=e=>{let r=e.clientX-n;j(t,{rotation:180/Math.PI*Math.atan2(e.clientY-l,r)+90})},d=()=>{z(!1),window.removeEventListener("mousemove",o),window.removeEventListener("mouseup",d)};window.addEventListener("mousemove",o),window.addEventListener("mouseup",d)},className:"absolute cursor-grab active:cursor-grabbing bg-white border rounded-full p-1 shadow z-10",style:{left:y.x+v/2,top:y.y-30,transform:"translateX(-50%)"},children:(0,s.jsx)(k.A,{className:"h-4 w-4"})})]})};var R=r(7347),S=r(4654),L=r(4431),A=r(3191),D=r(8647),P=r(7727),$=r(8421),M=r(189);let _=()=>{let{layers:e,updateLayer:t,removeLayer:r,selectedLayerId:i,setSelectedLayerId:a,reorderLayers:n,duplicateLayer:o,moveLayerUp:d,moveLayerDown:c}=(0,w.S)();return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold",children:"レイヤー"}),(0,s.jsx)($.F,{className:"h-[calc(100vh-250px)] w-full rounded-md border p-4",children:0===e.length?(0,s.jsx)("p",{className:"text-muted-foreground",children:"レイヤーがありません。"}):(0,s.jsx)(M.JY,{onDragEnd:e=>{e.destination&&n(e.source.index,e.destination.index)},children:(0,s.jsx)(M.gL,{droppableId:"layers",children:n=>(0,s.jsxs)("div",{...n.droppableProps,ref:n.innerRef,className:"space-y-2",children:[e.map((n,u)=>(0,s.jsx)(M.sx,{draggableId:n.id,index:u,children:(h,g)=>(0,s.jsxs)("div",{ref:h.innerRef,...h.draggableProps,...h.dragHandleProps,className:"flex items-center justify-between p-2 rounded-md border ".concat(i===n.id?"bg-accent":"bg-card"," ").concat(g.isDragging?"shadow-lg opacity-90 bg-blue-100":""),onClick:()=>a(n.id),children:[(0,s.jsx)("div",{className:"flex items-center space-x-2",children:(0,s.jsx)("span",{className:"text-sm font-medium truncate w-24",children:n.name})}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(l.$,{variant:"ghost",size:"icon",onClick:e=>{e.stopPropagation(),d(n.id)},disabled:0===u,children:(0,s.jsx)(R.A,{className:"h-4 w-4"})}),(0,s.jsx)(l.$,{variant:"ghost",size:"icon",onClick:e=>{e.stopPropagation(),c(n.id)},disabled:u===e.length-1,children:(0,s.jsx)(S.A,{className:"h-4 w-4"})}),(0,s.jsx)(l.$,{variant:"ghost",size:"icon",onClick:r=>{r.stopPropagation(),(r=>{var s;t(r,{visible:!(null==(s=e.find(e=>e.id===r))?void 0:s.visible)})})(n.id)},children:n.visible?(0,s.jsx)(L.A,{className:"h-4 w-4"}):(0,s.jsx)(A.A,{className:"h-4 w-4"})}),(0,s.jsx)(l.$,{variant:"ghost",size:"icon",onClick:e=>{e.stopPropagation(),o(n.id)},children:(0,s.jsx)(D.A,{className:"h-4 w-4"})}),(0,s.jsx)(l.$,{variant:"ghost",size:"icon",onClick:e=>{e.stopPropagation(),r(n.id)},children:(0,s.jsx)(P.A,{className:"h-4 w-4 text-red-500"})})]})]})},n.id)),n.placeholder]})})})})]})},I=["image/jpeg","image/jpg","image/png","image/webp"];function F(){let[e,t]=i.useState(!1),[r,N]=i.useState("settings"),[k,R]=i.useState(!1),S=(0,x.U)("(min-width: 1024px)"),{selectedTemplate:L,setSelectedTemplate:A,currentText:D,setCurrentText:P,layers:$,addLayer:M,updateLayer:F,selectedLayerId:T,setSelectedLayerId:X,aspectRatio:G,customAspectRatio:W}=(0,w.S)(),B=$.find(e=>e.id===T);i.useEffect(()=>{let e=e=>{"Shift"===e.key&&R(!0)},t=e=>{"Shift"===e.key&&R(!1)};return window.addEventListener("keydown",e),window.addEventListener("keyup",t),()=>{window.removeEventListener("keydown",e),window.removeEventListener("keyup",t)}},[]),i.useEffect(()=>{S?t(!0):t(!1)},[S]);let J=i.useCallback(async e=>{let t=document.getElementById("thumbnail-preview");if(t)try{let r;switch(e){case"normal":default:r=720;break;case"high":r=1080;break;case"super":r=2160}let s=16/9;if("custom"===G)W.width>0&&W.height>0&&(s=W.width/W.height);else{let[e,t]=G.split(":").map(Number);e>0&&t>0&&(s=e/t)}let i=Math.round(r*s),n=r,l=await (0,a.$E)(t,{cacheBust:!0,width:i,height:n}),o=document.createElement("a");o.download="creative_".concat(e,".png"),o.href=l,o.click()}catch(e){console.error("画像の生成に失敗しました",e),n.oR.error("画像の生成に失敗しました",{description:"時間をおいて再度お試しいただくか、別の画像でお試しください。"})}},[G,W]),V=i.useCallback((e,t,r)=>{F(e,{x:r.x,y:r.y})},[F]),Y=i.useCallback((e,t,r,s,i)=>{F(e,{width:r.offsetWidth,height:r.offsetHeight,x:i.x,y:i.y})},[F]),O=e=>{let t=e.target.files;if(t){for(let e of Array.from(t)){if(e.size>0xa00000){n.oR.error("ファイルサイズが大きすぎます: ".concat(e.name),{description:"10MB以下のファイルを選択してください。"});continue}if(!I.includes(e.type)){n.oR.error("ファイル形式が無効です: ".concat(e.name),{description:"JPEG, PNG, WEBP形式の画像ファイルを選択してください。"});continue}let t=URL.createObjectURL(e);M({type:"image",name:e.name,visible:!0,locked:!1,x:S?550:50,y:S?250:50,width:S?300:150,height:S?300:150,src:t})}e.target.value=""}},U=e=>{let t=$.filter(e=>"shape"===e.type).length*(S?20:5),r=$.filter(t=>t.shapeType===e).length+1,s="",i=S?550:10,a=S?250:10,n=S?300:50,l=S?300:50,o=S?2:1,d=S?300:100,c=S?5:3;switch(e){case"rectangle":s="四角 ".concat(r);break;case"circle":s="円 ".concat(r);break;case"line":s="線 ".concat(r);break;case"arrow":s="矢印 ".concat(r)}M({type:"shape",shapeType:e,name:s,visible:!0,locked:!1,x:i+t,y:a+t,width:"line"===e||"arrow"===e?d:n,height:"line"===e||"arrow"===e?c:l,backgroundColor:"#cccccc",borderColor:"#000000",borderWidth:o})},H=()=>{M({type:"text",name:"テキスト ".concat($.filter(e=>"text"===e.type).length+1),visible:!0,locked:!1,x:S?550:50,y:S?250:50,width:S?300:150,height:S?100:50,text:D,color:"#000000",fontSize:S?"2rem":"1rem"})};if(!L)return(0,s.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,s.jsx)("p",{children:"テンプレートを読み込み中..."})});let q=()=>(0,s.jsxs)(b.nD,{type:"multiple",className:"w-full",defaultValue:["text"],children:[(0,s.jsxs)(b.As,{value:"text",children:[(0,s.jsx)(b.$m,{children:"テキスト"}),(0,s.jsxs)(b.ub,{className:"space-y-4 pt-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(p.J,{htmlFor:"thumbnail-text",children:"テキスト内容"}),(0,s.jsx)(m.T,{id:"thumbnail-text",value:D,onChange:e=>P(e.target.value),className:"h-24"})]}),(0,s.jsx)("div",{className:"pt-4",children:(0,s.jsx)(l.$,{variant:"outline",className:"w-full",onClick:H,children:"テキストを追加"})})]})]}),(0,s.jsxs)(b.As,{value:"images",children:[(0,s.jsx)(b.$m,{children:"画像"}),(0,s.jsx)(b.ub,{className:"space-y-4 pt-4",children:(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(p.J,{htmlFor:"add-images",children:"画像を追加"}),(0,s.jsx)(v.p,{id:"add-images",type:"file",accept:"image/*",multiple:!0,onChange:O})]})})]}),(0,s.jsxs)(b.As,{value:"shapes",children:[(0,s.jsx)(b.$m,{children:"図形"}),(0,s.jsx)(b.ub,{className:"space-y-4 pt-4",children:(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,s.jsx)(l.$,{variant:"outline",onClick:()=>U("rectangle"),children:"四角を追加"}),(0,s.jsx)(l.$,{variant:"outline",onClick:()=>U("circle"),children:"円を追加"}),(0,s.jsx)(l.$,{variant:"outline",onClick:()=>U("line"),children:"線を追加"}),(0,s.jsx)(l.$,{variant:"outline",onClick:()=>U("arrow"),children:"矢印を追加"})]})})]}),(0,s.jsxs)(b.As,{value:"style",children:[(0,s.jsx)(b.$m,{children:"スタイル"}),(0,s.jsxs)(b.ub,{className:"space-y-4 pt-4",children:[!B&&(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"レイヤーを選択してください"}),(null==B?void 0:B.type)==="text"&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(p.J,{htmlFor:"text-color",children:"テキストカラー"}),(0,s.jsx)("input",{id:"text-color",type:"color",value:B.color,onChange:e=>F(B.id,{color:e.target.value}),className:"w-full h-10 rounded-md"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(p.J,{htmlFor:"font-size",children:["フォントサイズ (",B.fontSize,")"]}),(0,s.jsx)(f.A,{id:"font-size",min:1,max:8,step:.1,value:[parseFloat(B.fontSize||"1")],onValueChange:e=>F(B.id,{fontSize:"".concat(e[0],"rem")})})]})]}),(null==B?void 0:B.type)==="shape"&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(p.J,{htmlFor:"shape-fill",children:"塗りつぶし"}),(0,s.jsx)("input",{id:"shape-fill",type:"color",value:B.backgroundColor,onChange:e=>F(B.id,{backgroundColor:e.target.value}),className:"w-full h-10 rounded-md"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(p.J,{htmlFor:"shape-stroke",children:"枠線"}),(0,s.jsx)("input",{id:"shape-stroke",type:"color",value:B.borderColor,onChange:e=>F(B.id,{borderColor:e.target.value}),className:"w-full h-10 rounded-md"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(p.J,{htmlFor:"shape-stroke-width",children:["枠線の太さ (",B.borderWidth,"px)"]}),(0,s.jsx)(f.A,{id:"shape-stroke-width",min:0,max:20,step:1,value:[B.borderWidth||0],onValueChange:e=>F(B.id,{borderWidth:e[0]})})]})]})]})]})]});return(0,s.jsxs)("div",{className:"relative flex flex-col lg:flex-row lg:h-[calc(100vh-3.5rem)]",children:[(0,s.jsxs)("main",{className:"flex-1 overflow-y-auto",children:[(0,s.jsx)("div",{className:"p-4 pt-14 lg:p-6",children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{id:"thumbnail-preview",style:{aspectRatio:"custom"===G?"".concat(W.width," / ").concat(W.height):G.replace(":"," / ")},className:(0,j.cn)("w-full bg-card relative border rounded-md",{"simple-enhanced":"template-1"===L.id,"stylish-enhanced":"template-2"===L.id,"cute-enhanced":"template-3"===L.id,"cool-enhanced":"template-4"===L.id,"bg-gray-200":"template-5"===L.id}),children:["template-4"===L.id&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"digital-overlay"}),(0,s.jsx)("div",{className:"light-ray-1"}),(0,s.jsx)("div",{className:"light-ray-2"})]}),$.slice().reverse().map(e=>{let t=e.id===T,r=t&&!e.locked,i=t&&!e.locked;return e.visible?"image"===e.type?(0,s.jsx)(E,{id:e.id,isSelected:t,src:e.src||"",alt:e.name,x:e.x,y:e.y,width:e.width,height:e.height,rotation:e.rotation,onDragStop:(t,r)=>V(e.id,t,r),onResize:(t,r,s,i,a)=>Y(e.id,r,s,i,a),onResizeStop:(t,r,s,i,a)=>Y(e.id,r,s,i,a),lockAspectRatio:k,enableResizing:i,disableDragging:!r,onSelect:()=>X(e.id),isLocked:e.locked,isDraggable:r,onRotateStart:()=>{},onRotate:()=>{},onRotateStop:()=>{}},e.id):"text"===e.type?(0,s.jsx)(C,{id:e.id,isSelected:t,text:e.text||"",color:e.color||"#000000",fontSize:e.fontSize||"1rem",x:e.x,y:e.y,width:e.width,height:e.height,rotation:e.rotation,onDragStop:(t,r)=>V(e.id,t,r),onResizeStop:(t,r,s,i,a)=>Y(e.id,r,s,i,a),enableResizing:i,disableDragging:!r},e.id):"shape"===e.type&&e.shapeType?(0,s.jsx)(z,{id:e.id,isSelected:t,shapeType:e.shapeType,backgroundColor:e.backgroundColor||"#cccccc",borderColor:e.borderColor||"#000000",borderWidth:e.borderWidth||0,x:e.x,y:e.y,width:e.width,height:e.height,rotation:e.rotation,onDragStop:(t,r)=>V(e.id,t,r),onResize:(t,r,s,i,a)=>Y(e.id,r,s,i,a),onResizeStop:(t,r,s,i,a)=>Y(e.id,r,s,i,a),lockAspectRatio:k,enableResizing:i,disableDragging:!r},e.id):null:null})]}),(0,s.jsxs)("div",{className:"mt-4 flex justify-end",children:[(0,s.jsx)(l.$,{onClick:()=>J("normal"),children:"通常画質でダウンロード"}),(0,s.jsx)(l.$,{onClick:()=>J("high"),children:"高画質でダウンロード"}),(0,s.jsx)(l.$,{onClick:()=>J("super"),children:"最高画質でダウンロード"})]})]})}),(0,s.jsx)("div",{className:"lg:hidden",children:(0,s.jsxs)("div",{className:"p-4 space-y-6",children:[(0,s.jsx)(b.nD,{type:"single",collapsible:!0,className:"w-full",defaultValue:"tools",children:(0,s.jsxs)(b.As,{value:"tools",children:[(0,s.jsx)(b.$m,{className:"text-lg font-semibold",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(d.A,{className:"h-5 w-5"}),(0,s.jsx)("span",{children:"ツール"})]})}),(0,s.jsx)(b.ub,{className:"pt-4",children:q()})]})}),(0,s.jsx)("div",{children:(0,s.jsx)(_,{})})]})})]}),!S&&e&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 z-30",onClick:()=>t(!1)}),(0,s.jsx)("div",{className:"hidden lg:block",children:(0,s.jsxs)("aside",{className:(0,j.cn)("fixed top-0 right-0 h-[calc(100vh-3.5rem)] w-4/5 max-w-sm bg-background p-4 border-l z-40 flex flex-col overflow-y-auto","transition-transform duration-300 ease-in-out lg:static lg:w-96 lg:translate-x-0 lg:z-auto",e?"translate-x-0":"translate-x-full",S?e?"lg:block":"lg:hidden":""),children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold",children:"設定パネル"}),(0,s.jsx)(l.$,{variant:"ghost",size:"icon",onClick:()=>t(!1),"aria-label":"設定パネルを閉じる",children:(0,s.jsx)(o.A,{className:"h-5 w-5"})})]}),(0,s.jsxs)(g.tU,{value:r,onValueChange:N,className:"w-full flex flex-col flex-grow",children:[(0,s.jsxs)(g.j7,{className:"grid w-full grid-cols-3",children:[(0,s.jsx)(g.Xi,{value:"settings",children:"設定"}),(0,s.jsx)(g.Xi,{value:"tools",children:"ツール"}),(0,s.jsx)(g.Xi,{value:"layers",children:"レイヤー"})]}),(0,s.jsx)(g.av,{value:"settings",className:"mt-4 space-y-6 flex-grow overflow-y-auto overflow-x-hidden",children:(0,s.jsx)(y.A,{onSelectTemplate:A,selectedTemplateId:L.id})}),(0,s.jsx)(g.av,{value:"tools",className:"mt-4 flex-grow overflow-y-auto overflow-x-hidden",children:q()}),(0,s.jsx)(g.av,{value:"layers",className:"mt-4 space-y-6 flex-grow overflow-y-auto overflow-x-hidden",children:(0,s.jsx)(_,{})})]})]})}),(0,s.jsx)("div",{className:"lg:hidden",children:(0,s.jsxs)("aside",{className:(0,j.cn)("fixed top-0 right-0 h-full w-4/5 max-w-xs bg-background p-4 border-l z-40","transition-transform duration-300 ease-in-out",e?"translate-x-0":"translate-x-full"),children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold",children:"設定"}),(0,s.jsx)(l.$,{variant:"ghost",size:"icon",onClick:()=>t(!1),"aria-label":"設定パネルを閉じる",children:(0,s.jsx)(o.A,{className:"h-5 w-5"})})]}),(0,s.jsx)(y.A,{onSelectTemplate:A,selectedTemplateId:L.id})]})}),!S&&!e&&(0,s.jsx)(l.$,{variant:"ghost",size:"icon",className:"fixed top-18 right-4 z-30",onClick:()=>t(!0),"aria-label":"設定パネルを開く",children:(0,s.jsx)(c.A,{className:"h-5 w-5"})}),S&&!e&&(0,s.jsxs)("div",{className:"fixed top-1/2 right-0 -translate-y-1/2 z-30 flex flex-col bg-background border rounded-l-md",children:[(0,s.jsx)(l.$,{variant:"ghost",size:"icon",onClick:()=>t(!0),children:(0,s.jsx)(u.A,{className:"h-5 w-5"})}),(0,s.jsx)(l.$,{variant:"ghost",size:"icon",onClick:()=>{t(!0),N("settings")},children:(0,s.jsx)(c.A,{className:"h-5 w-5"})}),(0,s.jsx)(l.$,{variant:"ghost",size:"icon",onClick:()=>{t(!0),N("tools")},children:(0,s.jsx)(d.A,{className:"h-5 w-5"})}),(0,s.jsx)(l.$,{variant:"ghost",size:"icon",onClick:()=>{t(!0),N("layers")},children:(0,s.jsx)(h.A,{className:"h-5 w-5"})})]})]})}},8421:(e,t,r)=>{"use strict";r.d(t,{F:()=>l});var s=r(6166),i=r(5766),a=r(8187),n=r(6821);let l=i.forwardRef((e,t)=>{let{className:r,children:i,...l}=e;return(0,s.jsxs)(a.bL,{ref:t,className:(0,n.cn)("relative overflow-hidden",r),...l,children:[(0,s.jsx)(a.LM,{className:"h-full w-full rounded-[inherit]",children:i}),(0,s.jsx)(o,{}),(0,s.jsx)(a.OK,{})]})});l.displayName=a.bL.displayName;let o=i.forwardRef((e,t)=>{let{className:r,orientation:i="vertical",...l}=e;return(0,s.jsx)(a.VM,{ref:t,orientation:i,className:(0,n.cn)("flex touch-none select-none transition-colors","vertical"===i&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===i&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",r),...l,children:(0,s.jsx)(a.lr,{className:(0,n.cn)("relative flex-1 rounded-full bg-border")})})});o.displayName=a.VM.displayName},9885:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var s=r(6166),i=r(5766),a=r(6103),n=r(6821);let l=i.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,s.jsxs)(a.bL,{ref:t,className:(0,n.cn)("relative flex w-full touch-none select-none items-center",r),...i,children:[(0,s.jsx)(a.CC,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:(0,s.jsx)(a.Q6,{className:"absolute h-full bg-primary"})}),(0,s.jsx)(a.zi,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]})});l.displayName=a.bL.displayName}},e=>{e.O(0,[5922,1069,6468,5315,9227,3692,6813,1199,705,4544,3134,7358],()=>e(e.s=318)),_N_E=e.O()}]);