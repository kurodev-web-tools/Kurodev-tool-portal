(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1064],{318:(e,t,r)=>{Promise.resolve().then(r.bind(r,7054))},2392:(e,t,r)=>{"use strict";r.d(t,{U:()=>n});var s=r(5766);function n(e){let[t,r]=s.useState(!1);return s.useEffect(()=>{function t(e){r(e.matches)}let s=window.matchMedia(e);return s.addEventListener("change",t),r(s.matches),()=>s.removeEventListener("change",t)},[e]),t}},4139:(e,t,r)=>{"use strict";r.d(t,{T:()=>a});var s=r(6166),n=r(5766),i=r(6821);let a=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...n})});a.displayName="Textarea"},6614:(e,t,r)=>{"use strict";r.d(t,{$:()=>o,r:()=>l});var s=r(6166);r(5766);var n=r(1205),i=r(4911),a=r(6821);let l=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function o(e){let{className:t,variant:r,size:i,asChild:o=!1,...d}=e,c=o?n.DX:"button";return(0,s.jsx)(c,{"data-slot":"button",className:(0,a.cn)(l({variant:r,size:i,className:t})),...d})}},7054:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>X});var s=r(6166),n=r(5766),i=r(2789),a=r(9227),l=r(6614),o=r(6179),d=r(2391),c=r(6423),h=r(1021),u=r(508),x=r(4038),g=r(2392),m=r(4139),f=r(9885),v=r(388),p=r(9534),b=r(8448),w=r(6821),j=r(3202),y=r(5742),N=r(2811),k=r(542);let E=n.memo(e=>{let{id:t,isSelected:r,text:i,color:a="white",fontSize:l="2rem",className:o,x:d,y:c,width:h,height:u,rotation:x,zIndex:g,onDragStop:m,onResizeStop:f,enableResizing:v,disableDragging:p}=e,{updateLayer:b}=(0,j.S)(),[y,E]=(0,n.useState)({x:d,y:c}),[z,C]=(0,n.useState)(!1),S=(0,n.useRef)(null),R=(0,n.useRef)(null);(0,n.useEffect)(()=>{E({x:d,y:c})},[d,c]);let L=(0,n.useCallback)(e=>{var r;e.preventDefault(),e.stopPropagation(),C(!0);let s=null==(r=S.current)?void 0:r.getSelfElement();if(!s)return;let n=s.parentElement;if(!n)return;let i=n.getBoundingClientRect(),a=i.left+y.x+h/2,l=i.top+y.y+u/2,o=e=>{if(0===e.touches.length)return;let r=e.touches[0].clientX-a;b(t,{rotation:180/Math.PI*Math.atan2(e.touches[0].clientY-l,r)+90})},d=()=>{C(!1),window.removeEventListener("touchmove",o),window.removeEventListener("touchend",d)};window.addEventListener("touchmove",o),window.addEventListener("touchend",d)},[t,b,y.x,y.y,h,u]);return(0,n.useEffect)(()=>{let e=R.current;if(e)return e.addEventListener("touchstart",L,{passive:!1}),()=>{e.removeEventListener("touchstart",L)}},[L]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(N.p,{ref:S,size:{width:h,height:u},position:y,onDragStart:()=>{if(z)return!1},onDrag:(e,t)=>{z||E({x:t.x,y:t.y})},onDragStop:m,onResizeStop:f,minWidth:50,minHeight:20,enableResizing:v,disableDragging:p||z,className:"border border-dashed border-transparent hover:border-gray-500 transition-colors duration-200",style:{display:"flex",alignItems:"center",justifyContent:"center",zIndex:g},children:(0,s.jsx)("div",{className:"w-full h-full flex items-center justify-center",style:{transform:"rotate(".concat(x,"deg)"),transformOrigin:"center"},children:(0,s.jsx)("p",{className:(0,w.cn)("cursor-move",o),style:{color:a,fontSize:l,lineHeight:1,whiteSpace:"pre-wrap"},children:i})})}),r&&(0,s.jsx)("div",{ref:R,onMouseDown:e=>{var r;e.preventDefault(),e.stopPropagation(),C(!0);let s=null==(r=S.current)?void 0:r.getSelfElement();if(!s)return;let n=s.parentElement;if(!n)return;let i=n.getBoundingClientRect(),a=i.left+y.x+h/2,l=i.top+y.y+u/2,o=e=>{let r=e.clientX-a;b(t,{rotation:180/Math.PI*Math.atan2(e.clientY-l,r)+90})},d=()=>{C(!1),window.removeEventListener("mousemove",o),window.removeEventListener("mouseup",d)};window.addEventListener("mousemove",o),window.addEventListener("mouseup",d)},className:"absolute cursor-grab active:cursor-grabbing bg-white border rounded-full p-1 shadow z-50",style:{left:y.x+h/2,top:y.y-30,transform:"translateX(-50%)"},children:(0,s.jsx)(k.A,{className:"h-4 w-4"})})]})}),z=n.memo(e=>{let{id:t,isSelected:r,src:i,alt:a,x:l,y:o,width:d,height:c,rotation:h,onDragStop:u,onResize:x,onResizeStop:g,onSelect:m,isLocked:f,isDraggable:v,lockAspectRatio:p,enableResizing:b,disableDragging:y,onRotateStart:E,onRotate:z,onRotateStop:C,isBackground:S,zIndex:R}=e,{updateLayer:L}=(0,j.S)(),[D,A]=(0,n.useState)({x:l,y:o}),[$,P]=(0,n.useState)(!1),M=(0,n.useRef)(null),I=(0,n.useRef)(null);(0,n.useEffect)(()=>{A({x:l,y:o})},[l,o]);let F=(0,n.useCallback)(e=>{var r;e.preventDefault(),e.stopPropagation(),P(!0);let s=null==(r=M.current)?void 0:r.getSelfElement();if(!s)return;let n=s.parentElement;if(!n)return;let i=n.getBoundingClientRect(),a=i.left+D.x+d/2,l=i.top+D.y+c/2,o=e=>{if(0===e.touches.length)return;let r=e.touches[0].clientX-a;L(t,{rotation:180/Math.PI*Math.atan2(e.touches[0].clientY-l,r)+90})},h=()=>{P(!1),window.removeEventListener("touchmove",o),window.removeEventListener("touchend",h)};window.addEventListener("touchmove",o),window.addEventListener("touchend",h)},[t,L,D.x,D.y,d,c]);return(0,n.useEffect)(()=>{let e=I.current;if(e)return e.addEventListener("touchstart",F,{passive:!1}),()=>{e.removeEventListener("touchstart",F)}},[F]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(N.p,{ref:M,size:S?{width:"100%",height:"100%"}:{width:d,height:c},position:S?{x:0,y:0}:D,onDragStart:()=>{if($||S)return!1},onDrag:(e,t)=>{$||S||A({x:t.x,y:t.y})},onDragStop:u,onResize:x,onResizeStop:g,lockAspectRatio:p,enableResizing:!S&&b,disableDragging:S||y||$,className:(0,w.cn)("border border-dashed border-transparent transition-colors duration-200",{"hover:border-gray-500":!S&&r}),onClick:m,style:{zIndex:R},children:(0,s.jsx)("div",{style:{width:"100%",height:"100%",transform:"rotate(".concat(h,"deg)"),transformOrigin:"center"},children:(0,s.jsx)("div",{style:{width:"100%",height:"100%",backgroundImage:i?"url(".concat(i,")"):"none",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"}})})}),r&&!f&&!S&&(0,s.jsx)("div",{ref:I,onMouseDown:e=>{var r;e.preventDefault(),e.stopPropagation(),P(!0);let s=null==(r=M.current)?void 0:r.getSelfElement();if(!s)return;let n=s.parentElement;if(!n)return;let i=n.getBoundingClientRect(),a=i.left+D.x+d/2,l=i.top+D.y+c/2,o=e=>{let r=e.clientX-a;L(t,{rotation:180/Math.PI*Math.atan2(e.clientY-l,r)+90})},h=()=>{P(!1),window.removeEventListener("mousemove",o),window.removeEventListener("mouseup",h)};window.addEventListener("mousemove",o),window.addEventListener("mouseup",h)},className:"absolute cursor-grab active:cursor-grabbing bg-white border rounded-full p-1 shadow z-50",style:{left:D.x+d/2,top:D.y-30,transform:"translateX(-50%)"},children:(0,s.jsx)(k.A,{className:"h-4 w-4"})})]})}),C=e=>{let{id:t,isSelected:r,shapeType:i,backgroundColor:a,borderColor:l,borderWidth:o,rotation:d,zIndex:c,onDragStop:h,onResize:u,onResizeStop:x,lockAspectRatio:g,enableResizing:m,disableDragging:f,x:v,y:p,width:b,height:w}=e,{updateLayer:y}=(0,j.S)(),[E,z]=(0,n.useState)({x:v||0,y:p||0}),[C,S]=(0,n.useState)(!1),R=(0,n.useRef)(null),L=(0,n.useRef)(null);(0,n.useEffect)(()=>{z({x:v||0,y:p||0})},[v,p]);let D=(0,n.useCallback)(e=>{var r;e.preventDefault(),e.stopPropagation(),S(!0);let s=null==(r=R.current)?void 0:r.getSelfElement();if(!s)return;let n=s.parentElement;if(!n)return;let i=n.getBoundingClientRect(),a=i.left+E.x+b/2,l=i.top+E.y+w/2,o=e=>{if(0===e.touches.length)return;let r=e.touches[0].clientX-a;y(t,{rotation:180/Math.PI*Math.atan2(e.touches[0].clientY-l,r)+90})},d=()=>{S(!1),window.removeEventListener("touchmove",o),window.removeEventListener("touchend",d)};window.addEventListener("touchmove",o),window.addEventListener("touchend",d)},[t,y,E.x,E.y,b,w]);return(0,n.useEffect)(()=>{let e=L.current;if(e)return e.addEventListener("touchstart",D,{passive:!1}),()=>{e.removeEventListener("touchstart",D)}},[D]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(N.p,{ref:R,size:{width:b,height:w},position:E,onDragStart:()=>{if(C)return!1},onDrag:(e,t)=>{C||z({x:t.x,y:t.y})},onDragStop:h,onResize:u,onResizeStop:x,lockAspectRatio:g,enableResizing:m,disableDragging:f||C,className:"border border-dashed border-transparent hover:border-gray-500 transition-colors duration-200",style:{zIndex:c},children:(0,s.jsx)("div",{style:{width:"100%",height:"100%",transform:"rotate(".concat(d,"deg)"),transformOrigin:"center"},children:(()=>{let e={width:"100%",height:"100%",style:{overflow:"visible"}};switch(i){case"line":return(0,s.jsx)("svg",{...e,children:(0,s.jsx)("line",{x1:0,y1:w/2,x2:b,y2:w/2,stroke:l,strokeWidth:o})});case"arrow":return(0,s.jsxs)("svg",{...e,children:[(0,s.jsx)("defs",{children:(0,s.jsx)("marker",{id:"arrowhead-".concat(t),markerWidth:"10",markerHeight:"7",refX:"10",refY:"3.5",orient:"auto",fill:l,children:(0,s.jsx)("polygon",{points:"0 0, 10 3.5, 0 7"})})}),(0,s.jsx)("line",{x1:0,y1:w/2,x2:b-10,y2:w/2,stroke:l,strokeWidth:o,markerEnd:"url(#arrowhead-".concat(t,")")})]});default:return(0,s.jsx)("div",{style:{width:"100%",height:"100%",backgroundColor:a,border:"".concat(o,"px solid ").concat(l),borderRadius:"circle"===i?"50%":"0"}})}})()})}),r&&(0,s.jsx)("div",{ref:L,onMouseDown:e=>{var r;e.preventDefault(),e.stopPropagation(),S(!0);let s=null==(r=R.current)?void 0:r.getSelfElement();if(!s)return;let n=s.parentElement;if(!n)return;let i=n.getBoundingClientRect(),a=i.left+E.x+b/2,l=i.top+E.y+w/2,o=e=>{let r=e.clientX-a;y(t,{rotation:180/Math.PI*Math.atan2(e.clientY-l,r)+90})},d=()=>{S(!1),window.removeEventListener("mousemove",o),window.removeEventListener("mouseup",d)};window.addEventListener("mousemove",o),window.addEventListener("mouseup",d)},className:"absolute cursor-grab active:cursor-grabbing bg-white border rounded-full p-1 shadow z-50",style:{left:E.x+b/2,top:E.y-30,transform:"translateX(-50%)"},children:(0,s.jsx)(k.A,{className:"h-4 w-4"})})]})};var S=r(7347),R=r(4654),L=r(4431),D=r(3191),A=r(8647),$=r(7727),P=r(8421),M=r(189);let I=()=>{let{layers:e,updateLayer:t,removeLayer:r,selectedLayerId:n,setSelectedLayerId:i,reorderLayers:a,duplicateLayer:o,moveLayerUp:d,moveLayerDown:c}=(0,j.S)();return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold",children:"レイヤー"}),(0,s.jsx)(P.F,{className:"h-[calc(100vh-250px)] w-full rounded-md border p-4",children:0===e.length?(0,s.jsx)("p",{className:"text-muted-foreground",children:"レイヤーがありません。"}):(0,s.jsx)(M.JY,{onDragEnd:e=>{e.destination&&a(e.source.index,e.destination.index)},children:(0,s.jsx)(M.gL,{droppableId:"layers",children:a=>(0,s.jsxs)("div",{...a.droppableProps,ref:a.innerRef,className:"space-y-2",children:[e.map((a,h)=>(0,s.jsx)(M.sx,{draggableId:a.id,index:h,children:(u,x)=>(0,s.jsxs)("div",{ref:u.innerRef,...u.draggableProps,...u.dragHandleProps,className:"flex items-center justify-between p-2 rounded-md border ".concat(n===a.id?"bg-accent":"bg-card"," ").concat(x.isDragging?"shadow-lg opacity-90 bg-blue-100":""),onClick:()=>i(a.id),children:[(0,s.jsx)("div",{className:"flex items-center space-x-2",children:(0,s.jsx)("span",{className:"text-sm font-medium truncate w-24",children:a.name})}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(l.$,{variant:"ghost",size:"icon",onClick:e=>{e.stopPropagation(),d(a.id)},disabled:0===h,children:(0,s.jsx)(S.A,{className:"h-4 w-4"})}),(0,s.jsx)(l.$,{variant:"ghost",size:"icon",onClick:e=>{e.stopPropagation(),c(a.id)},disabled:h===e.length-1,children:(0,s.jsx)(R.A,{className:"h-4 w-4"})}),(0,s.jsx)(l.$,{variant:"ghost",size:"icon",onClick:r=>{r.stopPropagation(),(r=>{var s;t(r,{visible:!(null==(s=e.find(e=>e.id===r))?void 0:s.visible)})})(a.id)},children:a.visible?(0,s.jsx)(L.A,{className:"h-4 w-4"}):(0,s.jsx)(D.A,{className:"h-4 w-4"})}),(0,s.jsx)(l.$,{variant:"ghost",size:"icon",onClick:e=>{e.stopPropagation(),o(a.id)},children:(0,s.jsx)(A.A,{className:"h-4 w-4"})}),(0,s.jsx)(l.$,{variant:"ghost",size:"icon",onClick:e=>{e.stopPropagation(),r(a.id)},children:(0,s.jsx)($.A,{className:"h-4 w-4 text-red-500"})})]})]})},a.id)),a.placeholder]})})})})]})},F=["image/jpeg","image/jpg","image/png","image/webp"];function X(){let[e,t]=n.useState(!1),[r,N]=n.useState("settings"),[k,S]=n.useState(!1),R=(0,g.U)("(min-width: 1024px)"),{selectedTemplate:L,setSelectedTemplate:D,currentText:A,setCurrentText:$,layers:P,addLayer:M,updateLayer:X,selectedLayerId:B,setSelectedLayerId:W,aspectRatio:T,customAspectRatio:_}=(0,j.S)(),J=P.find(e=>e.id===B);n.useEffect(()=>{let e=e=>{"Shift"===e.key&&S(!0)},t=e=>{"Shift"===e.key&&S(!1)};return window.addEventListener("keydown",e),window.addEventListener("keyup",t),()=>{window.removeEventListener("keydown",e),window.removeEventListener("keyup",t)}},[]),n.useEffect(()=>{R?t(!0):t(!1)},[R]);let V=n.useCallback(async e=>{let t=document.getElementById("download-target");if(t)try{let r;switch(e){case"normal":default:r=720;break;case"high":r=1080;break;case"super":r=2160}let s=16/9;if("custom"===T)_.width>0&&_.height>0&&(s=_.width/_.height);else{let[e,t]=T.split(":").map(Number);e>0&&t>0&&(s=e/t)}let n=Math.round(r*s),a=r,l=await (0,i.$E)(t,{cacheBust:!0,width:n,height:a}),o=document.createElement("a");o.download="creative_".concat(e,".png"),o.href=l,o.click()}catch(e){console.error("画像の生成に失敗しました",e),a.oR.error("画像の生成に失敗しました",{description:"時間をおいて再度お試しいただくか、別の画像でお試しください。"})}},[T,_]),Y=n.useCallback((e,t,r)=>{X(e,{x:r.x,y:r.y})},[X]),O=n.useCallback((e,t,r,s,n)=>{X(e,{width:r.offsetWidth,height:r.offsetHeight,x:n.x,y:n.y})},[X]),H=e=>{let t=e.target.files;if(t){for(let e of Array.from(t)){if(e.size>0xa00000){a.oR.error("ファイルサイズが大きすぎます: ".concat(e.name),{description:"10MB以下のファイルを選択してください。"});continue}if(!F.includes(e.type)){a.oR.error("ファイル形式が無効です: ".concat(e.name),{description:"JPEG, PNG, WEBP形式の画像ファイルを選択してください。"});continue}let t=URL.createObjectURL(e);M({type:"image",name:e.name,visible:!0,locked:!1,x:R?550:50,y:R?250:50,width:R?300:150,height:R?300:150,src:t})}e.target.value=""}},U=e=>{let t=P.filter(e=>"shape"===e.type).length*(R?20:5),r=P.filter(t=>t.shapeType===e).length+1,s="",n=R?550:10,i=R?250:10,a=R?300:50,l=R?300:50,o=R?2:1,d=R?300:100,c=R?5:3;switch(e){case"rectangle":s="四角 ".concat(r);break;case"circle":s="円 ".concat(r);break;case"line":s="線 ".concat(r);break;case"arrow":s="矢印 ".concat(r)}M({type:"shape",shapeType:e,name:s,visible:!0,locked:!1,x:n+t,y:i+t,width:"line"===e||"arrow"===e?d:a,height:"line"===e||"arrow"===e?c:l,backgroundColor:"#cccccc",borderColor:"#000000",borderWidth:o})},G=()=>{M({type:"text",name:"テキスト ".concat(P.filter(e=>"text"===e.type).length+1),visible:!0,locked:!1,x:R?550:50,y:R?250:50,width:R?300:150,height:R?100:50,text:A,color:"#000000",fontSize:R?"2rem":"1rem"})};if(!L)return(0,s.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,s.jsx)("p",{children:"テンプレートを読み込み中..."})});let K=()=>(0,s.jsxs)(b.nD,{type:"multiple",className:"w-full",defaultValue:["text"],children:[(0,s.jsxs)(b.As,{value:"text",children:[(0,s.jsx)(b.$m,{children:"テキスト"}),(0,s.jsxs)(b.ub,{className:"space-y-4 pt-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(v.J,{htmlFor:"thumbnail-text",children:"テキスト内容"}),(0,s.jsx)(m.T,{id:"thumbnail-text",value:A,onChange:e=>$(e.target.value),className:"h-24"})]}),(0,s.jsx)("div",{className:"pt-4",children:(0,s.jsx)(l.$,{variant:"outline",className:"w-full",onClick:G,children:"テキストを追加"})})]})]}),(0,s.jsxs)(b.As,{value:"images",children:[(0,s.jsx)(b.$m,{children:"画像"}),(0,s.jsx)(b.ub,{className:"space-y-4 pt-4",children:(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(v.J,{htmlFor:"add-images",children:"画像を追加"}),(0,s.jsx)(p.p,{id:"add-images",type:"file",accept:"image/*",multiple:!0,onChange:H})]})})]}),(0,s.jsxs)(b.As,{value:"shapes",children:[(0,s.jsx)(b.$m,{children:"図形"}),(0,s.jsx)(b.ub,{className:"space-y-4 pt-4",children:(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,s.jsx)(l.$,{variant:"outline",onClick:()=>U("rectangle"),children:"四角を追加"}),(0,s.jsx)(l.$,{variant:"outline",onClick:()=>U("circle"),children:"円を追加"}),(0,s.jsx)(l.$,{variant:"outline",onClick:()=>U("line"),children:"線を追加"}),(0,s.jsx)(l.$,{variant:"outline",onClick:()=>U("arrow"),children:"矢印を追加"})]})})]}),(0,s.jsxs)(b.As,{value:"style",children:[(0,s.jsx)(b.$m,{children:"スタイル"}),(0,s.jsxs)(b.ub,{className:"space-y-4 pt-4",children:[!J&&(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"レイヤーを選択してください"}),(null==J?void 0:J.type)==="text"&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(v.J,{htmlFor:"text-color",children:"テキストカラー"}),(0,s.jsx)("input",{id:"text-color",type:"color",value:J.color,onChange:e=>X(J.id,{color:e.target.value}),className:"w-full h-10 rounded-md"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(v.J,{htmlFor:"font-size",children:["フォントサイズ (",J.fontSize,")"]}),(0,s.jsx)(f.A,{id:"font-size",min:1,max:8,step:.1,value:[parseFloat(J.fontSize||"1")],onValueChange:e=>X(J.id,{fontSize:"".concat(e[0],"rem")})})]})]}),(null==J?void 0:J.type)==="shape"&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(v.J,{htmlFor:"shape-fill",children:"塗りつぶし"}),(0,s.jsx)("input",{id:"shape-fill",type:"color",value:J.backgroundColor,onChange:e=>X(J.id,{backgroundColor:e.target.value}),className:"w-full h-10 rounded-md"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(v.J,{htmlFor:"shape-stroke",children:"枠線"}),(0,s.jsx)("input",{id:"shape-stroke",type:"color",value:J.borderColor,onChange:e=>X(J.id,{borderColor:e.target.value}),className:"w-full h-10 rounded-md"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(v.J,{htmlFor:"shape-stroke-width",children:["枠線の太さ (",J.borderWidth,"px)"]}),(0,s.jsx)(f.A,{id:"shape-stroke-width",min:0,max:20,step:1,value:[J.borderWidth||0],onValueChange:e=>X(J.id,{borderWidth:e[0]})})]})]})]})]})]});return(0,s.jsxs)("div",{className:"relative flex flex-col lg:flex-row lg:h-[calc(100vh-3.5rem)]",children:[(0,s.jsxs)("main",{className:"flex-1 overflow-y-auto",children:[(0,s.jsx)("div",{className:"p-4 pt-14 lg:p-6",children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{id:"thumbnail-preview",style:{aspectRatio:"custom"===T?"".concat(_.width," / ").concat(_.height):T.replace(":"," / ")},className:"w-full bg-card relative border rounded-md",children:(0,s.jsx)("div",{id:"download-target",className:"w-full h-full relative overflow-hidden",children:P.map(e=>{let t=e.id===B,r=t&&!e.locked,n=t&&!e.locked;return e.visible?"image"===e.type?(0,s.jsx)(z,{id:e.id,isSelected:t,src:e.src||"",alt:e.name,x:e.x,y:e.y,width:e.width,height:e.height,rotation:e.rotation,onDragStop:(t,r)=>Y(e.id,t,r),onResize:(t,r,s,n,i)=>O(e.id,r,s,n,i),onResizeStop:(t,r,s,n,i)=>O(e.id,r,s,n,i),lockAspectRatio:k,enableResizing:n,disableDragging:!r,onSelect:()=>W(e.id),isLocked:e.locked,isDraggable:r,onRotateStart:()=>{},onRotate:()=>{},onRotateStop:()=>{},isBackground:e.isBackground,zIndex:e.zIndex},e.id):"text"===e.type?(0,s.jsx)(E,{id:e.id,isSelected:t,text:e.text||"",color:e.color||"#000000",fontSize:e.fontSize||"1rem",x:e.x,y:e.y,width:e.width,height:e.height,rotation:e.rotation,onDragStop:(t,r)=>Y(e.id,t,r),onResizeStop:(t,r,s,n,i)=>O(e.id,r,s,n,i),enableResizing:n,disableDragging:!r,zIndex:e.zIndex},e.id):"shape"===e.type&&e.shapeType?(0,s.jsx)(C,{id:e.id,isSelected:t,shapeType:e.shapeType,backgroundColor:e.backgroundColor||"#cccccc",borderColor:e.borderColor||"#000000",borderWidth:e.borderWidth||0,x:e.x,y:e.y,width:e.width,height:e.height,rotation:e.rotation,onDragStop:(t,r)=>Y(e.id,t,r),onResize:(t,r,s,n,i)=>O(e.id,r,s,n,i),onResizeStop:(t,r,s,n,i)=>O(e.id,r,s,n,i),lockAspectRatio:k,enableResizing:n,disableDragging:!r,zIndex:e.zIndex},e.id):null:null})})}),(0,s.jsxs)("div",{className:"mt-4 flex justify-end",children:[(0,s.jsx)(l.$,{onClick:()=>V("normal"),children:"通常画質でダウンロード"}),(0,s.jsx)(l.$,{onClick:()=>V("high"),children:"高画質でダウンロード"}),(0,s.jsx)(l.$,{onClick:()=>V("super"),children:"最高画質でダウンロード"})]})]})}),(0,s.jsx)("div",{className:"lg:hidden",children:(0,s.jsxs)("div",{className:"p-4 space-y-6",children:[(0,s.jsx)(b.nD,{type:"single",collapsible:!0,className:"w-full",defaultValue:"tools",children:(0,s.jsxs)(b.As,{value:"tools",children:[(0,s.jsx)(b.$m,{className:"text-lg font-semibold",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(d.A,{className:"h-5 w-5"}),(0,s.jsx)("span",{children:"ツール"})]})}),(0,s.jsx)(b.ub,{className:"pt-4",children:K()})]})}),(0,s.jsx)("div",{children:(0,s.jsx)(I,{})})]})})]}),!R&&e&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 z-30",onClick:()=>t(!1)}),(0,s.jsx)("div",{className:"hidden lg:block",children:(0,s.jsxs)("aside",{className:(0,w.cn)("fixed top-0 right-0 h-[calc(100vh-3.5rem)] w-4/5 max-w-sm bg-background p-4 border-l z-40 flex flex-col overflow-y-auto","transition-transform duration-300 ease-in-out lg:static lg:w-96 lg:translate-x-0 lg:z-auto",e?"translate-x-0":"translate-x-full",R?e?"lg:block":"lg:hidden":""),children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold",children:"設定パネル"}),(0,s.jsx)(l.$,{variant:"ghost",size:"icon",onClick:()=>t(!1),"aria-label":"設定パネルを閉じる",children:(0,s.jsx)(o.A,{className:"h-5 w-5"})})]}),(0,s.jsxs)(x.tU,{value:r,onValueChange:N,className:"w-full flex flex-col flex-grow",children:[(0,s.jsxs)(x.j7,{className:"grid w-full grid-cols-3",children:[(0,s.jsx)(x.Xi,{value:"settings",children:"設定"}),(0,s.jsx)(x.Xi,{value:"tools",children:"ツール"}),(0,s.jsx)(x.Xi,{value:"layers",children:"レイヤー"})]}),(0,s.jsx)(x.av,{value:"settings",className:"mt-4 space-y-6 flex-grow overflow-y-auto overflow-x-hidden",children:(0,s.jsx)(y.A,{onSelectTemplate:D,selectedTemplateId:L.id})}),(0,s.jsx)(x.av,{value:"tools",className:"mt-4 flex-grow overflow-y-auto overflow-x-hidden",children:K()}),(0,s.jsx)(x.av,{value:"layers",className:"mt-4 space-y-6 flex-grow overflow-y-auto overflow-x-hidden",children:(0,s.jsx)(I,{})})]})]})}),(0,s.jsx)("div",{className:"lg:hidden",children:(0,s.jsxs)("aside",{className:(0,w.cn)("fixed top-0 right-0 h-full w-4/5 max-w-xs bg-background p-4 border-l z-40","transition-transform duration-300 ease-in-out",e?"translate-x-0":"translate-x-full"),children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold",children:"設定"}),(0,s.jsx)(l.$,{variant:"ghost",size:"icon",onClick:()=>t(!1),"aria-label":"設定パネルを閉じる",children:(0,s.jsx)(o.A,{className:"h-5 w-5"})})]}),(0,s.jsx)(y.A,{onSelectTemplate:D,selectedTemplateId:L.id})]})}),!R&&!e&&(0,s.jsx)(l.$,{variant:"ghost",size:"icon",className:"fixed top-18 right-4 z-30",onClick:()=>t(!0),"aria-label":"設定パネルを開く",children:(0,s.jsx)(c.A,{className:"h-5 w-5"})}),R&&!e&&(0,s.jsxs)("div",{className:"fixed top-1/2 right-0 -translate-y-1/2 z-30 flex flex-col bg-background border rounded-l-md",children:[(0,s.jsx)(l.$,{variant:"ghost",size:"icon",onClick:()=>t(!0),children:(0,s.jsx)(h.A,{className:"h-5 w-5"})}),(0,s.jsx)(l.$,{variant:"ghost",size:"icon",onClick:()=>{t(!0),N("settings")},children:(0,s.jsx)(c.A,{className:"h-5 w-5"})}),(0,s.jsx)(l.$,{variant:"ghost",size:"icon",onClick:()=>{t(!0),N("tools")},children:(0,s.jsx)(d.A,{className:"h-5 w-5"})}),(0,s.jsx)(l.$,{variant:"ghost",size:"icon",onClick:()=>{t(!0),N("layers")},children:(0,s.jsx)(u.A,{className:"h-5 w-5"})})]})]})}},8421:(e,t,r)=>{"use strict";r.d(t,{F:()=>l});var s=r(6166),n=r(5766),i=r(8187),a=r(6821);let l=n.forwardRef((e,t)=>{let{className:r,children:n,...l}=e;return(0,s.jsxs)(i.bL,{ref:t,className:(0,a.cn)("relative overflow-hidden",r),...l,children:[(0,s.jsx)(i.LM,{className:"h-full w-full rounded-[inherit]",children:n}),(0,s.jsx)(o,{}),(0,s.jsx)(i.OK,{})]})});l.displayName=i.bL.displayName;let o=n.forwardRef((e,t)=>{let{className:r,orientation:n="vertical",...l}=e;return(0,s.jsx)(i.VM,{ref:t,orientation:n,className:(0,a.cn)("flex touch-none select-none transition-colors","vertical"===n&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===n&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",r),...l,children:(0,s.jsx)(i.lr,{className:(0,a.cn)("relative flex-1 rounded-full bg-border")})})});o.displayName=i.VM.displayName},9885:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var s=r(6166),n=r(5766),i=r(6103),a=r(6821);let l=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsxs)(i.bL,{ref:t,className:(0,a.cn)("relative flex w-full touch-none select-none items-center",r),...n,children:[(0,s.jsx)(i.CC,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:(0,s.jsx)(i.Q6,{className:"absolute h-full bg-primary"})}),(0,s.jsx)(i.zi,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]})});l.displayName=i.bL.displayName}},e=>{e.O(0,[5922,1069,6468,5315,9227,3692,6813,1199,6397,705,4544,3134,7358],()=>e(e.s=318)),_N_E=e.O()}]);