(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7931],{400:(e,t,i)=>{"use strict";let n;i.d(t,{A:()=>a});let r={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)},o=new Uint8Array(16),l=[];for(let e=0;e<256;++e)l.push((e+256).toString(16).slice(1));let a=function(e,t,i){if(r.randomUUID&&!t&&!e)return r.randomUUID();var a=e,d=i;let u=(a=a||{}).random??a.rng?.()??function(){if(!n){if("undefined"==typeof crypto||!crypto.getRandomValues)throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");n=crypto.getRandomValues.bind(crypto)}return n(o)}();if(u.length<16)throw Error("Random bytes length must be >= 16");if(u[6]=15&u[6]|64,u[8]=63&u[8]|128,t){if((d=d||0)<0||d+16>t.length)throw RangeError(`UUID byte range ${d}:${d+15} is out of buffer bounds`);for(let e=0;e<16;++e)t[d+e]=u[e];return t}return function(e,t=0){return(l[e[t+0]]+l[e[t+1]]+l[e[t+2]]+l[e[t+3]]+"-"+l[e[t+4]]+l[e[t+5]]+"-"+l[e[t+6]]+l[e[t+7]]+"-"+l[e[t+8]]+l[e[t+9]]+"-"+l[e[t+10]]+l[e[t+11]]+l[e[t+12]]+l[e[t+13]]+l[e[t+14]]+l[e[t+15]]).toLowerCase()}(u)}},1549:(e,t,i)=>{"use strict";i.d(t,{K:()=>n});let n=async()=>{try{try{let e=await i.e(7860).then(i.t.bind(i,7860,19));return console.log("Loaded ".concat(e.templates.length," templates from generated JSON file")),e.templates}catch(e){return console.warn("Could not load templates from JSON file:",e),[]}}catch(e){throw console.error("Failed to load templates:",e),Error("Failed to load templates.")}}},2714:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i(6166);i(5766);var r=i(3202);function o(e){let{children:t}=e;return(0,n.jsx)(r.U,{children:t})}},3202:(e,t,i)=>{"use strict";i.d(t,{S:()=>u,U:()=>d});var n=i(6166),r=i(5766),o=i(1549),l=i(400);let a=(0,r.createContext)(null),d=e=>{let{children:t}=e,[i,d]=(0,r.useState)(null),[u,s]=(0,r.useState)(""),[c,h]=(0,r.useState)("16:9"),[m,p]=(0,r.useState)({width:16,height:9}),[f,y]=(0,r.useState)([]),[x,g]=(0,r.useState)(null);(0,r.useEffect)(()=>{(async()=>{let e=await (0,o.K)();e.length>0&&(d(e[0]),s(e[0].initialText))})()},[]);let v=(e,t)=>{y(i=>{let n=Array.from(i),[r]=n.splice(e,1);return n.splice(t,0,r),n.map((e,t)=>({...e,zIndex:t}))})};return(0,r.useEffect)(()=>{var e,t,n,r,o;let a=[];if(!i){y([]),g(null);return}i.initialImageSrc&&a.push({id:"background-image",type:"image",name:"背景画像",visible:!0,locked:!1,x:0,y:0,width:"100%",height:"100%",rotation:0,src:i.initialImageSrc,zIndex:0,isBackground:!0}),i.initialText&&a.push({id:(0,l.A)(),type:"text",name:"テキスト",visible:!0,locked:!1,x:(null==(t=i.initialTextPosition)?void 0:t.x)||50,y:(null==(n=i.initialTextPosition)?void 0:n.y)||50,width:(null==(r=i.initialTextPosition)?void 0:r.width)||300,height:(null==(o=i.initialTextPosition)?void 0:o.height)||100,rotation:0,text:i.initialText,color:i.initialTextColor,fontSize:i.initialFontSize,zIndex:1}),y(a),g(a.length>1?a[1].id:(null==(e=a[0])?void 0:e.id)||null)},[i]),(0,n.jsx)(a.Provider,{value:{selectedTemplate:i,setSelectedTemplate:d,currentText:u,setCurrentText:s,layers:f,setLayers:y,addLayer:e=>{let t=f.reduce((e,t)=>Math.max(e,t.zIndex),-1),i={...e,id:(0,l.A)(),rotation:0,zIndex:t+1};y(e=>[...e,i]),g(i.id)},removeLayer:e=>{y(t=>t.filter(t=>t.id!==e)),x===e&&g(null)},updateLayer:(e,t)=>{y(i=>i.map(i=>i.id===e?{...i,...t}:i))},selectedLayerId:x,setSelectedLayerId:g,reorderLayers:v,duplicateLayer:e=>{let t=f.find(t=>t.id===e);if(!t)return;let i={...t,id:(0,l.A)(),name:"".concat(t.name,"のコピー"),x:t.x+20,y:t.y+20,zIndex:f.length},n=f.findIndex(t=>t.id===e),r=[...f];r.splice(n+1,0,i),y(r.map((e,t)=>({...e,zIndex:t})))},moveLayerUp:e=>{let t=f.findIndex(t=>t.id===e);t>0&&v(t,t-1)},moveLayerDown:e=>{let t=f.findIndex(t=>t.id===e);t<f.length-1&&-1!==t&&v(t,t+1)},aspectRatio:c,setAspectRatio:h,customAspectRatio:m,setCustomAspectRatio:p},children:t})},u=()=>{let e=(0,r.useContext)(a);if(!e)throw Error("useTemplate must be used within a TemplateProvider");return e}},3864:(e,t,i)=>{Promise.resolve().then(i.bind(i,2714))}},e=>{e.O(0,[4544,3134,7358],()=>e(e.s=3864)),_N_E=e.O()}]);