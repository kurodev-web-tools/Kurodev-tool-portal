(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[64],{51424:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>en});var a=s(24520),i=s(70404),n=s(79419),l=s(8857),r=s(5344),c=s(72103),o=s(30621),d=s(26357),h=s(99938),m=s(32651),x=s(15060),u=s(4429),p=s(76996),g=s(76856),f=s(6690),v=s(22747),j=s(14858),b=s(75628),N=s(97408),y=s(31623),w=s(83826),C=s(21023),k=s(83818),S=s(25653),z=s(62543);let R={simple:"シンプル",cute:"かわいい",cool:"クール",stylish:"スタイリッシュ",elegant:"エレガント",modern:"モダン",vintage:"ヴィンテージ",minimal:"ミニマル",colorful:"カラフル",dark:"ダーク",bright:"ブライト",nature:"ナチュラル",urban:"アーバン",fantasy:"ファンタジー",retro:"レトロ",futuristic:"フューチャー",romantic:"ロマンチック",energetic:"エネルギッシュ",calm:"カーム",professional:"プロフェッショナル",casual:"カジュアル",formal:"フォーマル",playful:"プレイフル",serious:"シリアス",artistic:"アーティスティック",tech:"テック",gaming:"ゲーミング",music:"ミュージック",food:"フード",travel:"トラベル",fashion:"ファッション",beauty:"ビューティー",lifestyle:"ライフスタイル",business:"ビジネス",education:"エデュケーション",health:"ヘルス",sports:"スポーツ",entertainment:"エンターテイメント",news:"ニュース",technology:"テクノロジー",science:"サイエンス",culture:"カルチャー",social:"ソーシャル",personal:"パーソナル",creative:"クリエイティブ",innovative:"イノベーティブ",traditional:"トラディショナル",contemporary:"コンテンポラリー",experimental:"エクスペリメンタル",classic:"クラシック",trendy:"トレンディ",unique:"ユニーク",premium:"プレミアム",affordable:"アフォーダブル",luxury:"ラグジュアリー",eco:"エコ",sustainable:"サステナブル",organic:"オーガニック",digital:"デジタル",analog:"アナログ",hybrid:"ハイブリッド",pure:"ピュア",mixed:"ミックス",solid:"ソリッド",gradient:"グラデーション",pattern:"パターン",texture:"テクスチャー",geometric:"ジオメトリック",abstract:"アブストラクト",realistic:"リアリスティック",cartoon:"カートゥーン",anime:"アニメ",manga:"マンガ",illustration:"イラストレーション",photography:"フォトグラフィー",design:"デザイン",art:"アート",craft:"クラフト",handmade:"ハンドメイド",industrial:"インダストリアル",rustic:"ラスティック",cozy:"コージー",spacious:"スペーシャス",compact:"コンパクト",large:"ラージ",small:"スモール",medium:"ミディアム",extra:"エクストラ",mega:"メガ",micro:"マイクロ",macro:"マクロ",nano:"ナノ",pico:"ピコ",giga:"ギガ",kilo:"キロ",milli:"ミリ",centi:"センチ",deci:"デシ",deca:"デカ",hecto:"ヘクト",peta:"ペタ",exa:"エクサ",zetta:"ゼタ",yotta:"ヨタ",ronna:"ロナ",quetta:"クエタ",femto:"フェムト",atto:"アト",zepto:"ゼプト",yocto:"ヨクト",ronto:"ロント",quecto:"クエクト"};var E=s(65574);let D=["1:1","4:3","9:16","16:9"],M=i.memo(e=>{let{onSelectTemplate:t,selectedTemplateId:s}=e,{aspectRatio:n,setAspectRatio:l,customAspectRatio:r,setCustomAspectRatio:c}=(0,N.S)(),{filteredTemplates:o,availableGenres:d,genreNames:h,isLoading:m}=function(e){let{aspectRatio:t,customAspectRatio:s}=e,[a,n]=(0,i.useState)([]),[l,r]=(0,i.useState)(!0);(0,i.useEffect)(()=>{(async()=>{try{r(!0),E.vF.debug("テンプレート読み込み開始",void 0,"useTemplateManagement");let e=await (0,z.K)();E.vF.debug("テンプレート読み込み完了",{count:e.length,genres:[...new Set(e.map(e=>e.genre))]},"useTemplateManagement"),n(e)}catch(e){E.vF.error("テンプレート読み込み失敗",e,"useTemplateManagement"),n([])}finally{r(!1)}})()},[]);let c=(0,i.useMemo)(()=>{let e=a.filter(e=>"custom"===t||e.supportedAspectRatios.includes(t));return E.vF.debug("テンプレートフィルタリング",{aspectRatio:t,beforeCount:a.length,afterCount:e.length,genres:[...new Set(e.map(e=>e.genre))]},"useTemplateManagement"),e},[a,t]),o=(0,i.useMemo)(()=>{let e=[...new Set(c.map(e=>e.genre))];return E.vF.debug("利用可能なジャンル",{availableGenres:e,filteredCount:c.length,totalCount:a.length,aspectRatio:t,allGenres:[...new Set(a.map(e=>e.genre))]},"useTemplateManagement"),e},[c,a,t]),d=(0,i.useMemo)(()=>(e=>{let t={};return e.forEach(e=>{let s;t[e]=R[s=e]||s}),t})(o),[o]),h=(0,i.useMemo)(()=>o.reduce((e,t)=>(e[t]=c.filter(e=>e.genre===t),e),{}),[o,c]);return{templates:a,filteredTemplates:c,availableGenres:o,genreNames:d,templatesByGenre:h,isLoading:l}}({aspectRatio:n,customAspectRatio:r}),{handleCustomAspectRatioChange:x}={handleCustomAspectRatioChange:(e,t)=>{let s=parseInt(e.target.value,10),a={...r,[t]:s};!isNaN(s)&&s>0&&(c(a),l("custom"))}};return m?(0,a.jsx)("div",{className:"w-full p-4 text-center",children:(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"テンプレートを読み込み中..."})}):(0,a.jsxs)(k.nD,{type:"multiple",className:"w-full",defaultValue:["aspect-ratio","templates"],children:[(0,a.jsxs)(k.As,{value:"aspect-ratio",children:[(0,a.jsx)(k.$m,{children:"アスペクト比"}),(0,a.jsxs)(k.ub,{className:"space-y-4 pt-4",children:[(0,a.jsx)(j.J,{children:"プリセット"}),(0,a.jsx)(S.O,{type:"single",value:"custom"===n?"":n,onValueChange:e=>{e&&l(e)},variant:"outline",className:"flex-wrap justify-start",children:D.map(e=>(0,a.jsx)(S.d,{value:e,"aria-label":"比率 ".concat(e),children:e},e))}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(j.J,{children:"手動設定"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(b.p,{type:"number",placeholder:"幅",className:"w-24",value:r.width,onChange:e=>x(e,"width")}),(0,a.jsx)("span",{children:":"}),(0,a.jsx)(b.p,{type:"number",placeholder:"高さ",className:"w-24",value:r.height,onChange:e=>x(e,"height")})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"小さい数字で比率、大きい数字で解像度を指定できます。"})]})]})]}),(0,a.jsxs)(k.As,{value:"templates",children:[(0,a.jsx)(k.$m,{children:"テンプレート選択"}),(0,a.jsx)(k.ub,{className:"pt-4",children:d.length>0?(0,a.jsxs)(p.tU,{defaultValue:d[0],className:"w-full",children:[(0,a.jsx)(p.j7,{className:(0,C.cn)("w-full h-auto p-1",d.length<=4?1===d.length?"grid grid-cols-1":2===d.length?"grid grid-cols-2":3===d.length?"grid grid-cols-3":"grid grid-cols-4":"flex overflow-x-auto space-x-1 scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100"),children:d.map(e=>(0,a.jsx)(p.Xi,{value:e,className:(0,C.cn)(d.length>4?"min-w-fit whitespace-nowrap":"","h-8 px-3 py-1 text-sm"),children:h[e]},e))}),d.map(e=>(0,a.jsx)(p.av,{value:e,children:(0,a.jsx)("div",{className:"grid grid-cols-2 gap-2 mt-4",children:o.filter(t=>t.genre===e).map(e=>(0,a.jsx)(w.Zp,{className:(0,C.cn)("cursor-pointer hover:border-primary transition-colors group",s===e.id&&"border-primary ring-2 ring-primary"),onClick:()=>t(e),children:(0,a.jsx)(w.Wu,{className:"p-0 rounded-md",children:(0,a.jsx)("div",{className:(0,C.cn)("w-full rounded-md flex items-center justify-center relative overflow-hidden","1:1"===n?"aspect-square":"4:3"===n?"aspect-[4/3]":"9:16"===n?"aspect-[9/16]":"aspect-video"),children:(0,a.jsx)(y.wF,{src:e.initialImageSrc,alt:e.name,aspectRatio:"16:9",breakpoints:{sm:200,md:250,lg:300},style:{objectFit:"cover"},className:"transition-transform duration-300 group-hover:scale-105"})})})},e.id))})},e))]}):(0,a.jsx)("div",{className:"text-center text-sm text-muted-foreground py-4",children:"このアスペクト比に対応するテンプレートはありません。"})})]})]})});var J=s(78708),A=s(80472);let F=i.memo(e=>{let{id:t,isSelected:s,text:n,color:l="white",fontSize:r="2rem",fontFamily:c,fontWeight:o,fontStyle:d,textDecoration:h,textShadow:m,className:x,x:u,y:p,width:g,height:f,rotation:v,zIndex:j,onDragStop:b,onResizeStop:y,enableResizing:w,disableDragging:k}=e,{updateLayer:S}=(0,N.S)(),[z,R]=(0,i.useState)({x:u,y:p}),[E,D]=(0,i.useState)(!1),M=(0,i.useRef)(null),F=(0,i.useRef)(null);(0,i.useEffect)(()=>{R({x:u,y:p})},[u,p]);let P=(0,i.useCallback)(e=>{var s;e.preventDefault(),e.stopPropagation(),D(!0);let a=null==(s=M.current)?void 0:s.getSelfElement();if(!a)return;let i=a.parentElement;if(!i)return;let n=i.getBoundingClientRect(),l=n.left+z.x+g/2,r=n.top+z.y+f/2,c=e=>{if(0===e.touches.length)return;let s=e.touches[0].clientX-l;S(t,{rotation:180/Math.PI*Math.atan2(e.touches[0].clientY-r,s)+90})},o=()=>{D(!1),window.removeEventListener("touchmove",c),window.removeEventListener("touchend",o)};window.addEventListener("touchmove",c),window.addEventListener("touchend",o)},[t,S,z.x,z.y,g,f]);return(0,i.useEffect)(()=>{let e=F.current;if(e)return e.addEventListener("touchstart",P,{passive:!1}),()=>{e.removeEventListener("touchstart",P)}},[P]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(J.p,{ref:M,size:{width:g,height:f},position:z,onDragStart:()=>{if(E)return!1},onDrag:(e,t)=>{E||R({x:t.x,y:t.y})},onDragStop:b,onResizeStop:y,minWidth:50,minHeight:20,enableResizing:w,disableDragging:k||E,className:"border border-dashed border-transparent hover:border-gray-500 transition-colors duration-200",style:{display:"flex",alignItems:"center",justifyContent:"center",zIndex:j},children:(0,a.jsx)("div",{className:"w-full h-full flex items-center justify-center",style:{transform:"rotate(".concat(v,"deg)"),transformOrigin:"center"},children:(0,a.jsx)("p",{className:(0,C.cn)("cursor-move",x),style:{color:l,fontSize:r,fontFamily:c,fontWeight:o,fontStyle:d,textDecoration:h,textShadow:m,lineHeight:1,whiteSpace:"pre-wrap"},children:n})})}),s&&(0,a.jsx)("div",{ref:F,onMouseDown:e=>{var s;e.preventDefault(),e.stopPropagation(),D(!0);let a=null==(s=M.current)?void 0:s.getSelfElement();if(!a)return;let i=a.parentElement;if(!i)return;let n=i.getBoundingClientRect(),l=n.left+z.x+g/2,r=n.top+z.y+f/2,c=e=>{let s=e.clientX-l;S(t,{rotation:180/Math.PI*Math.atan2(e.clientY-r,s)+90})},o=()=>{D(!1),window.removeEventListener("mousemove",c),window.removeEventListener("mouseup",o)};window.addEventListener("mousemove",c),window.addEventListener("mouseup",o)},className:"absolute cursor-grab active:cursor-grabbing bg-white border rounded-full p-1 shadow z-50",style:{left:z.x+g/2,top:z.y-30,transform:"translateX(-50%)"},children:(0,a.jsx)(A.A,{className:"h-4 w-4"})})]})}),P=i.memo(e=>{let{id:t,isSelected:s,src:n,alt:l,x:r,y:c,width:o,height:d,rotation:h,onDragStop:m,onResize:x,onResizeStop:u,onSelect:p,isLocked:g,isDraggable:f,lockAspectRatio:v,enableResizing:j,disableDragging:b,isBackground:y,zIndex:w}=e,{updateLayer:k}=(0,N.S)(),[S,z]=(0,i.useState)({x:r,y:c}),[R,E]=(0,i.useState)(!1),D=(0,i.useRef)(null),M=(0,i.useRef)(null);(0,i.useEffect)(()=>{z({x:r,y:c})},[r,c]);let F=(0,i.useCallback)(e=>{var s;e.preventDefault(),e.stopPropagation(),E(!0);let a=null==(s=D.current)?void 0:s.getSelfElement();if(!a)return;let i=a.parentElement;if(!i)return;let n=i.getBoundingClientRect(),l=n.left+S.x+o/2,r=n.top+S.y+d/2,c=e=>{if(0===e.touches.length)return;let s=e.touches[0].clientX-l;k(t,{rotation:180/Math.PI*Math.atan2(e.touches[0].clientY-r,s)+90})},h=()=>{E(!1),window.removeEventListener("touchmove",c),window.removeEventListener("touchend",h)};window.addEventListener("touchmove",c),window.addEventListener("touchend",h)},[t,k,S.x,S.y,o,d]);return(0,i.useEffect)(()=>{let e=M.current;if(e)return e.addEventListener("touchstart",F,{passive:!1}),()=>{e.removeEventListener("touchstart",F)}},[F]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(J.p,{ref:D,size:y?{width:"100%",height:"100%"}:{width:o,height:d},position:y?{x:0,y:0}:S,onDragStart:()=>{if(R||y)return!1},onDrag:(e,t)=>{R||y||z({x:t.x,y:t.y})},onDragStop:m,onResize:x,onResizeStop:u,lockAspectRatio:v,enableResizing:!y&&j,disableDragging:y||b||R,className:(0,C.cn)("border border-dashed border-transparent transition-colors duration-200",{"hover:border-gray-500":!y&&s}),onClick:p,style:{zIndex:w},children:(0,a.jsx)("div",{style:{width:"100%",height:"100%",transform:"rotate(".concat(h,"deg)"),transformOrigin:"center"},children:(0,a.jsx)("div",{style:{width:"100%",height:"100%",backgroundImage:n?"url(".concat(n,")"):"none",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},title:l})})}),s&&!g&&!y&&(0,a.jsx)("div",{ref:M,onMouseDown:e=>{var s;e.preventDefault(),e.stopPropagation(),E(!0);let a=null==(s=D.current)?void 0:s.getSelfElement();if(!a)return;let i=a.parentElement;if(!i)return;let n=i.getBoundingClientRect(),l=n.left+S.x+o/2,r=n.top+S.y+d/2,c=e=>{let s=e.clientX-l;k(t,{rotation:180/Math.PI*Math.atan2(e.clientY-r,s)+90})},h=()=>{E(!1),window.removeEventListener("mousemove",c),window.removeEventListener("mouseup",h)};window.addEventListener("mousemove",c),window.addEventListener("mouseup",h)},className:"absolute cursor-grab active:cursor-grabbing bg-white border rounded-full p-1 shadow z-50",style:{left:S.x+o/2,top:S.y-30,transform:"translateX(-50%)"},children:(0,a.jsx)(A.A,{className:"h-4 w-4"})})]})}),$=(0,i.memo)(e=>{let{id:t,isSelected:s,shapeType:n,backgroundColor:l,borderColor:r,borderWidth:c,rotation:o,zIndex:d,onDragStop:h,onResize:m,onResizeStop:x,lockAspectRatio:u,enableResizing:p,disableDragging:g,x:f,y:v,width:j,height:b}=e,{updateLayer:y}=(0,N.S)(),[w,C]=(0,i.useState)({x:f||0,y:v||0}),[k,S]=(0,i.useState)(!1),z=(0,i.useRef)(null),R=(0,i.useRef)(null);(0,i.useEffect)(()=>{C({x:f||0,y:v||0})},[f,v]);let E=(0,i.useCallback)(e=>{var s;e.preventDefault(),e.stopPropagation(),S(!0);let a=null==(s=z.current)?void 0:s.getSelfElement();if(!a)return;let i=a.parentElement;if(!i)return;let n=i.getBoundingClientRect(),l=n.left+w.x+j/2,r=n.top+w.y+b/2,c=e=>{if(0===e.touches.length)return;let s=e.touches[0].clientX-l;y(t,{rotation:180/Math.PI*Math.atan2(e.touches[0].clientY-r,s)+90})},o=()=>{S(!1),window.removeEventListener("touchmove",c),window.removeEventListener("touchend",o)};window.addEventListener("touchmove",c),window.addEventListener("touchend",o)},[t,y,w.x,w.y,j,b]);return(0,i.useEffect)(()=>{let e=R.current;if(e)return e.addEventListener("touchstart",E,{passive:!1}),()=>{e.removeEventListener("touchstart",E)}},[E]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(J.p,{ref:z,size:{width:j,height:b},position:w,onDragStart:()=>{if(k)return!1},onDrag:(e,t)=>{k||C({x:t.x,y:t.y})},onDragStop:h,onResize:m,onResizeStop:x,lockAspectRatio:u,enableResizing:p,disableDragging:g||k,className:"border border-dashed border-transparent hover:border-gray-500 transition-colors duration-200",style:{zIndex:d},children:(0,a.jsx)("div",{style:{width:"100%",height:"100%",transform:"rotate(".concat(o,"deg)"),transformOrigin:"center"},children:(()=>{let e={width:"100%",height:"100%",style:{overflow:"visible"}};switch(n){case"line":return(0,a.jsx)("svg",{...e,children:(0,a.jsx)("line",{x1:0,y1:b/2,x2:j,y2:b/2,stroke:r,strokeWidth:c})});case"arrow":return(0,a.jsxs)("svg",{...e,children:[(0,a.jsx)("defs",{children:(0,a.jsx)("marker",{id:"arrowhead-".concat(t),markerWidth:"10",markerHeight:"7",refX:"10",refY:"3.5",orient:"auto",fill:r,children:(0,a.jsx)("polygon",{points:"0 0, 10 3.5, 0 7"})})}),(0,a.jsx)("line",{x1:0,y1:b/2,x2:j-10,y2:b/2,stroke:r,strokeWidth:c,markerEnd:"url(#arrowhead-".concat(t,")")})]});case"triangle":return(0,a.jsx)("svg",{...e,children:(0,a.jsx)("polygon",{points:"".concat(j/2,",0 0,").concat(b," ").concat(j,",").concat(b),fill:l,stroke:r,strokeWidth:c})});case"star":return(0,a.jsx)("svg",{...e,children:(0,a.jsx)("polygon",{points:"".concat(.5*j,",0 ").concat(.618*j,",").concat(.382*b," ").concat(j,",").concat(.382*b," ").concat(.691*j,",").concat(.618*b," ").concat(.809*j,",").concat(b," ").concat(.5*j,",").concat(.764*b," ").concat(.191*j,",").concat(b," ").concat(.309*j,",").concat(.618*b," 0,").concat(.382*b," ").concat(.382*j,",").concat(.382*b),fill:l,stroke:r,strokeWidth:c})});case"heart":return(0,a.jsx)("svg",{...e,children:(0,a.jsx)("path",{d:"M".concat(.5*j,",").concat(.9*b," C").concat(.5*j,",").concat(.9*b," ").concat(.1*j,",").concat(.5*b," ").concat(.1*j,",").concat(.3*b," C").concat(.1*j,",").concat(.15*b," ").concat(.25*j,",").concat(.1*b," ").concat(.4*j,",").concat(.1*b," C").concat(.5*j,",").concat(.1*b," ").concat(.5*j,",").concat(.2*b," ").concat(.5*j,",").concat(.2*b," C").concat(.5*j,",").concat(.2*b," ").concat(.5*j,",").concat(.1*b," ").concat(.6*j,",").concat(.1*b," C").concat(.75*j,",").concat(.1*b," ").concat(.9*j,",").concat(.15*b," ").concat(.9*j,",").concat(.3*b," C").concat(.9*j,",").concat(.5*b," ").concat(.5*j,",").concat(.9*b," ").concat(.5*j,",").concat(.9*b," Z"),fill:l,stroke:r,strokeWidth:c})});case"diamond":return(0,a.jsx)("svg",{...e,children:(0,a.jsx)("polygon",{points:"".concat(j/2,",0 ").concat(j,",").concat(b/2," ").concat(j/2,",").concat(b," 0,").concat(b/2),fill:l,stroke:r,strokeWidth:c})});case"polygon":return(0,a.jsx)("svg",{...e,children:(0,a.jsx)("polygon",{points:"".concat(.5*j,",0 ").concat(.9*j,",").concat(.3*b," ").concat(.7*j,",").concat(.9*b," ").concat(.3*j,",").concat(.9*b," ").concat(.1*j,",").concat(.3*b),fill:l,stroke:r,strokeWidth:c})});default:return(0,a.jsx)("div",{style:{width:"100%",height:"100%",backgroundColor:l,border:"".concat(c,"px solid ").concat(r),borderRadius:"circle"===n?"50%":"0"}})}})()})}),s&&(0,a.jsx)("div",{ref:R,onMouseDown:e=>{var s;e.preventDefault(),e.stopPropagation(),S(!0);let a=null==(s=z.current)?void 0:s.getSelfElement();if(!a)return;let i=a.parentElement;if(!i)return;let n=i.getBoundingClientRect(),l=n.left+w.x+j/2,r=n.top+w.y+b/2,c=e=>{let s=e.clientX-l;y(t,{rotation:180/Math.PI*Math.atan2(e.clientY-r,s)+90})},o=()=>{S(!1),window.removeEventListener("mousemove",c),window.removeEventListener("mouseup",o)};window.addEventListener("mousemove",c),window.addEventListener("mouseup",o)},className:"absolute cursor-grab active:cursor-grabbing bg-white border rounded-full p-1 shadow z-50",style:{left:w.x+j/2,top:w.y-30,transform:"translateX(-50%)"},children:(0,a.jsx)(A.A,{className:"h-4 w-4"})})]})});var I=s(92248),L=s(73574),T=s(68421),W=s(1978),O=s(60307),B=s(69025),X=s(9331),V=s(18581),q=s(69903),G=s(60248),H=s(68690),U=s(10502),Y=s(45874),Z=s(88076),K=s(25157),_=s(14202);let Q={web:[{name:"Web バナー (大)",width:1200,height:630,platform:"web"},{name:"Web バナー (中)",width:800,height:420,platform:"web"},{name:"Web バナー (小)",width:600,height:315,platform:"web"},{name:"ヘッダー画像",width:1920,height:400,platform:"web"}],social:[{name:"Twitter ヘッダー",width:1500,height:500,platform:"twitter"},{name:"Twitter 投稿",width:1200,height:675,platform:"twitter"},{name:"Instagram 投稿",width:1080,height:1080,platform:"instagram"},{name:"Instagram ストーリー",width:1080,height:1920,platform:"instagram"},{name:"Facebook カバー",width:1200,height:630,platform:"facebook"}],print:[{name:"A4 (300DPI)",width:2480,height:3508,platform:"print"},{name:"A3 (300DPI)",width:3508,height:4961,platform:"print"},{name:"名刺 (300DPI)",width:1063,height:638,platform:"print"},{name:"ポスター A2 (300DPI)",width:4961,height:7016,platform:"print"},{name:"フライヤー A5 (300DPI)",width:1748,height:2480,platform:"print"}],presentation:[{name:"スライド 16:9",width:1920,height:1080,platform:"presentation"},{name:"スライド 4:3",width:1024,height:768,platform:"presentation"},{name:"プレゼン用高解像度",width:3840,height:2160,platform:"presentation"}]},ee={low:{pixelRatio:1,label:"軽量 (1x)",description:"Web表示用"},medium:{pixelRatio:1.5,label:"標準 (1.5x)",description:"一般的な用途"},high:{pixelRatio:2,label:"高品質 (2x)",description:"Retina対応"},ultra:{pixelRatio:3,label:"超高品質 (3x)",description:"高解像度ディスプレイ"},print:{pixelRatio:4,label:"印刷用 (4x)",description:"300DPI印刷対応"}},et=e=>{let{onExport:t,isExporting:s=!1}=e,n=!(0,_.U)("(min-width: 768px)"),[c,d]=(0,i.useState)({resolution:"fhd",quality:"high",format:"png",pixelRatio:2,backgroundColor:"#ffffff",includeTransparency:!1,optimizeForPlatform:"general",batchExport:!1,batchSizes:[]}),[h,m]=(0,i.useState)("web"),[x,u]=(0,i.useState)([]),p=e=>{d(t=>({...t,...e}))},f=e=>{p({batchExport:!0,batchSizes:Q[e],optimizeForPlatform:"web"===e?"web":"print"===e?"print":"social",quality:"print"===e?"print":"high",format:"png",includeTransparency:"print"!==e}),m(e)},v=async()=>{let e=document.getElementById("download-target");if(!e)return void l.oR.error("プレビューエリアが見つかりません");try{await t(e,c)}catch(e){console.error("Export failed:",e),l.oR.error("エクスポートに失敗しました")}};return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)(w.Zp,{children:[(0,a.jsx)(w.aR,{className:"pb-3",children:(0,a.jsxs)(w.ZB,{className:"text-sm flex items-center gap-2",children:[(0,a.jsx)(X.A,{className:"h-4 w-4"}),"用途別プリセット"]})}),(0,a.jsx)(w.Wu,{className:"space-y-3",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsxs)(r.$,{variant:"web"===h?"default":"outline",size:n?"sm":"default",onClick:()=>f("web"),className:"flex items-center gap-2",children:[(0,a.jsx)(V.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Web用"}),(0,a.jsx)("span",{className:"sm:hidden",children:"Web"})]}),(0,a.jsxs)(r.$,{variant:"social"===h?"default":"outline",size:n?"sm":"default",onClick:()=>f("social"),className:"flex items-center gap-2",children:[(0,a.jsx)(q.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"SNS用"}),(0,a.jsx)("span",{className:"sm:hidden",children:"SNS"})]}),(0,a.jsxs)(r.$,{variant:"print"===h?"default":"outline",size:n?"sm":"default",onClick:()=>f("print"),className:"flex items-center gap-2",children:[(0,a.jsx)(G.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"印刷用"}),(0,a.jsx)("span",{className:"sm:hidden",children:"印刷"})]}),(0,a.jsxs)(r.$,{variant:"presentation"===h?"default":"outline",size:n?"sm":"default",onClick:()=>f("presentation"),className:"flex items-center gap-2",children:[(0,a.jsx)(H.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"プレゼン用"}),(0,a.jsx)("span",{className:"sm:hidden",children:"プレゼン"})]})]})})]}),(0,a.jsxs)(w.Zp,{children:[(0,a.jsx)(w.aR,{className:"pb-3",children:(0,a.jsxs)(w.ZB,{className:"text-sm flex items-center gap-2",children:[(0,a.jsx)(o.A,{className:"h-4 w-4"}),"基本設定"]})}),(0,a.jsxs)(w.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(j.J,{htmlFor:"resolution",children:"解像度"}),(0,a.jsxs)(g.l6,{value:c.resolution,onValueChange:e=>p({resolution:e}),children:[(0,a.jsx)(g.bq,{className:n?"h-10":"",children:(0,a.jsx)(g.yv,{})}),(0,a.jsxs)(g.gC,{children:[(0,a.jsx)(g.eb,{value:"hd",children:"HD (1280\xd7720)"}),(0,a.jsx)(g.eb,{value:"fhd",children:"Full HD (1920\xd71080)"}),(0,a.jsx)(g.eb,{value:"4k",children:"4K (3840\xd72160)"}),(0,a.jsx)(g.eb,{value:"print",children:"印刷用高解像度"}),(0,a.jsx)(g.eb,{value:"custom",children:"カスタム"})]})]})]}),"custom"===c.resolution&&(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(j.J,{htmlFor:"customWidth",children:"幅 (px)"}),(0,a.jsx)(b.p,{id:"customWidth",type:"number",value:c.customWidth||"",onChange:e=>p({customWidth:parseInt(e.target.value)||void 0}),placeholder:"1920",inputMode:"numeric",className:n?"h-10":""})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(j.J,{htmlFor:"customHeight",children:"高さ (px)"}),(0,a.jsx)(b.p,{id:"customHeight",type:"number",value:c.customHeight||"",onChange:e=>p({customHeight:parseInt(e.target.value)||void 0}),placeholder:"1080",inputMode:"numeric",className:n?"h-10":""})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(j.J,{htmlFor:"quality",children:"品質"}),(0,a.jsxs)(g.l6,{value:c.quality,onValueChange:e=>{let t=ee[e];p({quality:e,pixelRatio:t.pixelRatio})},children:[(0,a.jsx)(g.bq,{className:n?"h-10":"",children:(0,a.jsx)(g.yv,{})}),(0,a.jsx)(g.gC,{children:Object.entries(ee).map(e=>{let[t,s]=e;return(0,a.jsx)(g.eb,{value:t,children:(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{children:s.label}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:s.description})]})},t)})})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(j.J,{htmlFor:"format",children:"フォーマット"}),(0,a.jsxs)(g.l6,{value:c.format,onValueChange:e=>p({format:e}),children:[(0,a.jsx)(g.bq,{className:n?"h-10":"",children:(0,a.jsx)(g.yv,{})}),(0,a.jsxs)(g.gC,{children:[(0,a.jsx)(g.eb,{value:"png",children:"PNG (透明背景対応)"}),(0,a.jsx)(g.eb,{value:"jpeg",children:"JPEG (軽量)"})]})]})]}),"png"===c.format&&(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(O.S,{id:"transparency",checked:c.includeTransparency,onCheckedChange:e=>p({includeTransparency:e})}),(0,a.jsx)(j.J,{htmlFor:"transparency",className:"text-sm",children:"透明背景を使用"})]}),!c.includeTransparency&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(j.J,{htmlFor:"backgroundColor",children:"背景色"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(b.p,{id:"backgroundColor",type:"color",value:c.backgroundColor,onChange:e=>p({backgroundColor:e.target.value}),className:"w-12 h-10 p-1 border rounded"}),(0,a.jsx)(b.p,{value:c.backgroundColor,onChange:e=>p({backgroundColor:e.target.value}),placeholder:"#ffffff",className:(0,C.cn)("flex-1",n?"h-10":"")})]})]})]})]}),c.batchExport&&c.batchSizes.length>0&&(0,a.jsxs)(w.Zp,{children:[(0,a.jsx)(w.aR,{className:"pb-3",children:(0,a.jsxs)(w.ZB,{className:"text-sm flex items-center gap-2",children:[(0,a.jsx)(U.A,{className:"h-4 w-4"}),"バッチエクスポート"]})}),(0,a.jsx)(w.Wu,{children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"以下のサイズで一括エクスポートします:"}),(0,a.jsx)("div",{className:"grid gap-1",children:c.batchSizes.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-2 bg-muted rounded text-sm",children:[(0,a.jsx)("span",{children:e.name}),(0,a.jsxs)(B.E,{variant:"secondary",children:[e.width,"\xd7",e.height]})]},t))})]})})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(r.$,{onClick:v,disabled:s,className:(0,C.cn)("flex-1",n?"h-11":""),children:s?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Y.A,{className:"mr-2 h-4 w-4 animate-spin"}),"エクスポート中..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Z.A,{className:"mr-2 h-4 w-4"}),"エクスポート"]})}),(0,a.jsxs)(r.$,{variant:"outline",onClick:()=>{let e=prompt("プリセット名を入力してください:");if(e){let t={...c,name:e};u(e=>[...e,t]),l.oR.success('プリセット "'.concat(e,'" を保存しました'))}},disabled:s,className:n?"h-11":"",title:"現在の設定をプリセットとして保存",children:[(0,a.jsx)(K.A,{className:"h-4 w-4"}),n?"":"保存"]})]})]})},es=["image/jpeg","image/jpg","image/png","image/webp"],ea=e=>{if(!e||"none"===e)return{x:0,y:0,blur:0,color:"#000000",opacity:.5};let t=e.match(/(-?\d+)px\s+(-?\d+)px\s+(\d+)px\s+rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*([\d.]+))?\)/);if(t)return{x:parseInt(t[1]),y:parseInt(t[2]),blur:parseInt(t[3]),color:"#".concat(parseInt(t[4]).toString(16).padStart(2,"0")).concat(parseInt(t[5]).toString(16).padStart(2,"0")).concat(parseInt(t[6]).toString(16).padStart(2,"0")),opacity:t[7]?parseFloat(t[7]):1};let s=e.match(/(-?\d+)px\s+(-?\d+)px\s+(\d+)px\s+(#[0-9a-fA-F]{6})/);return s?{x:parseInt(s[1]),y:parseInt(s[2]),blur:parseInt(s[3]),color:s[4],opacity:1}:{x:0,y:0,blur:0,color:"#000000",opacity:.5}};function ei(){let{isOpen:e,setIsOpen:t,isDesktop:y}=(0,m.c)({defaultOpen:!1,desktopDefaultOpen:!0}),[w,C]=i.useState("settings"),[k,S]=i.useState(!1),[z,R]=i.useState(!1),[D,J]=i.useState(!1),[A,O]=i.useState(!1),[B,X]=i.useState(!0),[V,q]=i.useState(!1),[G,H]=i.useState(20),[U,Y]=i.useState(!1),{handleAsyncError:Z}=(0,x.u)(),{selectedTemplate:K,setSelectedTemplate:_,currentText:Q,setCurrentText:ee,layers:ei,addLayer:en,removeLayer:el,updateLayer:er,selectedLayerId:ec,setSelectedLayerId:eo,reorderLayers:ed,duplicateLayer:eh,moveLayerUp:em,moveLayerDown:ex,aspectRatio:eu,customAspectRatio:ep}=(0,N.S)(),eg=ei.find(e=>e.id===ec);i.useEffect(()=>{(null==eg?void 0:eg.textShadow)&&"none"!==eg.textShadow?Y(!0):Y(!1)},[null==eg?void 0:eg.textShadow]);let ef=i.useCallback(()=>{let t;return y?(t=D?{width:"min(2000px, 95vw)",maxWidth:"none"}:e?{width:"min(1500px, 75vw)",maxWidth:"none"}:{width:"min(1800px, 90vw)",maxWidth:"none"},E.vF.debug("Preview size",{isDesktop:y,isPreviewDedicatedMode:D,isSidebarOpen:e,size:t},"AssetCreator"),t):D?{width:"95vw",maxWidth:"none",maxHeight:"80vh"}:{width:"90vw",maxWidth:"none",maxHeight:"40vh"}},[y,D,e]),{zoom:ev,setZoom:ej,undo:eb,redo:eN,canUndo:ey,canRedo:ew,addToHistory:eC,resetHistoryFlag:ek,saveToLocalStorage:eS,loadFromLocalStorage:ez}=(0,W.Y)(ei,ec);i.useEffect(()=>{let e=e=>{if("Shift"===e.key&&S(!0),e.ctrlKey||e.metaKey)switch(e.key){case"z":e.preventDefault(),e.shiftKey?eN()&&ek():eb()&&ek();break;case"y":e.preventDefault(),eN()&&ek();break;case"s":e.preventDefault(),eS(ei,ec)?l.oR.success("プロジェクトを保存しました"):l.oR.error("保存に失敗しました")}},t=e=>{"Shift"===e.key&&S(!1)};return window.addEventListener("keydown",e),window.addEventListener("keyup",t),()=>{window.removeEventListener("keydown",e),window.removeEventListener("keyup",t)}},[eb,eN,ek,eS,ei,ec]),i.useEffect(()=>{y?t(!0):t(!1)},[y]);let eR=i.useCallback(async(e,t)=>{R(!0);try{await Z(async()=>{let a,i,r={width:1920,height:1080};switch(t.resolution){case"hd":r={width:1280,height:720};break;case"fhd":r={width:1920,height:1080};break;case"4k":r={width:3840,height:2160};break;case"print":r={width:2480,height:3508};break;case"custom":t.customWidth&&t.customHeight&&(r={width:t.customWidth,height:t.customHeight})}if("custom"!==eu){let[e,t]=eu.split(":").map(Number);e>0&&t>0&&(r.width=Math.round(r.height*(e/t)))}else if(ep.width>0&&ep.height>0){let e=ep.width/ep.height;r.width=Math.round(r.height*e)}let c={cacheBust:!0,pixelRatio:t.pixelRatio||2,quality:"png"===t.format?1:.9,backgroundColor:t.backgroundColor||(t.includeTransparency?"transparent":"#ffffff"),width:r.width,height:r.height,style:{transform:"scale(1)",transformOrigin:"top left"}};if("png"===t.format)a=await (0,n.$E)(e,c),i="asset-".concat(t.optimizeForPlatform,"-").concat(r.width,"x").concat(r.height,".png");else if("jpeg"===t.format){let{toJpeg:n}=await Promise.resolve().then(s.bind(s,79419));a=await n(e,c),i="asset-".concat(t.optimizeForPlatform,"-").concat(r.width,"x").concat(r.height,".jpg")}else a=await (0,n.$E)(e,c),i="asset-".concat(t.optimizeForPlatform,"-").concat(r.width,"x").concat(r.height,".png");let o=document.createElement("a");o.download=i,o.href=a,o.click(),l.oR.success("".concat(i," をエクスポートしました"))},"エクスポートに失敗しました")}finally{R(!1)}},[eu,ep,Z]),eE=i.useCallback(async(e,t)=>{R(!0);try{let a=t.batchSizes.map(async a=>{let i,l,r={cacheBust:!0,pixelRatio:t.pixelRatio||2,quality:"png"===t.format?1:.9,backgroundColor:t.backgroundColor||(t.includeTransparency?"transparent":"#ffffff"),width:a.width,height:a.height};if("png"===t.format)i=await (0,n.$E)(e,r),l="asset-".concat(a.platform,"-").concat(a.width,"x").concat(a.height,".png");else if("jpeg"===t.format){let{toJpeg:t}=await Promise.resolve().then(s.bind(s,79419));i=await t(e,r),l="asset-".concat(a.platform,"-").concat(a.width,"x").concat(a.height,".jpg")}else i=await (0,n.$E)(e,r),l="asset-".concat(a.platform,"-").concat(a.width,"x").concat(a.height,".png");let c=document.createElement("a");return c.download=l,c.href=i,c.click(),l}),i=await Promise.all(a);l.oR.success("".concat(i.length,"個のファイルをエクスポートしました"))}catch(e){E.vF.error("Batch export failed",e,"AssetCreator"),l.oR.error("バッチエクスポートに失敗しました")}finally{R(!1)}},[]),eD=i.useCallback(async e=>{let t=document.getElementById("download-target");if(!t)return void l.oR.error("プレビューエリアが見つかりません");try{await eR(t,{resolution:"super"===e?"4k":"high"===e?"fhd":"hd",quality:"high",format:"png",pixelRatio:"super"===e?4:"high"===e?2:1,backgroundColor:"#ffffff",includeTransparency:!1,optimizeForPlatform:"general",batchExport:!1,batchSizes:[]})}catch(e){E.vF.error("Export failed",e,"AssetCreator"),l.oR.error("エクスポートに失敗しました")}},[eR]),eM=i.useCallback((e,t,s)=>{er(e,{x:s.x,y:s.y}),setTimeout(()=>eC(ei,ec),0)},[er,eC,ei,ec]),eJ=i.useCallback((e,t,s,a,i)=>{er(e,{width:s.offsetWidth,height:s.offsetHeight,x:i.x,y:i.y}),setTimeout(()=>eC(ei,ec),0)},[er,eC,ei,ec]),eA=e=>{let t=ei.filter(e=>"shape"===e.type).length*(y?20:5),s=ei.filter(t=>t.shapeType===e).length+1,a="",i=y?550:10,n=y?250:10,l=y?300:50,r=y?300:50,c=y?2:1,o=y?300:100,d=y?5:3;switch(e){case"rectangle":a="四角 ".concat(s);break;case"circle":a="円 ".concat(s);break;case"line":a="線 ".concat(s);break;case"arrow":a="矢印 ".concat(s)}en({type:"shape",shapeType:e,name:a,visible:!0,locked:!1,x:i+t,y:n+t,width:"line"===e||"arrow"===e?o:l,height:"line"===e||"arrow"===e?d:r,backgroundColor:"#cccccc",borderColor:"#000000",borderWidth:c}),setTimeout(()=>eC(ei,ec),0)},eF=i.useCallback(()=>{eS(ei,ec)?l.oR.success("プロジェクトを保存しました"):l.oR.error("保存に失敗しました")},[eS,ei,ec]),eP=i.useCallback(()=>{eb()&&(ek(),l.oR.success("操作を元に戻しました"))},[eb,ek]),e$=i.useCallback(()=>{eN()&&(ek(),l.oR.success("操作をやり直しました"))},[eN,ek]);if(!K)return(0,a.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,a.jsx)("p",{children:"テンプレートを読み込み中..."})});let eI=()=>{var e;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h4",{className:"font-medium",children:"基本情報"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(j.J,{className:"text-sm font-medium",children:"レイヤー名"}),(0,a.jsx)(b.p,{value:(null==eg?void 0:eg.name)||"",onChange:e=>eg&&er(eg.id,{name:e.target.value}),className:"mt-1",placeholder:"レイヤー名を入力",disabled:!eg})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(j.J,{className:"text-sm font-medium",children:"X座標"}),(0,a.jsx)(b.p,{type:"number",value:(null==eg?void 0:eg.x)||0,onChange:e=>eg&&er(eg.id,{x:Number(e.target.value)}),className:"mt-1",disabled:!eg})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(j.J,{className:"text-sm font-medium",children:"Y座標"}),(0,a.jsx)(b.p,{type:"number",value:(null==eg?void 0:eg.y)||0,onChange:e=>eg&&er(eg.id,{y:Number(e.target.value)}),className:"mt-1",disabled:!eg})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(j.J,{className:"text-sm font-medium",children:"幅"}),(0,a.jsx)(b.p,{type:"number",value:(null==eg?void 0:eg.width)||0,onChange:e=>eg&&er(eg.id,{width:Number(e.target.value)}),className:"mt-1",disabled:!eg})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(j.J,{className:"text-sm font-medium",children:"高さ"}),(0,a.jsx)(b.p,{type:"number",value:(null==eg?void 0:eg.height)||0,onChange:e=>eg&&er(eg.id,{height:Number(e.target.value)}),className:"mt-1",disabled:!eg})]})]})]})]}),(null==eg?void 0:eg.type)==="text"&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h4",{className:"font-medium",children:"テキスト設定"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(j.J,{className:"text-sm font-medium",children:"テキスト"}),(0,a.jsx)(f.T,{value:eg.text||"",onChange:e=>er(eg.id,{text:e.target.value}),className:"mt-1 min-h-[80px] resize-none",placeholder:"テキストを入力してください"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(j.J,{className:"text-sm font-medium",children:"フォントサイズ"}),(0,a.jsx)(v.A,{value:[parseFloat((null==(e=eg.fontSize)?void 0:e.replace("rem",""))||"2")],onValueChange:e=>{let[t]=e;return er(eg.id,{fontSize:"".concat(t,"rem")})},min:.5,max:8,step:.1,className:"mt-2"}),(0,a.jsx)("div",{className:"text-xs text-gray-500 text-center mt-1",children:eg.fontSize||"2rem"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(j.J,{className:"text-sm font-medium",children:"色"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,a.jsx)("input",{type:"color",value:eg.color||"#ffffff",onChange:e=>er(eg.id,{color:e.target.value}),className:"w-8 h-8 rounded border border-gray-300"}),(0,a.jsx)(b.p,{value:eg.color||"#ffffff",onChange:e=>er(eg.id,{color:e.target.value}),className:"flex-1"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("h5",{className:"text-sm font-medium text-gray-300",children:"フォント設定"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(j.J,{className:"text-xs text-gray-400",children:"フォントファミリー"}),(0,a.jsxs)(g.l6,{value:eg.fontFamily||"Arial, sans-serif",onValueChange:e=>er(eg.id,{fontFamily:e}),children:[(0,a.jsx)(g.bq,{className:"h-8 text-xs",children:(0,a.jsx)(g.yv,{})}),(0,a.jsxs)(g.gC,{children:[(0,a.jsx)(g.eb,{value:"Noto Sans JP, sans-serif",children:"Noto Sans JP"}),(0,a.jsx)(g.eb,{value:"M PLUS Rounded 1c, sans-serif",children:"M PLUS Rounded 1c"}),(0,a.jsx)(g.eb,{value:"Kosugi Maru, sans-serif",children:"Kosugi Maru"}),(0,a.jsx)(g.eb,{value:"Sawarabi Mincho, serif",children:"Sawarabi Mincho"}),(0,a.jsx)(g.eb,{value:"Noto Serif JP, serif",children:"Noto Serif JP"}),(0,a.jsx)(g.eb,{value:"Roboto, sans-serif",children:"Roboto"}),(0,a.jsx)(g.eb,{value:"Open Sans, sans-serif",children:"Open Sans"}),(0,a.jsx)(g.eb,{value:"Lato, sans-serif",children:"Lato"}),(0,a.jsx)(g.eb,{value:"Montserrat, sans-serif",children:"Montserrat"}),(0,a.jsx)(g.eb,{value:"Source Sans 3, sans-serif",children:"Source Sans 3"}),(0,a.jsx)(g.eb,{value:"Nunito, sans-serif",children:"Nunito"}),(0,a.jsx)(g.eb,{value:"Poppins, sans-serif",children:"Poppins"}),(0,a.jsx)(g.eb,{value:"Inter, sans-serif",children:"Inter"}),(0,a.jsx)(g.eb,{value:"Playfair Display, serif",children:"Playfair Display"}),(0,a.jsx)(g.eb,{value:"Merriweather, serif",children:"Merriweather"}),(0,a.jsx)(g.eb,{value:"Lora, serif",children:"Lora"}),(0,a.jsx)(g.eb,{value:"Crimson Text, serif",children:"Crimson Text"}),(0,a.jsx)(g.eb,{value:"Bebas Neue, sans-serif",children:"Bebas Neue"}),(0,a.jsx)(g.eb,{value:"Oswald, sans-serif",children:"Oswald"}),(0,a.jsx)(g.eb,{value:"Anton, sans-serif",children:"Anton"}),(0,a.jsx)(g.eb,{value:"Dancing Script, cursive",children:"Dancing Script"}),(0,a.jsx)(g.eb,{value:"Pacifico, cursive",children:"Pacifico"}),(0,a.jsx)(g.eb,{value:"Great Vibes, cursive",children:"Great Vibes"}),(0,a.jsx)(g.eb,{value:"Roboto Mono, monospace",children:"Roboto Mono"}),(0,a.jsx)(g.eb,{value:"Source Code Pro, monospace",children:"Source Code Pro"}),(0,a.jsx)(g.eb,{value:"Fira Code, monospace",children:"Fira Code"}),(0,a.jsx)(g.eb,{value:"JetBrains Mono, monospace",children:"JetBrains Mono"}),(0,a.jsx)(g.eb,{value:"Arial, sans-serif",children:"Arial (System)"}),(0,a.jsx)(g.eb,{value:"Helvetica, sans-serif",children:"Helvetica (System)"}),(0,a.jsx)(g.eb,{value:"Georgia, serif",children:"Georgia (System)"}),(0,a.jsx)(g.eb,{value:"Times New Roman, serif",children:"Times New Roman (System)"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(j.J,{className:"text-xs text-gray-400",children:"フォントウェイト"}),(0,a.jsxs)(g.l6,{value:eg.fontWeight||"normal",onValueChange:e=>er(eg.id,{fontWeight:e}),children:[(0,a.jsx)(g.bq,{className:"h-8 text-xs",children:(0,a.jsx)(g.yv,{})}),(0,a.jsxs)(g.gC,{children:[(0,a.jsx)(g.eb,{value:"normal",children:"通常"}),(0,a.jsx)(g.eb,{value:"bold",children:"太字"}),(0,a.jsx)(g.eb,{value:"lighter",children:"細字"}),(0,a.jsx)(g.eb,{value:"100",children:"100"}),(0,a.jsx)(g.eb,{value:"300",children:"300"}),(0,a.jsx)(g.eb,{value:"400",children:"400"}),(0,a.jsx)(g.eb,{value:"500",children:"500"}),(0,a.jsx)(g.eb,{value:"600",children:"600"}),(0,a.jsx)(g.eb,{value:"700",children:"700"}),(0,a.jsx)(g.eb,{value:"800",children:"800"}),(0,a.jsx)(g.eb,{value:"900",children:"900"})]})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(j.J,{className:"text-xs text-gray-400",children:"フォントスタイル"}),(0,a.jsxs)(g.l6,{value:eg.fontStyle||"normal",onValueChange:e=>er(eg.id,{fontStyle:e}),children:[(0,a.jsx)(g.bq,{className:"h-8 text-xs",children:(0,a.jsx)(g.yv,{})}),(0,a.jsxs)(g.gC,{children:[(0,a.jsx)(g.eb,{value:"normal",children:"通常"}),(0,a.jsx)(g.eb,{value:"italic",children:"イタリック"}),(0,a.jsx)(g.eb,{value:"oblique",children:"斜体"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(j.J,{className:"text-xs text-gray-400",children:"文字装飾"}),(0,a.jsxs)(g.l6,{value:eg.textDecoration||"none",onValueChange:e=>er(eg.id,{textDecoration:e}),children:[(0,a.jsx)(g.bq,{className:"h-8 text-xs",children:(0,a.jsx)(g.yv,{})}),(0,a.jsxs)(g.gC,{children:[(0,a.jsx)(g.eb,{value:"none",children:"なし"}),(0,a.jsx)(g.eb,{value:"underline",children:"下線"}),(0,a.jsx)(g.eb,{value:"line-through",children:"取り消し線"}),(0,a.jsx)(g.eb,{value:"overline",children:"上線"})]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-3 pt-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(j.J,{className:"text-xs text-gray-400",children:"文字シャドウ"}),(0,a.jsx)(r.$,{size:"sm",variant:U?"default":"outline",onClick:()=>{let e=!U;Y(e),e?er(eg.id,{textShadow:"2px 2px 4px rgba(0,0,0,0.5)"}):er(eg.id,{textShadow:"none"})},className:"h-6 px-3 text-xs",children:U?"ON":"OFF"})]}),U&&(()=>{let e=ea(eg.textShadow),t=(e,t)=>{let s={...ea(eg.textShadow),[e]:t},a=((e,t,s,a,i)=>{let n=parseInt(a.slice(1,3),16),l=parseInt(a.slice(3,5),16),r=parseInt(a.slice(5,7),16);return"".concat(e,"px ").concat(t,"px ").concat(s,"px rgba(").concat(n,",").concat(l,",").concat(r,",").concat(i,")")})(s.x,s.y,s.blur,s.color,s.opacity);er(eg.id,{textShadow:a})};return(0,a.jsxs)("div",{className:"space-y-3 pl-2 border-l-2 border-gray-700",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(j.J,{className:"text-xs text-gray-500",children:"水平位置（X）"}),(0,a.jsx)(v.A,{value:[e.x],onValueChange:e=>{let[s]=e;return t("x",s)},min:-20,max:20,step:1,className:"mt-2"}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 text-center mt-1",children:[e.x,"px"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(j.J,{className:"text-xs text-gray-500",children:"垂直位置（Y）"}),(0,a.jsx)(v.A,{value:[e.y],onValueChange:e=>{let[s]=e;return t("y",s)},min:-20,max:20,step:1,className:"mt-2"}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 text-center mt-1",children:[e.y,"px"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(j.J,{className:"text-xs text-gray-500",children:"ぼかし"}),(0,a.jsx)(v.A,{value:[e.blur],onValueChange:e=>{let[s]=e;return t("blur",s)},min:0,max:30,step:1,className:"mt-2"}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 text-center mt-1",children:[e.blur,"px"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(j.J,{className:"text-xs text-gray-500",children:"影の色"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,a.jsx)("input",{type:"color",value:e.color,onChange:e=>t("color",e.target.value),className:"w-10 h-8 rounded border border-gray-600"}),(0,a.jsx)(b.p,{value:e.color,onChange:e=>t("color",e.target.value),className:"h-8 text-xs"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(j.J,{className:"text-xs text-gray-500",children:"不透明度"}),(0,a.jsx)(v.A,{value:[100*e.opacity],onValueChange:e=>{let[s]=e;return t("opacity",s/100)},min:0,max:100,step:1,className:"mt-2"}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 text-center mt-1",children:[Math.round(100*e.opacity),"%"]})]})]})})()]})]})]})]}),(null==eg?void 0:eg.type)==="image"&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h4",{className:"font-medium",children:"画像設定"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(j.J,{className:"text-sm font-medium",children:"画像を変更"}),(0,a.jsx)(b.p,{type:"file",accept:"image/*",onChange:e=>{var t;let s=null==(t=e.target.files)?void 0:t[0];if(s){let e=URL.createObjectURL(s);er(eg.id,{src:e})}},className:"mt-1"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(j.J,{className:"text-sm font-medium",children:"不透明度"}),(0,a.jsx)(v.A,{value:[eg.opacity||100],onValueChange:e=>{let[t]=e;return er(eg.id,{opacity:t})},min:0,max:100,step:1,className:"mt-2"}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 text-center mt-1",children:[eg.opacity||100,"%"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(j.J,{className:"text-sm font-medium",children:"回転角度"}),(0,a.jsx)(v.A,{value:[eg.rotation||0],onValueChange:e=>{let[t]=e;return er(eg.id,{rotation:t})},min:-180,max:180,step:1,className:"mt-2"}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 text-center mt-1",children:[eg.rotation||0,"\xb0"]})]})]})]}),(null==eg?void 0:eg.type)==="shape"&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h4",{className:"font-medium",children:"図形設定"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(j.J,{className:"text-sm font-medium",children:"図形の種類"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[(0,a.jsx)(r.$,{variant:"rectangle"===eg.shapeType?"default":"outline",onClick:()=>er(eg.id,{shapeType:"rectangle"}),size:"sm",children:"四角形"}),(0,a.jsx)(r.$,{variant:"circle"===eg.shapeType?"default":"outline",onClick:()=>er(eg.id,{shapeType:"circle"}),size:"sm",children:"円"}),(0,a.jsx)(r.$,{variant:"line"===eg.shapeType?"default":"outline",onClick:()=>er(eg.id,{shapeType:"line"}),size:"sm",children:"線"}),(0,a.jsx)(r.$,{variant:"arrow"===eg.shapeType?"default":"outline",onClick:()=>er(eg.id,{shapeType:"arrow"}),size:"sm",children:"矢印"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(j.J,{className:"text-sm font-medium",children:"塗りつぶし色"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,a.jsx)("input",{type:"color",value:eg.backgroundColor||"#000000",onChange:e=>er(eg.id,{backgroundColor:e.target.value}),className:"w-8 h-8 rounded border border-gray-300"}),(0,a.jsx)(b.p,{value:eg.backgroundColor||"#000000",onChange:e=>er(eg.id,{backgroundColor:e.target.value}),className:"flex-1"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(j.J,{className:"text-sm font-medium",children:"境界線色"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,a.jsx)("input",{type:"color",value:eg.borderColor||"#000000",onChange:e=>er(eg.id,{borderColor:e.target.value}),className:"w-8 h-8 rounded border border-gray-300"}),(0,a.jsx)(b.p,{value:eg.borderColor||"#000000",onChange:e=>er(eg.id,{borderColor:e.target.value}),className:"flex-1"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(j.J,{className:"text-sm font-medium",children:"境界線の太さ"}),(0,a.jsx)(v.A,{value:[eg.borderWidth||0],onValueChange:e=>{let[t]=e;return er(eg.id,{borderWidth:t})},min:0,max:20,step:1,className:"mt-2"}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 text-center mt-1",children:[eg.borderWidth||0,"px"]})]})]})]}),!eg&&(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"レイヤーを選択してください"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"レイヤーパネルからレイヤーを選択すると、ここで詳細設定ができます"})]})]})},eL=(0,a.jsxs)(p.tU,{value:w,onValueChange:C,className:"w-full",children:[(0,a.jsxs)(p.j7,{className:"grid w-full grid-cols-4",children:[(0,a.jsx)(p.Xi,{value:"settings",children:"テンプレート"}),(0,a.jsx)(p.Xi,{value:"tools",children:"ツール"}),(0,a.jsx)(p.Xi,{value:"layers",children:"レイヤー"}),(0,a.jsx)(p.Xi,{value:"export",children:"エクスポート"})]}),(0,a.jsx)(p.av,{value:"settings",className:"mt-4",children:(0,a.jsx)(M,{onSelectTemplate:_,selectedTemplateId:K.id})}),(0,a.jsx)(p.av,{value:"tools",className:"mt-4",children:eI()}),(0,a.jsx)(p.av,{value:"layers",className:"mt-4",children:(0,a.jsx)(I.G,{context:{layers:ei,updateLayer:er,removeLayer:el,selectedLayerId:ec,setSelectedLayerId:eo,reorderLayers:ed,duplicateLayer:eh,addLayer:en,moveLayerUp:em,moveLayerDown:ex},onShapeSelect:e=>eA(e),showShapeSelector:!0})}),(0,a.jsx)(p.av,{value:"export",className:"mt-4",children:(0,a.jsx)(et,{onExport:(e,t)=>t.batchExport&&t.batchSizes.length>0?eE(e,t):eR(e,t),isExporting:z})})]}),eT=(0,a.jsxs)(p.tU,{value:w,onValueChange:C,className:"w-full",children:[(0,a.jsxs)(p.j7,{className:"grid w-full grid-cols-2 h-12",children:[(0,a.jsx)(p.Xi,{value:"settings",className:"text-xs",children:"テンプレート"}),(0,a.jsx)(p.Xi,{value:"export",className:"text-xs",children:"エクスポート"})]}),(0,a.jsx)(p.av,{value:"settings",className:"mt-4",children:(0,a.jsx)(M,{onSelectTemplate:_,selectedTemplateId:K.id})}),(0,a.jsx)(p.av,{value:"export",className:"mt-4",children:(0,a.jsx)(et,{onExport:(e,t)=>t.batchExport&&t.batchSizes.length>0?eE(e,t):eR(e,t),isExporting:z})})]});return(0,a.jsxs)("div",{className:"relative flex flex-col lg:h-screen",children:[e&&!y&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-30 lg:hidden",onClick:()=>t(!1)}),(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row flex-grow lg:h-full",children:[(0,a.jsxs)("main",{className:"flex-1 flex flex-col lg:h-full p-2 pt-16 lg:p-4 lg:pt-4",children:[(0,a.jsx)("div",{className:"".concat(y?"flex-1 flex flex-col min-h-[600px] lg:min-h-0":"flex-shrink-0"),children:(0,a.jsxs)(a.Fragment,{children:[y&&(0,a.jsx)(L.M,{zoom:ev,setZoom:ej,onUndo:eP,onRedo:e$,onSave:eF,onDownload:eD,canUndo:ey,canRedo:ew,isPreviewDedicatedMode:D,onTogglePreviewMode:()=>J(!D)}),!y&&D&&(0,a.jsx)("div",{className:"absolute top-2 left-2 z-20",children:(0,a.jsxs)(r.$,{size:"sm",variant:"outline",onClick:()=>J(!1),className:"bg-background/90 backdrop-blur-sm shadow-lg",children:[(0,a.jsx)(c.A,{className:"h-4 w-4 mr-1"}),"通常表示に戻る"]})}),(0,a.jsx)("div",{className:"".concat(y?"flex-1 overflow-auto bg-gray-100 dark:bg-gray-900 relative":"flex-shrink-0 bg-gray-100 dark:bg-gray-900 relative max-h-[50vh] overflow-auto"),children:(0,a.jsx)("div",{className:"".concat(y?"flex items-center justify-center h-full p-4 lg:p-8":"flex items-center justify-center p-4"),children:(0,a.jsx)(T.Z,{zoom:ev,onZoomReset:()=>ej(1),className:"w-full",aspectRatio:eu,customAspectRatio:ep,showGrid:A,setShowGrid:O,showAspectGuide:B,setShowAspectGuide:X,showSafeArea:V,setShowSafeArea:q,gridSize:G,setGridSize:H,children:(0,a.jsx)("div",{id:"thumbnail-preview",style:{aspectRatio:"custom"===eu?"".concat(ep.width," / ").concat(ep.height):eu.replace(":"," / "),...ef()},className:"bg-card relative border rounded-md shadow-lg",children:(0,a.jsx)("div",{id:"download-target",className:"w-full h-full relative overflow-hidden",children:ei.map(e=>{let t=e.id===ec,s=t&&!e.locked,i=t&&!e.locked;return e.visible?"image"===e.type?(0,a.jsx)(P,{id:e.id,isSelected:t,src:e.src||"",alt:e.name,x:e.x,y:e.y,width:e.width,height:e.height,rotation:e.rotation,onDragStop:(t,s)=>eM(e.id,t,s),onResize:(t,s,a,i,n)=>eJ(e.id,s,a,i,n),onResizeStop:(t,s,a,i,n)=>eJ(e.id,s,a,i,n),lockAspectRatio:k,enableResizing:i,disableDragging:!s,onSelect:()=>eo(e.id),isLocked:e.locked,isDraggable:s,onRotateStart:()=>{},onRotate:()=>{},onRotateStop:()=>{},isBackground:e.isBackground,zIndex:e.zIndex},e.id):"text"===e.type?(0,a.jsx)(F,{id:e.id,isSelected:t,text:e.text||"",color:e.color||"#000000",fontSize:e.fontSize||"1rem",fontFamily:e.fontFamily,fontWeight:e.fontWeight,fontStyle:e.fontStyle,textDecoration:e.textDecoration,textShadow:e.textShadow,x:e.x,y:e.y,width:e.width,height:e.height,rotation:e.rotation,onDragStop:(t,s)=>eM(e.id,t,s),onResizeStop:(t,s,a,i,n)=>eJ(e.id,s,a,i,n),enableResizing:i,disableDragging:!s,zIndex:e.zIndex},e.id):"shape"===e.type&&e.shapeType?(0,a.jsx)($,{id:e.id,isSelected:t,shapeType:e.shapeType,backgroundColor:e.backgroundColor||"#cccccc",borderColor:e.borderColor||"#000000",borderWidth:e.borderWidth||0,x:e.x,y:e.y,width:e.width,height:e.height,rotation:e.rotation,onDragStop:(t,s)=>eM(e.id,t,s),onResize:(t,s,a,i,n)=>eJ(e.id,s,a,i,n),onResizeStop:(t,s,a,i,n)=>eJ(e.id,s,a,i,n),lockAspectRatio:k,enableResizing:i,disableDragging:!s,zIndex:e.zIndex},e.id):null:null})})})})})})]})}),!y&&!D&&(0,a.jsxs)("div",{className:"border-t bg-background/95 backdrop-blur-sm",children:[(0,a.jsx)("div",{className:"p-2",children:(0,a.jsx)("p",{className:"text-xs text-muted-foreground mb-2",children:"\uD83D\uDCA1 ヒント: 「ツール設定」でレイヤーの詳細編集、「レイヤー管理」でレイヤーの並び替えができます。テンプレートやエクスポートはサイドバーからアクセスできます。"})}),(0,a.jsxs)("div",{className:"p-2 lg:p-4 space-y-3",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-muted-foreground",children:"クイックアクセス"}),(0,a.jsx)(p.tU,{value:w,onValueChange:C,className:"w-full",children:(0,a.jsxs)(p.j7,{className:"w-full h-12 items-center justify-center rounded-md bg-secondary p-1 text-secondary-foreground",children:[(0,a.jsx)(p.Xi,{value:"tools",className:"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-2 text-xs font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",children:"ツール設定"}),(0,a.jsx)(p.Xi,{value:"layers",className:"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-2 text-xs font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",children:"レイヤー管理"}),(0,a.jsx)(p.Xi,{value:"edit",className:"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-2 text-xs font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",children:"レイヤー編集"}),(0,a.jsx)(p.Xi,{value:"preview",className:"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-2 text-xs font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",children:"プレビュー"})]})})]}),"tools"===w&&(0,a.jsxs)("div",{className:"space-y-3 border-t pt-3",children:[(0,a.jsx)("h4",{className:"text-sm font-medium",children:"ツール設定"}),eI()]}),"layers"===w&&(0,a.jsxs)("div",{className:"space-y-3 border-t pt-3",children:[(0,a.jsx)("h4",{className:"text-sm font-medium",children:"レイヤー管理"}),(0,a.jsx)(I.G,{context:{layers:ei,updateLayer:er,removeLayer:el,selectedLayerId:ec,setSelectedLayerId:eo,reorderLayers:ed,duplicateLayer:eh,addLayer:en,moveLayerUp:em,moveLayerDown:ex},onShapeSelect:e=>eA(e),showShapeSelector:!0})]}),"edit"===w&&(0,a.jsxs)("div",{className:"space-y-3 border-t pt-3",children:[(0,a.jsx)("h4",{className:"text-sm font-medium",children:"レイヤー編集"}),eg?(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"p-2 bg-secondary/50 rounded-md",children:[(0,a.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"選択中"}),(0,a.jsx)("p",{className:"text-sm font-medium",children:eg.name})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(j.J,{className:"text-xs font-medium",children:"\uD83D\uDCD0 位置"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(r.$,{size:"sm",variant:"outline",onClick:()=>{"number"==typeof eg.x&&er(eg.id,{x:eg.x-10})},className:"h-7 w-7 p-0",children:"←"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)(j.J,{className:"text-xs text-muted-foreground",children:"X"}),(0,a.jsx)(b.p,{type:"number",inputMode:"numeric",value:"number"==typeof eg.x?Math.round(eg.x):0,onChange:e=>er(eg.id,{x:Number(e.target.value)}),className:"h-7 text-xs"})]}),(0,a.jsx)(r.$,{size:"sm",variant:"outline",onClick:()=>{"number"==typeof eg.x&&er(eg.id,{x:eg.x+10})},className:"h-7 w-7 p-0",children:"→"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(r.$,{size:"sm",variant:"outline",onClick:()=>{"number"==typeof eg.y&&er(eg.id,{y:eg.y-10})},className:"h-7 w-7 p-0",children:"↑"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)(j.J,{className:"text-xs text-muted-foreground",children:"Y"}),(0,a.jsx)(b.p,{type:"number",inputMode:"numeric",value:"number"==typeof eg.y?Math.round(eg.y):0,onChange:e=>er(eg.id,{y:Number(e.target.value)}),className:"h-7 text-xs"})]}),(0,a.jsx)(r.$,{size:"sm",variant:"outline",onClick:()=>{"number"==typeof eg.y&&er(eg.id,{y:eg.y+10})},className:"h-7 w-7 p-0",children:"↓"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(j.J,{className:"text-xs font-medium",children:"\uD83D\uDCCF サイズ"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(r.$,{size:"sm",variant:"outline",onClick:()=>{"number"==typeof eg.width&&er(eg.id,{width:Math.max(10,eg.width-20)})},className:"h-7 w-7 p-0",children:"−"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)(j.J,{className:"text-xs text-muted-foreground",children:"幅"}),(0,a.jsx)(b.p,{type:"number",inputMode:"numeric",value:"number"==typeof eg.width?Math.round(eg.width):0,onChange:e=>er(eg.id,{width:Math.max(10,Number(e.target.value))}),className:"h-7 text-xs"})]}),(0,a.jsx)(r.$,{size:"sm",variant:"outline",onClick:()=>{"number"==typeof eg.width&&er(eg.id,{width:eg.width+20})},className:"h-7 w-7 p-0",children:"+"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(r.$,{size:"sm",variant:"outline",onClick:()=>{"number"==typeof eg.height&&er(eg.id,{height:Math.max(10,eg.height-20)})},className:"h-7 w-7 p-0",children:"−"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)(j.J,{className:"text-xs text-muted-foreground",children:"高さ"}),(0,a.jsx)(b.p,{type:"number",inputMode:"numeric",value:"number"==typeof eg.height?Math.round(eg.height):0,onChange:e=>er(eg.id,{height:Math.max(10,Number(e.target.value))}),className:"h-7 text-xs"})]}),(0,a.jsx)(r.$,{size:"sm",variant:"outline",onClick:()=>{"number"==typeof eg.height&&er(eg.id,{height:eg.height+20})},className:"h-7 w-7 p-0",children:"+"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(j.J,{className:"text-xs font-medium",children:"\uD83D\uDD04 回転"}),(0,a.jsxs)("div",{className:"flex gap-1 items-center",children:[(0,a.jsx)(r.$,{size:"sm",variant:"outline",onClick:()=>er(eg.id,{rotation:(eg.rotation||0)-15}),className:"h-7 w-7 p-0",title:"反時計回り 15\xb0",children:"↺"}),(0,a.jsx)(r.$,{size:"sm",variant:"outline",onClick:()=>er(eg.id,{rotation:(eg.rotation||0)-5}),className:"h-7 w-7 p-0",title:"反時計回り 5\xb0",children:"↶"}),(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)(b.p,{type:"number",inputMode:"numeric",value:Math.round(eg.rotation||0),onChange:e=>er(eg.id,{rotation:Number(e.target.value)}),className:"h-7 text-xs text-center",placeholder:"角度"})}),(0,a.jsx)(r.$,{size:"sm",variant:"outline",onClick:()=>er(eg.id,{rotation:(eg.rotation||0)+5}),className:"h-7 w-7 p-0",title:"時計回り 5\xb0",children:"↷"}),(0,a.jsx)(r.$,{size:"sm",variant:"outline",onClick:()=>er(eg.id,{rotation:(eg.rotation||0)+15}),className:"h-7 w-7 p-0",title:"時計回り 15\xb0",children:"↻"}),(0,a.jsx)(r.$,{size:"sm",variant:"outline",onClick:()=>er(eg.id,{rotation:0}),className:"h-7 px-2 text-xs",children:"0\xb0"})]})]}),"text"===eg.type&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(j.J,{className:"text-xs font-medium",children:"✏️ テキスト設定"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f.T,{value:eg.text||"",onChange:e=>er(eg.id,{text:e.target.value}),className:"text-xs min-h-[60px] resize-none",placeholder:"テキストを入力"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(j.J,{className:"text-xs text-muted-foreground w-8",children:"色"}),(0,a.jsx)("input",{type:"color",value:eg.color||"#000000",onChange:e=>er(eg.id,{color:e.target.value}),className:"w-8 h-7 rounded border"}),(0,a.jsx)(b.p,{value:eg.color||"#000000",onChange:e=>er(eg.id,{color:e.target.value}),className:"h-7 text-xs flex-1",placeholder:"#000000"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(r.$,{size:"sm",variant:"outline",onClick:()=>{let e=Math.max(.5,parseFloat(eg.fontSize||"1rem")-.25);er(eg.id,{fontSize:"".concat(e,"rem")})},className:"h-7 w-7 p-0",children:"−"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)(j.J,{className:"text-xs text-muted-foreground",children:"サイズ"}),(0,a.jsx)(b.p,{value:eg.fontSize||"1rem",onChange:e=>er(eg.id,{fontSize:e.target.value}),className:"h-7 text-xs",placeholder:"1rem"})]}),(0,a.jsx)(r.$,{size:"sm",variant:"outline",onClick:()=>{let e=parseFloat(eg.fontSize||"1rem");er(eg.id,{fontSize:"".concat(e+.25,"rem")})},className:"h-7 w-7 p-0",children:"+"})]})]})]})]})]}):(0,a.jsx)("div",{className:"p-4 text-center text-muted-foreground",children:(0,a.jsx)("p",{className:"text-xs",children:"レイヤーを選択してください"})})]}),"preview"===w&&(0,a.jsxs)("div",{className:"space-y-3 border-t pt-3",children:[(0,a.jsx)("h4",{className:"text-sm font-medium",children:"プレビュー設定"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(j.J,{className:"text-xs font-medium",children:"\uD83D\uDD0D ズーム"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(r.$,{size:"sm",variant:"outline",onClick:()=>ej(Math.max(.25,ev-.25)),className:"h-8 w-8 p-0",disabled:ev<=.25,children:"−"}),(0,a.jsx)("div",{className:"flex-1 text-center",children:(0,a.jsxs)("span",{className:"text-xs text-muted-foreground",children:[Math.round(100*ev),"%"]})}),(0,a.jsx)(r.$,{size:"sm",variant:"outline",onClick:()=>ej(Math.min(4,ev+.25)),className:"h-8 w-8 p-0",disabled:ev>=4,children:"+"})]}),(0,a.jsx)(r.$,{size:"sm",variant:"outline",onClick:()=>ej(1),className:"w-full h-8",children:"リセット (100%)"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(j.J,{className:"text-xs font-medium",children:"\uD83D\uDCCA プレビュー情報"}),(0,a.jsxs)("div",{className:"space-y-1 text-xs",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"アスペクト比:"}),(0,a.jsx)("span",{className:"font-medium",children:"custom"===eu?"".concat(ep.width,":").concat(ep.height):eu||"16:9"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"ズーム率:"}),(0,a.jsxs)("span",{className:"font-medium",children:[Math.round(100*ev),"%"]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"グリッド:"}),(0,a.jsx)("span",{className:"font-medium",children:"40px"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(j.J,{className:"text-xs font-medium",children:"⚙️ プレビュー設定"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(j.J,{className:"text-xs text-muted-foreground",children:"グリッド表示"}),(0,a.jsx)(r.$,{size:"sm",variant:A?"default":"outline",onClick:()=>O(!A),className:"h-6 px-2 text-xs",children:A?"ON":"OFF"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(j.J,{className:"text-xs text-muted-foreground",children:"アスペクト比ガイド"}),(0,a.jsx)(r.$,{size:"sm",variant:B?"default":"outline",onClick:()=>X(!B),className:"h-6 px-2 text-xs",children:B?"ON":"OFF"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(j.J,{className:"text-xs text-muted-foreground",children:"セーフエリア"}),(0,a.jsx)(r.$,{size:"sm",variant:V?"default":"outline",onClick:()=>q(!V),className:"h-6 px-2 text-xs",children:V?"ON":"OFF"})]}),A&&(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(j.J,{className:"text-xs text-muted-foreground",children:"グリッドサイズ"}),(0,a.jsxs)("div",{className:"flex gap-1",children:[(0,a.jsx)(r.$,{size:"sm",variant:10===G?"default":"outline",onClick:()=>H(10),className:"h-6 px-2 text-xs flex-1",children:"10px"}),(0,a.jsx)(r.$,{size:"sm",variant:20===G?"default":"outline",onClick:()=>H(20),className:"h-6 px-2 text-xs flex-1",children:"20px"}),(0,a.jsx)(r.$,{size:"sm",variant:40===G?"default":"outline",onClick:()=>H(40),className:"h-6 px-2 text-xs flex-1",children:"40px"})]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(j.J,{className:"text-xs font-medium",children:"\uD83D\uDCFA 表示モード"}),(0,a.jsx)(r.$,{size:"sm",variant:D?"default":"outline",onClick:()=>J(!D),className:"w-full h-8",children:D?"通常表示に戻る":"フルスクリーン表示"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(j.J,{className:"text-xs font-medium",children:"\uD83D\uDCBE 保存・出力"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsx)(r.$,{size:"sm",variant:"outline",onClick:eF,className:"h-8",children:"保存"}),(0,a.jsx)(r.$,{size:"sm",variant:"outline",onClick:()=>eD("high"),className:"h-8",children:"ダウンロード"})]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-muted-foreground",children:"レイヤーを追加"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsxs)(r.$,{variant:"outline",size:"sm",onClick:()=>{en({type:"text",name:"テキスト ".concat(ei.filter(e=>"text"===e.type).length+1),visible:!0,locked:!1,x:y?550:50,y:y?250:50,width:y?300:150,height:y?100:50,text:Q,color:"#000000",fontSize:y?"2rem":"1rem"}),setTimeout(()=>eC(ei,ec),0)},className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-lg",children:"T"}),(0,a.jsx)("span",{children:"テキスト"})]}),(0,a.jsxs)(r.$,{variant:"outline",size:"sm",onClick:()=>{var e;return null==(e=document.getElementById("image-upload"))?void 0:e.click()},className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-lg",children:"\uD83D\uDDBC️"}),(0,a.jsx)("span",{children:"画像"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsxs)(r.$,{variant:"outline",size:"sm",onClick:()=>eA("rectangle"),className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-lg",children:"⬜"}),(0,a.jsx)("span",{children:"四角"})]}),(0,a.jsxs)(r.$,{variant:"outline",size:"sm",onClick:()=>eA("circle"),className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-lg",children:"⭕"}),(0,a.jsx)("span",{children:"円"})]})]}),(0,a.jsx)("input",{id:"image-upload",type:"file",accept:"image/*",onChange:e=>{let t=e.target.files;if(t){for(let e of Array.from(t)){if(e.size>0xa00000){l.oR.error("ファイルサイズが大きすぎます: ".concat(e.name),{description:"10MB以下のファイルを選択してください。"});continue}if(!es.includes(e.type)){l.oR.error("ファイル形式が無効です: ".concat(e.name),{description:"JPEG, PNG, WEBP形式の画像ファイルを選択してください。"});continue}let t=URL.createObjectURL(e);en({type:"image",name:e.name,visible:!0,locked:!1,x:y?550:50,y:y?250:50,width:y?300:150,height:y?300:150,src:t})}e.target.value=""}},className:"hidden",multiple:!0})]})]})]})]}),!e&&(0,a.jsx)(u.R,{onOpen:()=>t(!0),isDesktop:y,tabs:[{id:"settings",label:"テンプレート",icon:(0,a.jsx)(o.A,{className:"h-4 w-4"})},{id:"tools",label:"ツール",icon:(0,a.jsx)(d.A,{className:"h-4 w-4"})},{id:"layers",label:"レイヤー",icon:(0,a.jsx)(h.A,{className:"h-4 w-4"})}],onTabClick:e=>{E.vF.debug("Tab clicked",{tabId:e},"AssetCreator")}}),!D&&(0,a.jsx)(u.B,{isOpen:e,onClose:()=>t(!1),title:"",isDesktop:y,className:"".concat(y?"lg:w-96":"w-full max-w-sm"),children:y?eL:eT})]})]})}function en(){return(0,a.jsx)(N.U,{children:(0,a.jsx)(ei,{})})}},67816:(e,t,s)=>{Promise.resolve().then(s.bind(s,51424))}},e=>{e.O(0,[96,76,358],()=>e(e.s=67816)),_N_E=e.O()}]);