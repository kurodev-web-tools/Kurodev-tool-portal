(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[64],{51424:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>ei});var a=s(24520),i=s(70404),n=s(79419),l=s(8857),r=s(5344),c=s(72103),o=s(30621),d=s(26357),m=s(99938),h=s(32651),x=s(15060),u=s(4429),p=s(76996),g=s(6690),f=s(22747),v=s(14858),j=s(75628),N=s(97408),b=s(31623),w=s(83826),y=s(21023),k=s(83818),C=s(25653),z=s(62543);let S={simple:"シンプル",cute:"かわいい",cool:"クール",stylish:"スタイリッシュ",elegant:"エレガント",modern:"モダン",vintage:"ヴィンテージ",minimal:"ミニマル",colorful:"カラフル",dark:"ダーク",bright:"ブライト",nature:"ナチュラル",urban:"アーバン",fantasy:"ファンタジー",retro:"レトロ",futuristic:"フューチャー",romantic:"ロマンチック",energetic:"エネルギッシュ",calm:"カーム",professional:"プロフェッショナル",casual:"カジュアル",formal:"フォーマル",playful:"プレイフル",serious:"シリアス",artistic:"アーティスティック",tech:"テック",gaming:"ゲーミング",music:"ミュージック",food:"フード",travel:"トラベル",fashion:"ファッション",beauty:"ビューティー",lifestyle:"ライフスタイル",business:"ビジネス",education:"エデュケーション",health:"ヘルス",sports:"スポーツ",entertainment:"エンターテイメント",news:"ニュース",technology:"テクノロジー",science:"サイエンス",culture:"カルチャー",social:"ソーシャル",personal:"パーソナル",creative:"クリエイティブ",innovative:"イノベーティブ",traditional:"トラディショナル",contemporary:"コンテンポラリー",experimental:"エクスペリメンタル",classic:"クラシック",trendy:"トレンディ",unique:"ユニーク",premium:"プレミアム",affordable:"アフォーダブル",luxury:"ラグジュアリー",eco:"エコ",sustainable:"サステナブル",organic:"オーガニック",digital:"デジタル",analog:"アナログ",hybrid:"ハイブリッド",pure:"ピュア",mixed:"ミックス",solid:"ソリッド",gradient:"グラデーション",pattern:"パターン",texture:"テクスチャー",geometric:"ジオメトリック",abstract:"アブストラクト",realistic:"リアリスティック",cartoon:"カートゥーン",anime:"アニメ",manga:"マンガ",illustration:"イラストレーション",photography:"フォトグラフィー",design:"デザイン",art:"アート",craft:"クラフト",handmade:"ハンドメイド",industrial:"インダストリアル",rustic:"ラスティック",cozy:"コージー",spacious:"スペーシャス",compact:"コンパクト",large:"ラージ",small:"スモール",medium:"ミディアム",extra:"エクストラ",mega:"メガ",micro:"マイクロ",macro:"マクロ",nano:"ナノ",pico:"ピコ",giga:"ギガ",kilo:"キロ",milli:"ミリ",centi:"センチ",deci:"デシ",deca:"デカ",hecto:"ヘクト",peta:"ペタ",exa:"エクサ",zetta:"ゼタ",yotta:"ヨタ",ronna:"ロナ",quetta:"クエタ",femto:"フェムト",atto:"アト",zepto:"ゼプト",yocto:"ヨクト",ronto:"ロント",quecto:"クエクト"};var E=s(65574);let R=["1:1","4:3","9:16","16:9"],D=i.memo(e=>{let{onSelectTemplate:t,selectedTemplateId:s}=e,{aspectRatio:n,setAspectRatio:l,customAspectRatio:r,setCustomAspectRatio:c}=(0,N.S)(),{filteredTemplates:o,availableGenres:d,genreNames:m,isLoading:h}=function(e){let{aspectRatio:t,customAspectRatio:s}=e,[a,n]=(0,i.useState)([]),[l,r]=(0,i.useState)(!0);(0,i.useEffect)(()=>{(async()=>{try{r(!0),E.vF.debug("テンプレート読み込み開始",void 0,"useTemplateManagement");let e=await (0,z.K)();E.vF.debug("テンプレート読み込み完了",{count:e.length,genres:[...new Set(e.map(e=>e.genre))]},"useTemplateManagement"),n(e)}catch(e){E.vF.error("テンプレート読み込み失敗",e,"useTemplateManagement"),n([])}finally{r(!1)}})()},[]);let c=(0,i.useMemo)(()=>{let e=a.filter(e=>"custom"===t||e.supportedAspectRatios.includes(t));return E.vF.debug("テンプレートフィルタリング",{aspectRatio:t,beforeCount:a.length,afterCount:e.length,genres:[...new Set(e.map(e=>e.genre))]},"useTemplateManagement"),e},[a,t]),o=(0,i.useMemo)(()=>{let e=[...new Set(c.map(e=>e.genre))];return E.vF.debug("利用可能なジャンル",{availableGenres:e,filteredCount:c.length,totalCount:a.length,aspectRatio:t,allGenres:[...new Set(a.map(e=>e.genre))]},"useTemplateManagement"),e},[c,a,t]),d=(0,i.useMemo)(()=>(e=>{let t={};return e.forEach(e=>{let s;t[e]=S[s=e]||s}),t})(o),[o]),m=(0,i.useMemo)(()=>o.reduce((e,t)=>(e[t]=c.filter(e=>e.genre===t),e),{}),[o,c]);return{templates:a,filteredTemplates:c,availableGenres:o,genreNames:d,templatesByGenre:m,isLoading:l}}({aspectRatio:n,customAspectRatio:r}),{handleCustomAspectRatioChange:x}={handleCustomAspectRatioChange:(e,t)=>{let s=parseInt(e.target.value,10),a={...r,[t]:s};!isNaN(s)&&s>0&&(c(a),l("custom"))}};return h?(0,a.jsx)("div",{className:"w-full p-4 text-center",children:(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"テンプレートを読み込み中..."})}):(0,a.jsxs)(k.nD,{type:"multiple",className:"w-full",defaultValue:["aspect-ratio","templates"],children:[(0,a.jsxs)(k.As,{value:"aspect-ratio",children:[(0,a.jsx)(k.$m,{children:"アスペクト比"}),(0,a.jsxs)(k.ub,{className:"space-y-4 pt-4",children:[(0,a.jsx)(v.J,{children:"プリセット"}),(0,a.jsx)(C.O,{type:"single",value:"custom"===n?"":n,onValueChange:e=>{e&&l(e)},variant:"outline",className:"flex-wrap justify-start",children:R.map(e=>(0,a.jsx)(C.d,{value:e,"aria-label":"比率 ".concat(e),children:e},e))}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(v.J,{children:"手動設定"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(j.p,{type:"number",placeholder:"幅",className:"w-24",value:r.width,onChange:e=>x(e,"width")}),(0,a.jsx)("span",{children:":"}),(0,a.jsx)(j.p,{type:"number",placeholder:"高さ",className:"w-24",value:r.height,onChange:e=>x(e,"height")})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"小さい数字で比率、大きい数字で解像度を指定できます。"})]})]})]}),(0,a.jsxs)(k.As,{value:"templates",children:[(0,a.jsx)(k.$m,{children:"テンプレート選択"}),(0,a.jsx)(k.ub,{className:"pt-4",children:d.length>0?(0,a.jsxs)(p.tU,{defaultValue:d[0],className:"w-full",children:[(0,a.jsx)(p.j7,{className:(0,y.cn)("w-full h-auto p-1",d.length<=4?1===d.length?"grid grid-cols-1":2===d.length?"grid grid-cols-2":3===d.length?"grid grid-cols-3":"grid grid-cols-4":"flex overflow-x-auto space-x-1 scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100"),children:d.map(e=>(0,a.jsx)(p.Xi,{value:e,className:(0,y.cn)(d.length>4?"min-w-fit whitespace-nowrap":"","h-8 px-3 py-1 text-sm"),children:m[e]},e))}),d.map(e=>(0,a.jsx)(p.av,{value:e,children:(0,a.jsx)("div",{className:"grid grid-cols-2 gap-2 mt-4",children:o.filter(t=>t.genre===e).map(e=>(0,a.jsx)(w.Zp,{className:(0,y.cn)("cursor-pointer hover:border-primary transition-colors group",s===e.id&&"border-primary ring-2 ring-primary"),onClick:()=>t(e),children:(0,a.jsx)(w.Wu,{className:"p-0 rounded-md",children:(0,a.jsx)("div",{className:(0,y.cn)("w-full rounded-md flex items-center justify-center relative overflow-hidden","1:1"===n?"aspect-square":"4:3"===n?"aspect-[4/3]":"9:16"===n?"aspect-[9/16]":"aspect-video"),children:(0,a.jsx)(b.wF,{src:e.initialImageSrc,alt:e.name,aspectRatio:"16:9",breakpoints:{sm:200,md:250,lg:300},style:{objectFit:"cover"},className:"transition-transform duration-300 group-hover:scale-105"})})})},e.id))})},e))]}):(0,a.jsx)("div",{className:"text-center text-sm text-muted-foreground py-4",children:"このアスペクト比に対応するテンプレートはありません。"})})]})]})});var M=s(78708),$=s(80472);let A=i.memo(e=>{let{id:t,isSelected:s,text:n,color:l="white",fontSize:r="2rem",className:c,x:o,y:d,width:m,height:h,rotation:x,zIndex:u,onDragStop:p,onResizeStop:g,enableResizing:f,disableDragging:v}=e,{updateLayer:j}=(0,N.S)(),[b,w]=(0,i.useState)({x:o,y:d}),[k,C]=(0,i.useState)(!1),z=(0,i.useRef)(null),S=(0,i.useRef)(null);(0,i.useEffect)(()=>{w({x:o,y:d})},[o,d]);let E=(0,i.useCallback)(e=>{var s;e.preventDefault(),e.stopPropagation(),C(!0);let a=null==(s=z.current)?void 0:s.getSelfElement();if(!a)return;let i=a.parentElement;if(!i)return;let n=i.getBoundingClientRect(),l=n.left+b.x+m/2,r=n.top+b.y+h/2,c=e=>{if(0===e.touches.length)return;let s=e.touches[0].clientX-l;j(t,{rotation:180/Math.PI*Math.atan2(e.touches[0].clientY-r,s)+90})},o=()=>{C(!1),window.removeEventListener("touchmove",c),window.removeEventListener("touchend",o)};window.addEventListener("touchmove",c),window.addEventListener("touchend",o)},[t,j,b.x,b.y,m,h]);return(0,i.useEffect)(()=>{let e=S.current;if(e)return e.addEventListener("touchstart",E,{passive:!1}),()=>{e.removeEventListener("touchstart",E)}},[E]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(M.p,{ref:z,size:{width:m,height:h},position:b,onDragStart:()=>{if(k)return!1},onDrag:(e,t)=>{k||w({x:t.x,y:t.y})},onDragStop:p,onResizeStop:g,minWidth:50,minHeight:20,enableResizing:f,disableDragging:v||k,className:"border border-dashed border-transparent hover:border-gray-500 transition-colors duration-200",style:{display:"flex",alignItems:"center",justifyContent:"center",zIndex:u},children:(0,a.jsx)("div",{className:"w-full h-full flex items-center justify-center",style:{transform:"rotate(".concat(x,"deg)"),transformOrigin:"center"},children:(0,a.jsx)("p",{className:(0,y.cn)("cursor-move",c),style:{color:l,fontSize:r,lineHeight:1,whiteSpace:"pre-wrap"},children:n})})}),s&&(0,a.jsx)("div",{ref:S,onMouseDown:e=>{var s;e.preventDefault(),e.stopPropagation(),C(!0);let a=null==(s=z.current)?void 0:s.getSelfElement();if(!a)return;let i=a.parentElement;if(!i)return;let n=i.getBoundingClientRect(),l=n.left+b.x+m/2,r=n.top+b.y+h/2,c=e=>{let s=e.clientX-l;j(t,{rotation:180/Math.PI*Math.atan2(e.clientY-r,s)+90})},o=()=>{C(!1),window.removeEventListener("mousemove",c),window.removeEventListener("mouseup",o)};window.addEventListener("mousemove",c),window.addEventListener("mouseup",o)},className:"absolute cursor-grab active:cursor-grabbing bg-white border rounded-full p-1 shadow z-50",style:{left:b.x+m/2,top:b.y-30,transform:"translateX(-50%)"},children:(0,a.jsx)($.A,{className:"h-4 w-4"})})]})}),J=i.memo(e=>{let{id:t,isSelected:s,src:n,alt:l,x:r,y:c,width:o,height:d,rotation:m,onDragStop:h,onResize:x,onResizeStop:u,onSelect:p,isLocked:g,isDraggable:f,lockAspectRatio:v,enableResizing:j,disableDragging:b,isBackground:w,zIndex:k}=e,{updateLayer:C}=(0,N.S)(),[z,S]=(0,i.useState)({x:r,y:c}),[E,R]=(0,i.useState)(!1),D=(0,i.useRef)(null),A=(0,i.useRef)(null);(0,i.useEffect)(()=>{S({x:r,y:c})},[r,c]);let J=(0,i.useCallback)(e=>{var s;e.preventDefault(),e.stopPropagation(),R(!0);let a=null==(s=D.current)?void 0:s.getSelfElement();if(!a)return;let i=a.parentElement;if(!i)return;let n=i.getBoundingClientRect(),l=n.left+z.x+o/2,r=n.top+z.y+d/2,c=e=>{if(0===e.touches.length)return;let s=e.touches[0].clientX-l;C(t,{rotation:180/Math.PI*Math.atan2(e.touches[0].clientY-r,s)+90})},m=()=>{R(!1),window.removeEventListener("touchmove",c),window.removeEventListener("touchend",m)};window.addEventListener("touchmove",c),window.addEventListener("touchend",m)},[t,C,z.x,z.y,o,d]);return(0,i.useEffect)(()=>{let e=A.current;if(e)return e.addEventListener("touchstart",J,{passive:!1}),()=>{e.removeEventListener("touchstart",J)}},[J]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(M.p,{ref:D,size:w?{width:"100%",height:"100%"}:{width:o,height:d},position:w?{x:0,y:0}:z,onDragStart:()=>{if(E||w)return!1},onDrag:(e,t)=>{E||w||S({x:t.x,y:t.y})},onDragStop:h,onResize:x,onResizeStop:u,lockAspectRatio:v,enableResizing:!w&&j,disableDragging:w||b||E,className:(0,y.cn)("border border-dashed border-transparent transition-colors duration-200",{"hover:border-gray-500":!w&&s}),onClick:p,style:{zIndex:k},children:(0,a.jsx)("div",{style:{width:"100%",height:"100%",transform:"rotate(".concat(m,"deg)"),transformOrigin:"center"},children:(0,a.jsx)("div",{style:{width:"100%",height:"100%",backgroundImage:n?"url(".concat(n,")"):"none",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},title:l})})}),s&&!g&&!w&&(0,a.jsx)("div",{ref:A,onMouseDown:e=>{var s;e.preventDefault(),e.stopPropagation(),R(!0);let a=null==(s=D.current)?void 0:s.getSelfElement();if(!a)return;let i=a.parentElement;if(!i)return;let n=i.getBoundingClientRect(),l=n.left+z.x+o/2,r=n.top+z.y+d/2,c=e=>{let s=e.clientX-l;C(t,{rotation:180/Math.PI*Math.atan2(e.clientY-r,s)+90})},m=()=>{R(!1),window.removeEventListener("mousemove",c),window.removeEventListener("mouseup",m)};window.addEventListener("mousemove",c),window.addEventListener("mouseup",m)},className:"absolute cursor-grab active:cursor-grabbing bg-white border rounded-full p-1 shadow z-50",style:{left:z.x+o/2,top:z.y-30,transform:"translateX(-50%)"},children:(0,a.jsx)($.A,{className:"h-4 w-4"})})]})}),F=(0,i.memo)(e=>{let{id:t,isSelected:s,shapeType:n,backgroundColor:l,borderColor:r,borderWidth:c,rotation:o,zIndex:d,onDragStop:m,onResize:h,onResizeStop:x,lockAspectRatio:u,enableResizing:p,disableDragging:g,x:f,y:v,width:j,height:b}=e,{updateLayer:w}=(0,N.S)(),[y,k]=(0,i.useState)({x:f||0,y:v||0}),[C,z]=(0,i.useState)(!1),S=(0,i.useRef)(null),E=(0,i.useRef)(null);(0,i.useEffect)(()=>{k({x:f||0,y:v||0})},[f,v]);let R=(0,i.useCallback)(e=>{var s;e.preventDefault(),e.stopPropagation(),z(!0);let a=null==(s=S.current)?void 0:s.getSelfElement();if(!a)return;let i=a.parentElement;if(!i)return;let n=i.getBoundingClientRect(),l=n.left+y.x+j/2,r=n.top+y.y+b/2,c=e=>{if(0===e.touches.length)return;let s=e.touches[0].clientX-l;w(t,{rotation:180/Math.PI*Math.atan2(e.touches[0].clientY-r,s)+90})},o=()=>{z(!1),window.removeEventListener("touchmove",c),window.removeEventListener("touchend",o)};window.addEventListener("touchmove",c),window.addEventListener("touchend",o)},[t,w,y.x,y.y,j,b]);return(0,i.useEffect)(()=>{let e=E.current;if(e)return e.addEventListener("touchstart",R,{passive:!1}),()=>{e.removeEventListener("touchstart",R)}},[R]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(M.p,{ref:S,size:{width:j,height:b},position:y,onDragStart:()=>{if(C)return!1},onDrag:(e,t)=>{C||k({x:t.x,y:t.y})},onDragStop:m,onResize:h,onResizeStop:x,lockAspectRatio:u,enableResizing:p,disableDragging:g||C,className:"border border-dashed border-transparent hover:border-gray-500 transition-colors duration-200",style:{zIndex:d},children:(0,a.jsx)("div",{style:{width:"100%",height:"100%",transform:"rotate(".concat(o,"deg)"),transformOrigin:"center"},children:(()=>{let e={width:"100%",height:"100%",style:{overflow:"visible"}};switch(n){case"line":return(0,a.jsx)("svg",{...e,children:(0,a.jsx)("line",{x1:0,y1:b/2,x2:j,y2:b/2,stroke:r,strokeWidth:c})});case"arrow":return(0,a.jsxs)("svg",{...e,children:[(0,a.jsx)("defs",{children:(0,a.jsx)("marker",{id:"arrowhead-".concat(t),markerWidth:"10",markerHeight:"7",refX:"10",refY:"3.5",orient:"auto",fill:r,children:(0,a.jsx)("polygon",{points:"0 0, 10 3.5, 0 7"})})}),(0,a.jsx)("line",{x1:0,y1:b/2,x2:j-10,y2:b/2,stroke:r,strokeWidth:c,markerEnd:"url(#arrowhead-".concat(t,")")})]});case"triangle":return(0,a.jsx)("svg",{...e,children:(0,a.jsx)("polygon",{points:"".concat(j/2,",0 0,").concat(b," ").concat(j,",").concat(b),fill:l,stroke:r,strokeWidth:c})});case"star":return(0,a.jsx)("svg",{...e,children:(0,a.jsx)("polygon",{points:"".concat(.5*j,",0 ").concat(.618*j,",").concat(.382*b," ").concat(j,",").concat(.382*b," ").concat(.691*j,",").concat(.618*b," ").concat(.809*j,",").concat(b," ").concat(.5*j,",").concat(.764*b," ").concat(.191*j,",").concat(b," ").concat(.309*j,",").concat(.618*b," 0,").concat(.382*b," ").concat(.382*j,",").concat(.382*b),fill:l,stroke:r,strokeWidth:c})});case"heart":return(0,a.jsx)("svg",{...e,children:(0,a.jsx)("path",{d:"M".concat(.5*j,",").concat(.9*b," C").concat(.5*j,",").concat(.9*b," ").concat(.1*j,",").concat(.5*b," ").concat(.1*j,",").concat(.3*b," C").concat(.1*j,",").concat(.15*b," ").concat(.25*j,",").concat(.1*b," ").concat(.4*j,",").concat(.1*b," C").concat(.5*j,",").concat(.1*b," ").concat(.5*j,",").concat(.2*b," ").concat(.5*j,",").concat(.2*b," C").concat(.5*j,",").concat(.2*b," ").concat(.5*j,",").concat(.1*b," ").concat(.6*j,",").concat(.1*b," C").concat(.75*j,",").concat(.1*b," ").concat(.9*j,",").concat(.15*b," ").concat(.9*j,",").concat(.3*b," C").concat(.9*j,",").concat(.5*b," ").concat(.5*j,",").concat(.9*b," ").concat(.5*j,",").concat(.9*b," Z"),fill:l,stroke:r,strokeWidth:c})});case"diamond":return(0,a.jsx)("svg",{...e,children:(0,a.jsx)("polygon",{points:"".concat(j/2,",0 ").concat(j,",").concat(b/2," ").concat(j/2,",").concat(b," 0,").concat(b/2),fill:l,stroke:r,strokeWidth:c})});case"polygon":return(0,a.jsx)("svg",{...e,children:(0,a.jsx)("polygon",{points:"".concat(.5*j,",0 ").concat(.9*j,",").concat(.3*b," ").concat(.7*j,",").concat(.9*b," ").concat(.3*j,",").concat(.9*b," ").concat(.1*j,",").concat(.3*b),fill:l,stroke:r,strokeWidth:c})});default:return(0,a.jsx)("div",{style:{width:"100%",height:"100%",backgroundColor:l,border:"".concat(c,"px solid ").concat(r),borderRadius:"circle"===n?"50%":"0"}})}})()})}),s&&(0,a.jsx)("div",{ref:E,onMouseDown:e=>{var s;e.preventDefault(),e.stopPropagation(),z(!0);let a=null==(s=S.current)?void 0:s.getSelfElement();if(!a)return;let i=a.parentElement;if(!i)return;let n=i.getBoundingClientRect(),l=n.left+y.x+j/2,r=n.top+y.y+b/2,c=e=>{let s=e.clientX-l;w(t,{rotation:180/Math.PI*Math.atan2(e.clientY-r,s)+90})},o=()=>{z(!1),window.removeEventListener("mousemove",c),window.removeEventListener("mouseup",o)};window.addEventListener("mousemove",c),window.addEventListener("mouseup",o)},className:"absolute cursor-grab active:cursor-grabbing bg-white border rounded-full p-1 shadow z-50",style:{left:y.x+j/2,top:y.y-30,transform:"translateX(-50%)"},children:(0,a.jsx)($.A,{className:"h-4 w-4"})})]})});var T=s(92248),L=s(73574),W=s(68421),P=s(1978),I=s(76856),X=s(60307),B=s(69025),O=s(9331),q=s(18581),H=s(69903),G=s(60248),V=s(68690),U=s(10502),Z=s(45874),Y=s(88076),_=s(25157),K=s(14202);let Q={web:[{name:"Web バナー (大)",width:1200,height:630,platform:"web"},{name:"Web バナー (中)",width:800,height:420,platform:"web"},{name:"Web バナー (小)",width:600,height:315,platform:"web"},{name:"ヘッダー画像",width:1920,height:400,platform:"web"}],social:[{name:"Twitter ヘッダー",width:1500,height:500,platform:"twitter"},{name:"Twitter 投稿",width:1200,height:675,platform:"twitter"},{name:"Instagram 投稿",width:1080,height:1080,platform:"instagram"},{name:"Instagram ストーリー",width:1080,height:1920,platform:"instagram"},{name:"Facebook カバー",width:1200,height:630,platform:"facebook"}],print:[{name:"A4 (300DPI)",width:2480,height:3508,platform:"print"},{name:"A3 (300DPI)",width:3508,height:4961,platform:"print"},{name:"名刺 (300DPI)",width:1063,height:638,platform:"print"},{name:"ポスター A2 (300DPI)",width:4961,height:7016,platform:"print"},{name:"フライヤー A5 (300DPI)",width:1748,height:2480,platform:"print"}],presentation:[{name:"スライド 16:9",width:1920,height:1080,platform:"presentation"},{name:"スライド 4:3",width:1024,height:768,platform:"presentation"},{name:"プレゼン用高解像度",width:3840,height:2160,platform:"presentation"}]},ee={low:{pixelRatio:1,label:"軽量 (1x)",description:"Web表示用"},medium:{pixelRatio:1.5,label:"標準 (1.5x)",description:"一般的な用途"},high:{pixelRatio:2,label:"高品質 (2x)",description:"Retina対応"},ultra:{pixelRatio:3,label:"超高品質 (3x)",description:"高解像度ディスプレイ"},print:{pixelRatio:4,label:"印刷用 (4x)",description:"300DPI印刷対応"}},et=e=>{let{onExport:t,isExporting:s=!1}=e,n=!(0,K.U)("(min-width: 768px)"),[c,d]=(0,i.useState)({resolution:"fhd",quality:"high",format:"png",pixelRatio:2,backgroundColor:"#ffffff",includeTransparency:!1,optimizeForPlatform:"general",batchExport:!1,batchSizes:[]}),[m,h]=(0,i.useState)("web"),[x,u]=(0,i.useState)([]),p=e=>{d(t=>({...t,...e}))},g=e=>{p({batchExport:!0,batchSizes:Q[e],optimizeForPlatform:"web"===e?"web":"print"===e?"print":"social",quality:"print"===e?"print":"high",format:"png",includeTransparency:"print"!==e}),h(e)},f=async()=>{let e=document.getElementById("download-target");if(!e)return void l.oR.error("プレビューエリアが見つかりません");try{await t(e,c)}catch(e){console.error("Export failed:",e),l.oR.error("エクスポートに失敗しました")}};return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)(w.Zp,{children:[(0,a.jsx)(w.aR,{className:"pb-3",children:(0,a.jsxs)(w.ZB,{className:"text-sm flex items-center gap-2",children:[(0,a.jsx)(O.A,{className:"h-4 w-4"}),"用途別プリセット"]})}),(0,a.jsx)(w.Wu,{className:"space-y-3",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsxs)(r.$,{variant:"web"===m?"default":"outline",size:n?"sm":"default",onClick:()=>g("web"),className:"flex items-center gap-2",children:[(0,a.jsx)(q.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Web用"}),(0,a.jsx)("span",{className:"sm:hidden",children:"Web"})]}),(0,a.jsxs)(r.$,{variant:"social"===m?"default":"outline",size:n?"sm":"default",onClick:()=>g("social"),className:"flex items-center gap-2",children:[(0,a.jsx)(H.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"SNS用"}),(0,a.jsx)("span",{className:"sm:hidden",children:"SNS"})]}),(0,a.jsxs)(r.$,{variant:"print"===m?"default":"outline",size:n?"sm":"default",onClick:()=>g("print"),className:"flex items-center gap-2",children:[(0,a.jsx)(G.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"印刷用"}),(0,a.jsx)("span",{className:"sm:hidden",children:"印刷"})]}),(0,a.jsxs)(r.$,{variant:"presentation"===m?"default":"outline",size:n?"sm":"default",onClick:()=>g("presentation"),className:"flex items-center gap-2",children:[(0,a.jsx)(V.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"プレゼン用"}),(0,a.jsx)("span",{className:"sm:hidden",children:"プレゼン"})]})]})})]}),(0,a.jsxs)(w.Zp,{children:[(0,a.jsx)(w.aR,{className:"pb-3",children:(0,a.jsxs)(w.ZB,{className:"text-sm flex items-center gap-2",children:[(0,a.jsx)(o.A,{className:"h-4 w-4"}),"基本設定"]})}),(0,a.jsxs)(w.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(v.J,{htmlFor:"resolution",children:"解像度"}),(0,a.jsxs)(I.l6,{value:c.resolution,onValueChange:e=>p({resolution:e}),children:[(0,a.jsx)(I.bq,{className:n?"h-10":"",children:(0,a.jsx)(I.yv,{})}),(0,a.jsxs)(I.gC,{children:[(0,a.jsx)(I.eb,{value:"hd",children:"HD (1280\xd7720)"}),(0,a.jsx)(I.eb,{value:"fhd",children:"Full HD (1920\xd71080)"}),(0,a.jsx)(I.eb,{value:"4k",children:"4K (3840\xd72160)"}),(0,a.jsx)(I.eb,{value:"print",children:"印刷用高解像度"}),(0,a.jsx)(I.eb,{value:"custom",children:"カスタム"})]})]})]}),"custom"===c.resolution&&(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(v.J,{htmlFor:"customWidth",children:"幅 (px)"}),(0,a.jsx)(j.p,{id:"customWidth",type:"number",value:c.customWidth||"",onChange:e=>p({customWidth:parseInt(e.target.value)||void 0}),placeholder:"1920",inputMode:"numeric",className:n?"h-10":""})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(v.J,{htmlFor:"customHeight",children:"高さ (px)"}),(0,a.jsx)(j.p,{id:"customHeight",type:"number",value:c.customHeight||"",onChange:e=>p({customHeight:parseInt(e.target.value)||void 0}),placeholder:"1080",inputMode:"numeric",className:n?"h-10":""})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(v.J,{htmlFor:"quality",children:"品質"}),(0,a.jsxs)(I.l6,{value:c.quality,onValueChange:e=>{let t=ee[e];p({quality:e,pixelRatio:t.pixelRatio})},children:[(0,a.jsx)(I.bq,{className:n?"h-10":"",children:(0,a.jsx)(I.yv,{})}),(0,a.jsx)(I.gC,{children:Object.entries(ee).map(e=>{let[t,s]=e;return(0,a.jsx)(I.eb,{value:t,children:(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{children:s.label}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:s.description})]})},t)})})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(v.J,{htmlFor:"format",children:"フォーマット"}),(0,a.jsxs)(I.l6,{value:c.format,onValueChange:e=>p({format:e}),children:[(0,a.jsx)(I.bq,{className:n?"h-10":"",children:(0,a.jsx)(I.yv,{})}),(0,a.jsxs)(I.gC,{children:[(0,a.jsx)(I.eb,{value:"png",children:"PNG (透明背景対応)"}),(0,a.jsx)(I.eb,{value:"jpeg",children:"JPEG (軽量)"})]})]})]}),"png"===c.format&&(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(X.S,{id:"transparency",checked:c.includeTransparency,onCheckedChange:e=>p({includeTransparency:e})}),(0,a.jsx)(v.J,{htmlFor:"transparency",className:"text-sm",children:"透明背景を使用"})]}),!c.includeTransparency&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(v.J,{htmlFor:"backgroundColor",children:"背景色"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(j.p,{id:"backgroundColor",type:"color",value:c.backgroundColor,onChange:e=>p({backgroundColor:e.target.value}),className:"w-12 h-10 p-1 border rounded"}),(0,a.jsx)(j.p,{value:c.backgroundColor,onChange:e=>p({backgroundColor:e.target.value}),placeholder:"#ffffff",className:(0,y.cn)("flex-1",n?"h-10":"")})]})]})]})]}),c.batchExport&&c.batchSizes.length>0&&(0,a.jsxs)(w.Zp,{children:[(0,a.jsx)(w.aR,{className:"pb-3",children:(0,a.jsxs)(w.ZB,{className:"text-sm flex items-center gap-2",children:[(0,a.jsx)(U.A,{className:"h-4 w-4"}),"バッチエクスポート"]})}),(0,a.jsx)(w.Wu,{children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"以下のサイズで一括エクスポートします:"}),(0,a.jsx)("div",{className:"grid gap-1",children:c.batchSizes.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-2 bg-muted rounded text-sm",children:[(0,a.jsx)("span",{children:e.name}),(0,a.jsxs)(B.E,{variant:"secondary",children:[e.width,"\xd7",e.height]})]},t))})]})})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(r.$,{onClick:f,disabled:s,className:(0,y.cn)("flex-1",n?"h-11":""),children:s?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Z.A,{className:"mr-2 h-4 w-4 animate-spin"}),"エクスポート中..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Y.A,{className:"mr-2 h-4 w-4"}),"エクスポート"]})}),(0,a.jsxs)(r.$,{variant:"outline",onClick:()=>{let e=prompt("プリセット名を入力してください:");if(e){let t={...c,name:e};u(e=>[...e,t]),l.oR.success('プリセット "'.concat(e,'" を保存しました'))}},disabled:s,className:n?"h-11":"",title:"現在の設定をプリセットとして保存",children:[(0,a.jsx)(_.A,{className:"h-4 w-4"}),n?"":"保存"]})]})]})},es=["image/jpeg","image/jpg","image/png","image/webp"];function ea(){let{isOpen:e,setIsOpen:t,isDesktop:b}=(0,h.c)({defaultOpen:!1,desktopDefaultOpen:!0}),[w,y]=i.useState("settings"),[k,C]=i.useState(!1),[z,S]=i.useState(!1),[R,M]=i.useState(!1),[$,I]=i.useState(!1),[X,B]=i.useState(!0),[O,q]=i.useState(!1),[H,G]=i.useState(20),{handleAsyncError:V}=(0,x.u)(),{selectedTemplate:U,setSelectedTemplate:Z,currentText:Y,setCurrentText:_,layers:K,addLayer:Q,removeLayer:ee,updateLayer:ea,selectedLayerId:ei,setSelectedLayerId:en,reorderLayers:el,duplicateLayer:er,moveLayerUp:ec,moveLayerDown:eo,aspectRatio:ed,customAspectRatio:em}=(0,N.S)(),eh=K.find(e=>e.id===ei),ex=i.useCallback(()=>{let t;return b?(t=R?{width:"min(2000px, 95vw)",maxWidth:"none"}:e?{width:"min(1500px, 75vw)",maxWidth:"none"}:{width:"min(1800px, 90vw)",maxWidth:"none"},E.vF.debug("Preview size",{isDesktop:b,isPreviewDedicatedMode:R,isSidebarOpen:e,size:t},"AssetCreator"),t):R?{width:"95vw",maxWidth:"none",maxHeight:"80vh"}:{width:"90vw",maxWidth:"none",maxHeight:"40vh"}},[b,R,e]),{zoom:eu,setZoom:ep,undo:eg,redo:ef,canUndo:ev,canRedo:ej,addToHistory:eN,resetHistoryFlag:eb,saveToLocalStorage:ew,loadFromLocalStorage:ey}=(0,P.Y)(K,ei);i.useEffect(()=>{let e=e=>{if("Shift"===e.key&&C(!0),e.ctrlKey||e.metaKey)switch(e.key){case"z":e.preventDefault(),e.shiftKey?ef()&&eb():eg()&&eb();break;case"y":e.preventDefault(),ef()&&eb();break;case"s":e.preventDefault(),ew(K,ei)?l.oR.success("プロジェクトを保存しました"):l.oR.error("保存に失敗しました")}},t=e=>{"Shift"===e.key&&C(!1)};return window.addEventListener("keydown",e),window.addEventListener("keyup",t),()=>{window.removeEventListener("keydown",e),window.removeEventListener("keyup",t)}},[eg,ef,eb,ew,K,ei]),i.useEffect(()=>{b?t(!0):t(!1)},[b]);let ek=i.useCallback(async(e,t)=>{S(!0);try{await V(async()=>{let a,i,r={width:1920,height:1080};switch(t.resolution){case"hd":r={width:1280,height:720};break;case"fhd":r={width:1920,height:1080};break;case"4k":r={width:3840,height:2160};break;case"print":r={width:2480,height:3508};break;case"custom":t.customWidth&&t.customHeight&&(r={width:t.customWidth,height:t.customHeight})}if("custom"!==ed){let[e,t]=ed.split(":").map(Number);e>0&&t>0&&(r.width=Math.round(r.height*(e/t)))}else if(em.width>0&&em.height>0){let e=em.width/em.height;r.width=Math.round(r.height*e)}let c={cacheBust:!0,pixelRatio:t.pixelRatio||2,quality:"png"===t.format?1:.9,backgroundColor:t.backgroundColor||(t.includeTransparency?"transparent":"#ffffff"),width:r.width,height:r.height,style:{transform:"scale(1)",transformOrigin:"top left"}};if("png"===t.format)a=await (0,n.$E)(e,c),i="asset-".concat(t.optimizeForPlatform,"-").concat(r.width,"x").concat(r.height,".png");else if("jpeg"===t.format){let{toJpeg:n}=await Promise.resolve().then(s.bind(s,79419));a=await n(e,c),i="asset-".concat(t.optimizeForPlatform,"-").concat(r.width,"x").concat(r.height,".jpg")}else a=await (0,n.$E)(e,c),i="asset-".concat(t.optimizeForPlatform,"-").concat(r.width,"x").concat(r.height,".png");let o=document.createElement("a");o.download=i,o.href=a,o.click(),l.oR.success("".concat(i," をエクスポートしました"))},"エクスポートに失敗しました")}finally{S(!1)}},[ed,em,V]),eC=i.useCallback(async(e,t)=>{S(!0);try{let a=t.batchSizes.map(async a=>{let i,l,r={cacheBust:!0,pixelRatio:t.pixelRatio||2,quality:"png"===t.format?1:.9,backgroundColor:t.backgroundColor||(t.includeTransparency?"transparent":"#ffffff"),width:a.width,height:a.height};if("png"===t.format)i=await (0,n.$E)(e,r),l="asset-".concat(a.platform,"-").concat(a.width,"x").concat(a.height,".png");else if("jpeg"===t.format){let{toJpeg:t}=await Promise.resolve().then(s.bind(s,79419));i=await t(e,r),l="asset-".concat(a.platform,"-").concat(a.width,"x").concat(a.height,".jpg")}else i=await (0,n.$E)(e,r),l="asset-".concat(a.platform,"-").concat(a.width,"x").concat(a.height,".png");let c=document.createElement("a");return c.download=l,c.href=i,c.click(),l}),i=await Promise.all(a);l.oR.success("".concat(i.length,"個のファイルをエクスポートしました"))}catch(e){E.vF.error("Batch export failed",e,"AssetCreator"),l.oR.error("バッチエクスポートに失敗しました")}finally{S(!1)}},[]),ez=i.useCallback(async e=>{let t=document.getElementById("download-target");if(!t)return void l.oR.error("プレビューエリアが見つかりません");try{await ek(t,{resolution:"super"===e?"4k":"high"===e?"fhd":"hd",quality:"high",format:"png",pixelRatio:"super"===e?4:"high"===e?2:1,backgroundColor:"#ffffff",includeTransparency:!1,optimizeForPlatform:"general",batchExport:!1,batchSizes:[]})}catch(e){E.vF.error("Export failed",e,"AssetCreator"),l.oR.error("エクスポートに失敗しました")}},[ek]),eS=i.useCallback((e,t,s)=>{ea(e,{x:s.x,y:s.y}),setTimeout(()=>eN(K,ei),0)},[ea,eN,K,ei]),eE=i.useCallback((e,t,s,a,i)=>{ea(e,{width:s.offsetWidth,height:s.offsetHeight,x:i.x,y:i.y}),setTimeout(()=>eN(K,ei),0)},[ea,eN,K,ei]),eR=e=>{let t=K.filter(e=>"shape"===e.type).length*(b?20:5),s=K.filter(t=>t.shapeType===e).length+1,a="",i=b?550:10,n=b?250:10,l=b?300:50,r=b?300:50,c=b?2:1,o=b?300:100,d=b?5:3;switch(e){case"rectangle":a="四角 ".concat(s);break;case"circle":a="円 ".concat(s);break;case"line":a="線 ".concat(s);break;case"arrow":a="矢印 ".concat(s)}Q({type:"shape",shapeType:e,name:a,visible:!0,locked:!1,x:i+t,y:n+t,width:"line"===e||"arrow"===e?o:l,height:"line"===e||"arrow"===e?d:r,backgroundColor:"#cccccc",borderColor:"#000000",borderWidth:c}),setTimeout(()=>eN(K,ei),0)},eD=i.useCallback(()=>{ew(K,ei)?l.oR.success("プロジェクトを保存しました"):l.oR.error("保存に失敗しました")},[ew,K,ei]),eM=i.useCallback(()=>{eg()&&(eb(),l.oR.success("操作を元に戻しました"))},[eg,eb]),e$=i.useCallback(()=>{ef()&&(eb(),l.oR.success("操作をやり直しました"))},[ef,eb]);if(!U)return(0,a.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,a.jsx)("p",{children:"テンプレートを読み込み中..."})});let eA=()=>{var e;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h4",{className:"font-medium",children:"基本情報"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(v.J,{className:"text-sm font-medium",children:"レイヤー名"}),(0,a.jsx)(j.p,{value:(null==eh?void 0:eh.name)||"",onChange:e=>eh&&ea(eh.id,{name:e.target.value}),className:"mt-1",placeholder:"レイヤー名を入力",disabled:!eh})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(v.J,{className:"text-sm font-medium",children:"X座標"}),(0,a.jsx)(j.p,{type:"number",value:(null==eh?void 0:eh.x)||0,onChange:e=>eh&&ea(eh.id,{x:Number(e.target.value)}),className:"mt-1",disabled:!eh})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(v.J,{className:"text-sm font-medium",children:"Y座標"}),(0,a.jsx)(j.p,{type:"number",value:(null==eh?void 0:eh.y)||0,onChange:e=>eh&&ea(eh.id,{y:Number(e.target.value)}),className:"mt-1",disabled:!eh})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(v.J,{className:"text-sm font-medium",children:"幅"}),(0,a.jsx)(j.p,{type:"number",value:(null==eh?void 0:eh.width)||0,onChange:e=>eh&&ea(eh.id,{width:Number(e.target.value)}),className:"mt-1",disabled:!eh})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(v.J,{className:"text-sm font-medium",children:"高さ"}),(0,a.jsx)(j.p,{type:"number",value:(null==eh?void 0:eh.height)||0,onChange:e=>eh&&ea(eh.id,{height:Number(e.target.value)}),className:"mt-1",disabled:!eh})]})]})]})]}),(null==eh?void 0:eh.type)==="text"&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h4",{className:"font-medium",children:"テキスト設定"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(v.J,{className:"text-sm font-medium",children:"テキスト"}),(0,a.jsx)(g.T,{value:eh.text||"",onChange:e=>ea(eh.id,{text:e.target.value}),className:"mt-1 min-h-[80px] resize-none",placeholder:"テキストを入力してください"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(v.J,{className:"text-sm font-medium",children:"フォントサイズ"}),(0,a.jsx)(f.A,{value:[parseFloat((null==(e=eh.fontSize)?void 0:e.replace("rem",""))||"2")],onValueChange:e=>{let[t]=e;return ea(eh.id,{fontSize:"".concat(t,"rem")})},min:.5,max:8,step:.1,className:"mt-2"}),(0,a.jsx)("div",{className:"text-xs text-gray-500 text-center mt-1",children:eh.fontSize||"2rem"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(v.J,{className:"text-sm font-medium",children:"色"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,a.jsx)("input",{type:"color",value:eh.color||"#ffffff",onChange:e=>ea(eh.id,{color:e.target.value}),className:"w-8 h-8 rounded border border-gray-300"}),(0,a.jsx)(j.p,{value:eh.color||"#ffffff",onChange:e=>ea(eh.id,{color:e.target.value}),className:"flex-1"})]})]})]})]})]}),(null==eh?void 0:eh.type)==="image"&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h4",{className:"font-medium",children:"画像設定"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(v.J,{className:"text-sm font-medium",children:"画像を変更"}),(0,a.jsx)(j.p,{type:"file",accept:"image/*",onChange:e=>{var t;let s=null==(t=e.target.files)?void 0:t[0];if(s){let e=URL.createObjectURL(s);ea(eh.id,{src:e})}},className:"mt-1"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(v.J,{className:"text-sm font-medium",children:"不透明度"}),(0,a.jsx)(f.A,{value:[eh.opacity||100],onValueChange:e=>{let[t]=e;return ea(eh.id,{opacity:t})},min:0,max:100,step:1,className:"mt-2"}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 text-center mt-1",children:[eh.opacity||100,"%"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(v.J,{className:"text-sm font-medium",children:"回転角度"}),(0,a.jsx)(f.A,{value:[eh.rotation||0],onValueChange:e=>{let[t]=e;return ea(eh.id,{rotation:t})},min:-180,max:180,step:1,className:"mt-2"}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 text-center mt-1",children:[eh.rotation||0,"\xb0"]})]})]})]}),(null==eh?void 0:eh.type)==="shape"&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h4",{className:"font-medium",children:"図形設定"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(v.J,{className:"text-sm font-medium",children:"図形の種類"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[(0,a.jsx)(r.$,{variant:"rectangle"===eh.shapeType?"default":"outline",onClick:()=>ea(eh.id,{shapeType:"rectangle"}),size:"sm",children:"四角形"}),(0,a.jsx)(r.$,{variant:"circle"===eh.shapeType?"default":"outline",onClick:()=>ea(eh.id,{shapeType:"circle"}),size:"sm",children:"円"}),(0,a.jsx)(r.$,{variant:"line"===eh.shapeType?"default":"outline",onClick:()=>ea(eh.id,{shapeType:"line"}),size:"sm",children:"線"}),(0,a.jsx)(r.$,{variant:"arrow"===eh.shapeType?"default":"outline",onClick:()=>ea(eh.id,{shapeType:"arrow"}),size:"sm",children:"矢印"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(v.J,{className:"text-sm font-medium",children:"塗りつぶし色"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,a.jsx)("input",{type:"color",value:eh.backgroundColor||"#000000",onChange:e=>ea(eh.id,{backgroundColor:e.target.value}),className:"w-8 h-8 rounded border border-gray-300"}),(0,a.jsx)(j.p,{value:eh.backgroundColor||"#000000",onChange:e=>ea(eh.id,{backgroundColor:e.target.value}),className:"flex-1"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(v.J,{className:"text-sm font-medium",children:"境界線色"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,a.jsx)("input",{type:"color",value:eh.borderColor||"#000000",onChange:e=>ea(eh.id,{borderColor:e.target.value}),className:"w-8 h-8 rounded border border-gray-300"}),(0,a.jsx)(j.p,{value:eh.borderColor||"#000000",onChange:e=>ea(eh.id,{borderColor:e.target.value}),className:"flex-1"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(v.J,{className:"text-sm font-medium",children:"境界線の太さ"}),(0,a.jsx)(f.A,{value:[eh.borderWidth||0],onValueChange:e=>{let[t]=e;return ea(eh.id,{borderWidth:t})},min:0,max:20,step:1,className:"mt-2"}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 text-center mt-1",children:[eh.borderWidth||0,"px"]})]})]})]}),!eh&&(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"レイヤーを選択してください"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"レイヤーパネルからレイヤーを選択すると、ここで詳細設定ができます"})]})]})},eJ=(0,a.jsxs)(p.tU,{value:w,onValueChange:y,className:"w-full",children:[(0,a.jsxs)(p.j7,{className:"grid w-full grid-cols-4",children:[(0,a.jsx)(p.Xi,{value:"settings",children:"テンプレート"}),(0,a.jsx)(p.Xi,{value:"tools",children:"ツール"}),(0,a.jsx)(p.Xi,{value:"layers",children:"レイヤー"}),(0,a.jsx)(p.Xi,{value:"export",children:"エクスポート"})]}),(0,a.jsx)(p.av,{value:"settings",className:"mt-4",children:(0,a.jsx)(D,{onSelectTemplate:Z,selectedTemplateId:U.id})}),(0,a.jsx)(p.av,{value:"tools",className:"mt-4",children:eA()}),(0,a.jsx)(p.av,{value:"layers",className:"mt-4",children:(0,a.jsx)(T.G,{context:{layers:K,updateLayer:ea,removeLayer:ee,selectedLayerId:ei,setSelectedLayerId:en,reorderLayers:el,duplicateLayer:er,addLayer:Q,moveLayerUp:ec,moveLayerDown:eo},onShapeSelect:e=>eR(e),showShapeSelector:!0})}),(0,a.jsx)(p.av,{value:"export",className:"mt-4",children:(0,a.jsx)(et,{onExport:(e,t)=>t.batchExport&&t.batchSizes.length>0?eC(e,t):ek(e,t),isExporting:z})})]}),eF=(0,a.jsxs)(p.tU,{value:w,onValueChange:y,className:"w-full",children:[(0,a.jsxs)(p.j7,{className:"grid w-full grid-cols-2 h-12",children:[(0,a.jsx)(p.Xi,{value:"settings",className:"text-xs",children:"テンプレート"}),(0,a.jsx)(p.Xi,{value:"export",className:"text-xs",children:"エクスポート"})]}),(0,a.jsx)(p.av,{value:"settings",className:"mt-4",children:(0,a.jsx)(D,{onSelectTemplate:Z,selectedTemplateId:U.id})}),(0,a.jsx)(p.av,{value:"export",className:"mt-4",children:(0,a.jsx)(et,{onExport:(e,t)=>t.batchExport&&t.batchSizes.length>0?eC(e,t):ek(e,t),isExporting:z})})]});return(0,a.jsxs)("div",{className:"relative flex flex-col lg:h-screen",children:[e&&!b&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-30 lg:hidden",onClick:()=>t(!1)}),(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row flex-grow lg:h-full",children:[(0,a.jsxs)("main",{className:"flex-1 flex flex-col lg:h-full p-2 pt-16 lg:p-4 lg:pt-4",children:[(0,a.jsx)("div",{className:"".concat(b?"flex-1 flex flex-col min-h-[600px] lg:min-h-0":"flex-shrink-0"),children:(0,a.jsxs)(a.Fragment,{children:[b&&(0,a.jsx)(L.M,{zoom:eu,setZoom:ep,onUndo:eM,onRedo:e$,onSave:eD,onDownload:ez,canUndo:ev,canRedo:ej,isPreviewDedicatedMode:R,onTogglePreviewMode:()=>M(!R)}),!b&&R&&(0,a.jsx)("div",{className:"absolute top-2 left-2 z-20",children:(0,a.jsxs)(r.$,{size:"sm",variant:"outline",onClick:()=>M(!1),className:"bg-background/90 backdrop-blur-sm shadow-lg",children:[(0,a.jsx)(c.A,{className:"h-4 w-4 mr-1"}),"通常表示に戻る"]})}),(0,a.jsx)("div",{className:"".concat(b?"flex-1 overflow-auto bg-gray-100 dark:bg-gray-900 relative":"flex-shrink-0 bg-gray-100 dark:bg-gray-900 relative max-h-[50vh] overflow-auto"),children:(0,a.jsx)("div",{className:"".concat(b?"flex items-center justify-center h-full p-4 lg:p-8":"flex items-center justify-center p-4"),children:(0,a.jsx)(W.Z,{zoom:eu,onZoomReset:()=>ep(1),className:"w-full",aspectRatio:ed,customAspectRatio:em,showGrid:$,setShowGrid:I,showAspectGuide:X,setShowAspectGuide:B,showSafeArea:O,setShowSafeArea:q,gridSize:H,setGridSize:G,children:(0,a.jsx)("div",{id:"thumbnail-preview",style:{aspectRatio:"custom"===ed?"".concat(em.width," / ").concat(em.height):ed.replace(":"," / "),...ex()},className:"bg-card relative border rounded-md shadow-lg",children:(0,a.jsx)("div",{id:"download-target",className:"w-full h-full relative overflow-hidden",children:K.map(e=>{let t=e.id===ei,s=t&&!e.locked,i=t&&!e.locked;return e.visible?"image"===e.type?(0,a.jsx)(J,{id:e.id,isSelected:t,src:e.src||"",alt:e.name,x:e.x,y:e.y,width:e.width,height:e.height,rotation:e.rotation,onDragStop:(t,s)=>eS(e.id,t,s),onResize:(t,s,a,i,n)=>eE(e.id,s,a,i,n),onResizeStop:(t,s,a,i,n)=>eE(e.id,s,a,i,n),lockAspectRatio:k,enableResizing:i,disableDragging:!s,onSelect:()=>en(e.id),isLocked:e.locked,isDraggable:s,onRotateStart:()=>{},onRotate:()=>{},onRotateStop:()=>{},isBackground:e.isBackground,zIndex:e.zIndex},e.id):"text"===e.type?(0,a.jsx)(A,{id:e.id,isSelected:t,text:e.text||"",color:e.color||"#000000",fontSize:e.fontSize||"1rem",x:e.x,y:e.y,width:e.width,height:e.height,rotation:e.rotation,onDragStop:(t,s)=>eS(e.id,t,s),onResizeStop:(t,s,a,i,n)=>eE(e.id,s,a,i,n),enableResizing:i,disableDragging:!s,zIndex:e.zIndex},e.id):"shape"===e.type&&e.shapeType?(0,a.jsx)(F,{id:e.id,isSelected:t,shapeType:e.shapeType,backgroundColor:e.backgroundColor||"#cccccc",borderColor:e.borderColor||"#000000",borderWidth:e.borderWidth||0,x:e.x,y:e.y,width:e.width,height:e.height,rotation:e.rotation,onDragStop:(t,s)=>eS(e.id,t,s),onResize:(t,s,a,i,n)=>eE(e.id,s,a,i,n),onResizeStop:(t,s,a,i,n)=>eE(e.id,s,a,i,n),lockAspectRatio:k,enableResizing:i,disableDragging:!s,zIndex:e.zIndex},e.id):null:null})})})})})})]})}),!b&&!R&&(0,a.jsxs)("div",{className:"border-t bg-background/95 backdrop-blur-sm",children:[(0,a.jsx)("div",{className:"p-2",children:(0,a.jsx)("p",{className:"text-xs text-muted-foreground mb-2",children:"\uD83D\uDCA1 ヒント: 「ツール設定」でレイヤーの詳細編集、「レイヤー管理」でレイヤーの並び替えができます。テンプレートやエクスポートはサイドバーからアクセスできます。"})}),(0,a.jsxs)("div",{className:"p-2 lg:p-4 space-y-3",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-muted-foreground",children:"クイックアクセス"}),(0,a.jsx)(p.tU,{value:w,onValueChange:y,className:"w-full",children:(0,a.jsxs)(p.j7,{className:"w-full h-12 items-center justify-center rounded-md bg-secondary p-1 text-secondary-foreground",children:[(0,a.jsx)(p.Xi,{value:"tools",className:"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-2 text-xs font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",children:"ツール設定"}),(0,a.jsx)(p.Xi,{value:"layers",className:"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-2 text-xs font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",children:"レイヤー管理"}),(0,a.jsx)(p.Xi,{value:"edit",className:"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-2 text-xs font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",children:"レイヤー編集"}),(0,a.jsx)(p.Xi,{value:"preview",className:"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-2 text-xs font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",children:"プレビュー"})]})})]}),"tools"===w&&(0,a.jsxs)("div",{className:"space-y-3 border-t pt-3",children:[(0,a.jsx)("h4",{className:"text-sm font-medium",children:"ツール設定"}),eA()]}),"layers"===w&&(0,a.jsxs)("div",{className:"space-y-3 border-t pt-3",children:[(0,a.jsx)("h4",{className:"text-sm font-medium",children:"レイヤー管理"}),(0,a.jsx)(T.G,{context:{layers:K,updateLayer:ea,removeLayer:ee,selectedLayerId:ei,setSelectedLayerId:en,reorderLayers:el,duplicateLayer:er,addLayer:Q,moveLayerUp:ec,moveLayerDown:eo},onShapeSelect:e=>eR(e),showShapeSelector:!0})]}),"edit"===w&&(0,a.jsxs)("div",{className:"space-y-3 border-t pt-3",children:[(0,a.jsx)("h4",{className:"text-sm font-medium",children:"レイヤー編集"}),eh?(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"p-2 bg-secondary/50 rounded-md",children:[(0,a.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"選択中"}),(0,a.jsx)("p",{className:"text-sm font-medium",children:eh.name})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(v.J,{className:"text-xs font-medium",children:"\uD83D\uDCD0 位置"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(r.$,{size:"sm",variant:"outline",onClick:()=>{"number"==typeof eh.x&&ea(eh.id,{x:eh.x-10})},className:"h-7 w-7 p-0",children:"←"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)(v.J,{className:"text-xs text-muted-foreground",children:"X"}),(0,a.jsx)(j.p,{type:"number",inputMode:"numeric",value:"number"==typeof eh.x?Math.round(eh.x):0,onChange:e=>ea(eh.id,{x:Number(e.target.value)}),className:"h-7 text-xs"})]}),(0,a.jsx)(r.$,{size:"sm",variant:"outline",onClick:()=>{"number"==typeof eh.x&&ea(eh.id,{x:eh.x+10})},className:"h-7 w-7 p-0",children:"→"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(r.$,{size:"sm",variant:"outline",onClick:()=>{"number"==typeof eh.y&&ea(eh.id,{y:eh.y-10})},className:"h-7 w-7 p-0",children:"↑"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)(v.J,{className:"text-xs text-muted-foreground",children:"Y"}),(0,a.jsx)(j.p,{type:"number",inputMode:"numeric",value:"number"==typeof eh.y?Math.round(eh.y):0,onChange:e=>ea(eh.id,{y:Number(e.target.value)}),className:"h-7 text-xs"})]}),(0,a.jsx)(r.$,{size:"sm",variant:"outline",onClick:()=>{"number"==typeof eh.y&&ea(eh.id,{y:eh.y+10})},className:"h-7 w-7 p-0",children:"↓"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(v.J,{className:"text-xs font-medium",children:"\uD83D\uDCCF サイズ"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(r.$,{size:"sm",variant:"outline",onClick:()=>{"number"==typeof eh.width&&ea(eh.id,{width:Math.max(10,eh.width-20)})},className:"h-7 w-7 p-0",children:"−"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)(v.J,{className:"text-xs text-muted-foreground",children:"幅"}),(0,a.jsx)(j.p,{type:"number",inputMode:"numeric",value:"number"==typeof eh.width?Math.round(eh.width):0,onChange:e=>ea(eh.id,{width:Math.max(10,Number(e.target.value))}),className:"h-7 text-xs"})]}),(0,a.jsx)(r.$,{size:"sm",variant:"outline",onClick:()=>{"number"==typeof eh.width&&ea(eh.id,{width:eh.width+20})},className:"h-7 w-7 p-0",children:"+"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(r.$,{size:"sm",variant:"outline",onClick:()=>{"number"==typeof eh.height&&ea(eh.id,{height:Math.max(10,eh.height-20)})},className:"h-7 w-7 p-0",children:"−"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)(v.J,{className:"text-xs text-muted-foreground",children:"高さ"}),(0,a.jsx)(j.p,{type:"number",inputMode:"numeric",value:"number"==typeof eh.height?Math.round(eh.height):0,onChange:e=>ea(eh.id,{height:Math.max(10,Number(e.target.value))}),className:"h-7 text-xs"})]}),(0,a.jsx)(r.$,{size:"sm",variant:"outline",onClick:()=>{"number"==typeof eh.height&&ea(eh.id,{height:eh.height+20})},className:"h-7 w-7 p-0",children:"+"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(v.J,{className:"text-xs font-medium",children:"\uD83D\uDD04 回転"}),(0,a.jsxs)("div",{className:"flex gap-1 items-center",children:[(0,a.jsx)(r.$,{size:"sm",variant:"outline",onClick:()=>ea(eh.id,{rotation:(eh.rotation||0)-15}),className:"h-7 w-7 p-0",title:"反時計回り 15\xb0",children:"↺"}),(0,a.jsx)(r.$,{size:"sm",variant:"outline",onClick:()=>ea(eh.id,{rotation:(eh.rotation||0)-5}),className:"h-7 w-7 p-0",title:"反時計回り 5\xb0",children:"↶"}),(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)(j.p,{type:"number",inputMode:"numeric",value:Math.round(eh.rotation||0),onChange:e=>ea(eh.id,{rotation:Number(e.target.value)}),className:"h-7 text-xs text-center",placeholder:"角度"})}),(0,a.jsx)(r.$,{size:"sm",variant:"outline",onClick:()=>ea(eh.id,{rotation:(eh.rotation||0)+5}),className:"h-7 w-7 p-0",title:"時計回り 5\xb0",children:"↷"}),(0,a.jsx)(r.$,{size:"sm",variant:"outline",onClick:()=>ea(eh.id,{rotation:(eh.rotation||0)+15}),className:"h-7 w-7 p-0",title:"時計回り 15\xb0",children:"↻"}),(0,a.jsx)(r.$,{size:"sm",variant:"outline",onClick:()=>ea(eh.id,{rotation:0}),className:"h-7 px-2 text-xs",children:"0\xb0"})]})]}),"text"===eh.type&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(v.J,{className:"text-xs font-medium",children:"✏️ テキスト設定"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(g.T,{value:eh.text||"",onChange:e=>ea(eh.id,{text:e.target.value}),className:"text-xs min-h-[60px] resize-none",placeholder:"テキストを入力"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(v.J,{className:"text-xs text-muted-foreground w-8",children:"色"}),(0,a.jsx)("input",{type:"color",value:eh.color||"#000000",onChange:e=>ea(eh.id,{color:e.target.value}),className:"w-8 h-7 rounded border"}),(0,a.jsx)(j.p,{value:eh.color||"#000000",onChange:e=>ea(eh.id,{color:e.target.value}),className:"h-7 text-xs flex-1",placeholder:"#000000"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(r.$,{size:"sm",variant:"outline",onClick:()=>{let e=Math.max(.5,parseFloat(eh.fontSize||"1rem")-.25);ea(eh.id,{fontSize:"".concat(e,"rem")})},className:"h-7 w-7 p-0",children:"−"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)(v.J,{className:"text-xs text-muted-foreground",children:"サイズ"}),(0,a.jsx)(j.p,{value:eh.fontSize||"1rem",onChange:e=>ea(eh.id,{fontSize:e.target.value}),className:"h-7 text-xs",placeholder:"1rem"})]}),(0,a.jsx)(r.$,{size:"sm",variant:"outline",onClick:()=>{let e=parseFloat(eh.fontSize||"1rem");ea(eh.id,{fontSize:"".concat(e+.25,"rem")})},className:"h-7 w-7 p-0",children:"+"})]})]})]})]})]}):(0,a.jsx)("div",{className:"p-4 text-center text-muted-foreground",children:(0,a.jsx)("p",{className:"text-xs",children:"レイヤーを選択してください"})})]}),"preview"===w&&(0,a.jsxs)("div",{className:"space-y-3 border-t pt-3",children:[(0,a.jsx)("h4",{className:"text-sm font-medium",children:"プレビュー設定"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(v.J,{className:"text-xs font-medium",children:"\uD83D\uDD0D ズーム"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(r.$,{size:"sm",variant:"outline",onClick:()=>ep(Math.max(.25,eu-.25)),className:"h-8 w-8 p-0",disabled:eu<=.25,children:"−"}),(0,a.jsx)("div",{className:"flex-1 text-center",children:(0,a.jsxs)("span",{className:"text-xs text-muted-foreground",children:[Math.round(100*eu),"%"]})}),(0,a.jsx)(r.$,{size:"sm",variant:"outline",onClick:()=>ep(Math.min(4,eu+.25)),className:"h-8 w-8 p-0",disabled:eu>=4,children:"+"})]}),(0,a.jsx)(r.$,{size:"sm",variant:"outline",onClick:()=>ep(1),className:"w-full h-8",children:"リセット (100%)"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(v.J,{className:"text-xs font-medium",children:"\uD83D\uDCCA プレビュー情報"}),(0,a.jsxs)("div",{className:"space-y-1 text-xs",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"アスペクト比:"}),(0,a.jsx)("span",{className:"font-medium",children:"custom"===ed?"".concat(em.width,":").concat(em.height):ed||"16:9"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"ズーム率:"}),(0,a.jsxs)("span",{className:"font-medium",children:[Math.round(100*eu),"%"]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"グリッド:"}),(0,a.jsx)("span",{className:"font-medium",children:"40px"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(v.J,{className:"text-xs font-medium",children:"⚙️ プレビュー設定"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(v.J,{className:"text-xs text-muted-foreground",children:"グリッド表示"}),(0,a.jsx)(r.$,{size:"sm",variant:$?"default":"outline",onClick:()=>I(!$),className:"h-6 px-2 text-xs",children:$?"ON":"OFF"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(v.J,{className:"text-xs text-muted-foreground",children:"アスペクト比ガイド"}),(0,a.jsx)(r.$,{size:"sm",variant:X?"default":"outline",onClick:()=>B(!X),className:"h-6 px-2 text-xs",children:X?"ON":"OFF"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(v.J,{className:"text-xs text-muted-foreground",children:"セーフエリア"}),(0,a.jsx)(r.$,{size:"sm",variant:O?"default":"outline",onClick:()=>q(!O),className:"h-6 px-2 text-xs",children:O?"ON":"OFF"})]}),$&&(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(v.J,{className:"text-xs text-muted-foreground",children:"グリッドサイズ"}),(0,a.jsxs)("div",{className:"flex gap-1",children:[(0,a.jsx)(r.$,{size:"sm",variant:10===H?"default":"outline",onClick:()=>G(10),className:"h-6 px-2 text-xs flex-1",children:"10px"}),(0,a.jsx)(r.$,{size:"sm",variant:20===H?"default":"outline",onClick:()=>G(20),className:"h-6 px-2 text-xs flex-1",children:"20px"}),(0,a.jsx)(r.$,{size:"sm",variant:40===H?"default":"outline",onClick:()=>G(40),className:"h-6 px-2 text-xs flex-1",children:"40px"})]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(v.J,{className:"text-xs font-medium",children:"\uD83D\uDCFA 表示モード"}),(0,a.jsx)(r.$,{size:"sm",variant:R?"default":"outline",onClick:()=>M(!R),className:"w-full h-8",children:R?"通常表示に戻る":"フルスクリーン表示"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(v.J,{className:"text-xs font-medium",children:"\uD83D\uDCBE 保存・出力"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsx)(r.$,{size:"sm",variant:"outline",onClick:eD,className:"h-8",children:"保存"}),(0,a.jsx)(r.$,{size:"sm",variant:"outline",onClick:()=>ez("high"),className:"h-8",children:"ダウンロード"})]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-muted-foreground",children:"レイヤーを追加"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsxs)(r.$,{variant:"outline",size:"sm",onClick:()=>{Q({type:"text",name:"テキスト ".concat(K.filter(e=>"text"===e.type).length+1),visible:!0,locked:!1,x:b?550:50,y:b?250:50,width:b?300:150,height:b?100:50,text:Y,color:"#000000",fontSize:b?"2rem":"1rem"}),setTimeout(()=>eN(K,ei),0)},className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-lg",children:"T"}),(0,a.jsx)("span",{children:"テキスト"})]}),(0,a.jsxs)(r.$,{variant:"outline",size:"sm",onClick:()=>{var e;return null==(e=document.getElementById("image-upload"))?void 0:e.click()},className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-lg",children:"\uD83D\uDDBC️"}),(0,a.jsx)("span",{children:"画像"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsxs)(r.$,{variant:"outline",size:"sm",onClick:()=>eR("rectangle"),className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-lg",children:"⬜"}),(0,a.jsx)("span",{children:"四角"})]}),(0,a.jsxs)(r.$,{variant:"outline",size:"sm",onClick:()=>eR("circle"),className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-lg",children:"⭕"}),(0,a.jsx)("span",{children:"円"})]})]}),(0,a.jsx)("input",{id:"image-upload",type:"file",accept:"image/*",onChange:e=>{let t=e.target.files;if(t){for(let e of Array.from(t)){if(e.size>0xa00000){l.oR.error("ファイルサイズが大きすぎます: ".concat(e.name),{description:"10MB以下のファイルを選択してください。"});continue}if(!es.includes(e.type)){l.oR.error("ファイル形式が無効です: ".concat(e.name),{description:"JPEG, PNG, WEBP形式の画像ファイルを選択してください。"});continue}let t=URL.createObjectURL(e);Q({type:"image",name:e.name,visible:!0,locked:!1,x:b?550:50,y:b?250:50,width:b?300:150,height:b?300:150,src:t})}e.target.value=""}},className:"hidden",multiple:!0})]})]})]})]}),!e&&(0,a.jsx)(u.R,{onOpen:()=>t(!0),isDesktop:b,tabs:[{id:"settings",label:"テンプレート",icon:(0,a.jsx)(o.A,{className:"h-4 w-4"})},{id:"tools",label:"ツール",icon:(0,a.jsx)(d.A,{className:"h-4 w-4"})},{id:"layers",label:"レイヤー",icon:(0,a.jsx)(m.A,{className:"h-4 w-4"})}],onTabClick:e=>{E.vF.debug("Tab clicked",{tabId:e},"AssetCreator")}}),!R&&(0,a.jsx)(u.B,{isOpen:e,onClose:()=>t(!1),title:"",isDesktop:b,className:"".concat(b?"lg:w-96":"w-full max-w-sm"),children:b?eJ:eF})]})]})}function ei(){return(0,a.jsx)(N.U,{children:(0,a.jsx)(ea,{})})}},67816:(e,t,s)=>{Promise.resolve().then(s.bind(s,51424))}},e=>{e.O(0,[96,76,358],()=>e(e.s=67816)),_N_E=e.O()}]);