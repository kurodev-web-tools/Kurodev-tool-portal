(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[64],{34085:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>eC});var i=a(18841),s=a(58669),l=a(26059),r=a(65939),o=a(28198),n=a(98356),c=a(77902),d=a(61197),x=a(2570),m=a(33544),p=a(44166),u=a(59172),h=a(30897),g=a(7934),v=a(74020);let f=(0,s.createContext)(null),j={id:"default",name:"デフォルト",genre:"simple",initialText:"テキスト",initialTextColor:"#000000",initialFontSize:"4rem",initialImageSrc:"",supportedAspectRatios:["1:1","4:3","9:16","16:9"]},b=e=>{let{children:t}=e,[a,l]=(0,s.useState)(j),[r,o]=(0,s.useState)(j.initialText),[n,c]=(0,s.useState)("16:9"),[d,x]=(0,s.useState)({width:16,height:9}),m=(0,s.useCallback)((e,t)=>{u([...e]),g(t)},[]),[p,u]=(0,s.useState)([]),[h,g]=(0,s.useState)(null),b=(0,s.useCallback)(e=>{let t={...e,id:(0,v.A)(),rotation:0,zIndex:0};u(e=>{let a=[t,...e];return a.map((e,t)=>({...e,zIndex:a.length-1-t}))}),g(t.id)},[]),A=(0,s.useCallback)(e=>{u(t=>t.filter(t=>t.id!==e)),h===e&&g(null)},[h]),N=(0,s.useCallback)((e,t)=>{u(a=>a.map(a=>a.id===e?{...a,...t}:a))},[]),S=(0,s.useCallback)((e,t)=>{u(a=>{let i=Array.from(a),[s]=i.splice(e,1);return i.splice(t,0,s),i.map((e,t)=>({...e,zIndex:i.length-1-t}))})},[]),w=(0,s.useCallback)(e=>{u(t=>{let a=t.find(t=>t.id===e);if(!a)return t;let i={...a,id:(0,v.A)(),name:"".concat(a.name,"のコピー"),x:a.x+20,y:a.y+20},s=t.findIndex(t=>t.id===e),l=[...t];return l.splice(s+1,0,i),l.map((e,t)=>({...e,zIndex:l.length-1-t}))})},[]),y=(0,s.useCallback)(e=>{u(t=>{let a=t.findIndex(t=>t.id===e);if(a<=0)return t;let i=[...t],[s]=i.splice(a,1);return i.splice(a-1,0,s),i.map((e,t)=>({...e,zIndex:i.length-1-t}))})},[]),_=(0,s.useCallback)(e=>{u(t=>{let a=t.findIndex(t=>t.id===e);if(a<0||a>=t.length-1)return t;let i=[...t],[s]=i.splice(a,1);return i.splice(a+1,0,s),i.map((e,t)=>({...e,zIndex:i.length-1-t}))})},[]);(0,s.useEffect)(()=>{var e,t,i,s,l;let r=[];if(!a){u([]),g(null);return}if(a.initialImageSrc){let e={id:"background-image",type:"image",name:"背景画像",visible:!0,locked:!1,x:0,y:0,width:1920,height:1080,rotation:0,src:a.initialImageSrc,zIndex:0,isBackground:!0};r.push(e)}a.initialText&&r.push({id:(0,v.A)(),type:"text",name:"テキスト",visible:!0,locked:!1,x:(null==(t=a.initialTextPosition)?void 0:t.x)||50,y:(null==(i=a.initialTextPosition)?void 0:i.y)||50,width:(null==(s=a.initialTextPosition)?void 0:s.width)||300,height:(null==(l=a.initialTextPosition)?void 0:l.height)||100,rotation:0,text:a.initialText,color:a.initialTextColor,fontSize:a.initialFontSize,zIndex:0});let o=r.reverse().map((e,t)=>({...e,zIndex:r.length-1-t}));u(o),g(o.length>0&&(null==(e=o[0])?void 0:e.id)||null)},[a,n,d]);let C=(0,s.useMemo)(()=>({selectedTemplate:a,setSelectedTemplate:l,currentText:r,setCurrentText:o,layers:p,setLayers:u,addLayer:b,removeLayer:A,updateLayer:N,selectedLayerId:h,setSelectedLayerId:g,reorderLayers:S,duplicateLayer:w,moveLayerUp:y,moveLayerDown:_,aspectRatio:n,setAspectRatio:c,customAspectRatio:d,setCustomAspectRatio:x,restoreState:m}),[a,r,p,h,b,A,N,S,w,y,_,n,d,m]);return(0,i.jsx)(f.Provider,{value:C,children:t})},A=()=>{let e=(0,s.useContext)(f);if(!e)throw Error("useTemplate must be used within a TemplateProvider");return e};var N=a(78071),S=a(44909),w=a(65724),y=a(47049),_=a(98156),C=a(53333),T=a(10768),F=a(40987),R=a(79706),z=a(43210),k=a(58935),I=a(38479),E=a(28775);let K=JSON.parse('{"templates":[{"id":"cool_1x1_001","name":"cool 1x1 001","genre":"cool","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/cool/1x1/cool_1x1_001.jpg","supportedAspectRatios":["1:1"]},{"id":"cool_1x1_002","name":"cool 1x1 002","genre":"cool","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/cool/1x1/cool_1x1_002.jpg","supportedAspectRatios":["1:1"]},{"id":"cool_1x1_003","name":"cool 1x1 003","genre":"cool","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/cool/1x1/cool_1x1_003.jpg","supportedAspectRatios":["1:1"]},{"id":"cool_1x1_004","name":"cool 1x1 004","genre":"cool","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/cool/1x1/cool_1x1_004.jpg","supportedAspectRatios":["1:1"]},{"id":"cool_1x1_005","name":"cool 1x1 005","genre":"cool","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/cool/1x1/cool_1x1_005.jpg","supportedAspectRatios":["1:1"]},{"id":"cool_1x1_006","name":"cool 1x1 006","genre":"cool","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/cool/1x1/cool_1x1_006.jpg","supportedAspectRatios":["1:1"]},{"id":"cool_1x1_007","name":"cool 1x1 007","genre":"cool","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/cool/1x1/cool_1x1_007.jpg","supportedAspectRatios":["1:1"]},{"id":"cool_1x1_008","name":"cool 1x1 008","genre":"cool","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/cool/1x1/cool_1x1_008.jpg","supportedAspectRatios":["1:1"]},{"id":"cool_1x1_009","name":"cool 1x1 009","genre":"cool","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/cool/1x1/cool_1x1_009.jpg","supportedAspectRatios":["1:1"]},{"id":"test_auto_conversion","name":"cool 1x1 conversion","genre":"cool","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/cool/1x1/test_auto_conversion.jpg","supportedAspectRatios":["1:1"]},{"id":"test_auto_webp","name":"cool 1x1 webp","genre":"cool","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/cool/1x1/test_auto_webp.jpg","supportedAspectRatios":["1:1"]},{"id":"test_watch_211852","name":"cool 1x1 211852","genre":"cool","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/cool/1x1/test_watch_211852.jpg","supportedAspectRatios":["1:1"]},{"id":"cool_4x3_001","name":"cool 4x3 001","genre":"cool","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/cool/4x3/cool_4x3_001.jpg","supportedAspectRatios":["4:3"]},{"id":"cool_4x3_002","name":"cool 4x3 002","genre":"cool","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/cool/4x3/cool_4x3_002.jpg","supportedAspectRatios":["4:3"]},{"id":"cool_4x3_003","name":"cool 4x3 003","genre":"cool","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/cool/4x3/cool_4x3_003.jpg","supportedAspectRatios":["4:3"]},{"id":"cool_4x3_004","name":"cool 4x3 004","genre":"cool","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/cool/4x3/cool_4x3_004.jpg","supportedAspectRatios":["4:3"]},{"id":"cool_4x3_005","name":"cool 4x3 005","genre":"cool","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/cool/4x3/cool_4x3_005.jpg","supportedAspectRatios":["4:3"]},{"id":"cool_4x3_006","name":"cool 4x3 006","genre":"cool","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/cool/4x3/cool_4x3_006.jpg","supportedAspectRatios":["4:3"]},{"id":"cool_4x3_007","name":"cool 4x3 007","genre":"cool","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/cool/4x3/cool_4x3_007.jpg","supportedAspectRatios":["4:3"]},{"id":"cool_4x3_008","name":"cool 4x3 008","genre":"cool","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/cool/4x3/cool_4x3_008.jpg","supportedAspectRatios":["4:3"]},{"id":"cool_4x3_009","name":"cool 4x3 009","genre":"cool","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/cool/4x3/cool_4x3_009.jpg","supportedAspectRatios":["4:3"]},{"id":"cool_9x16_001","name":"cool 9x16 001","genre":"cool","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/cool/9x16/cool_9x16_001.jpg","supportedAspectRatios":["9:16"]},{"id":"cool_9x16_002","name":"cool 9x16 002","genre":"cool","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/cool/9x16/cool_9x16_002.jpg","supportedAspectRatios":["9:16"]},{"id":"cool_9x16_003","name":"cool 9x16 003","genre":"cool","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/cool/9x16/cool_9x16_003.jpg","supportedAspectRatios":["9:16"]},{"id":"cool_9x16_004","name":"cool 9x16 004","genre":"cool","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/cool/9x16/cool_9x16_004.jpg","supportedAspectRatios":["9:16"]},{"id":"cool_9x16_005","name":"cool 9x16 005","genre":"cool","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/cool/9x16/cool_9x16_005.jpg","supportedAspectRatios":["9:16"]},{"id":"cool_9x16_006","name":"cool 9x16 006","genre":"cool","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/cool/9x16/cool_9x16_006.jpg","supportedAspectRatios":["9:16"]},{"id":"cool_9x16_007","name":"cool 9x16 007","genre":"cool","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/cool/9x16/cool_9x16_007.jpg","supportedAspectRatios":["9:16"]},{"id":"cool_16x9_001","name":"cool 16x9 001","genre":"cool","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/cool/16x9/cool_16x9_001.jpg","supportedAspectRatios":["16:9"]},{"id":"cool_16x9_002","name":"cool 16x9 002","genre":"cool","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/cool/16x9/cool_16x9_002.jpg","supportedAspectRatios":["16:9"]},{"id":"cool_16x9_003","name":"cool 16x9 003","genre":"cool","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/cool/16x9/cool_16x9_003.jpg","supportedAspectRatios":["16:9"]},{"id":"cool_16x9_004","name":"cool 16x9 004","genre":"cool","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/cool/16x9/cool_16x9_004.jpg","supportedAspectRatios":["16:9"]},{"id":"cool_16x9_005","name":"cool 16x9 005","genre":"cool","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/cool/16x9/cool_16x9_005.jpg","supportedAspectRatios":["16:9"]},{"id":"cool_16x9_006","name":"cool 16x9 006","genre":"cool","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/cool/16x9/cool_16x9_006.jpg","supportedAspectRatios":["16:9"]},{"id":"cool_16x9_007","name":"cool 16x9 007","genre":"cool","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/cool/16x9/cool_16x9_007.jpg","supportedAspectRatios":["16:9"]},{"id":"cool_16x9_008","name":"cool 16x9 008","genre":"cool","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/cool/16x9/cool_16x9_008.jpg","supportedAspectRatios":["16:9"]},{"id":"cool_16x9_009","name":"cool 16x9 009","genre":"cool","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/cool/16x9/cool_16x9_009.jpg","supportedAspectRatios":["16:9"]},{"id":"cool_16x9_010","name":"cool 16x9 010","genre":"cool","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/cool/16x9/cool_16x9_010.jpg","supportedAspectRatios":["16:9"]},{"id":"cute_1x1_001","name":"cute 1x1 001","genre":"cute","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/cute/1x1/cute_1x1_001.jpg","supportedAspectRatios":["1:1"]},{"id":"cute_1x1_002","name":"cute 1x1 002","genre":"cute","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/cute/1x1/cute_1x1_002.jpg","supportedAspectRatios":["1:1"]},{"id":"cute_1x1_003","name":"cute 1x1 003","genre":"cute","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/cute/1x1/cute_1x1_003.jpg","supportedAspectRatios":["1:1"]},{"id":"cute_1x1_004","name":"cute 1x1 004","genre":"cute","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/cute/1x1/cute_1x1_004.jpg","supportedAspectRatios":["1:1"]},{"id":"cute_1x1_005","name":"cute 1x1 005","genre":"cute","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/cute/1x1/cute_1x1_005.jpg","supportedAspectRatios":["1:1"]},{"id":"cute_1x1_006","name":"cute 1x1 006","genre":"cute","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/cute/1x1/cute_1x1_006.jpg","supportedAspectRatios":["1:1"]},{"id":"cute_4x3_001","name":"cute 4x3 001","genre":"cute","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/cute/4x3/cute_4x3_001.jpg","supportedAspectRatios":["4:3"]},{"id":"cute_4x3_002","name":"cute 4x3 002","genre":"cute","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/cute/4x3/cute_4x3_002.jpg","supportedAspectRatios":["4:3"]},{"id":"cute_4x3_003","name":"cute 4x3 003","genre":"cute","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/cute/4x3/cute_4x3_003.jpg","supportedAspectRatios":["4:3"]},{"id":"cute_4x3_004","name":"cute 4x3 004","genre":"cute","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/cute/4x3/cute_4x3_004.jpg","supportedAspectRatios":["4:3"]},{"id":"cute_4x3_005","name":"cute 4x3 005","genre":"cute","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/cute/4x3/cute_4x3_005.jpg","supportedAspectRatios":["4:3"]},{"id":"cute_4x3_006","name":"cute 4x3 006","genre":"cute","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/cute/4x3/cute_4x3_006.jpg","supportedAspectRatios":["4:3"]},{"id":"cute_9x16_001","name":"cute 9x16 001","genre":"cute","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/cute/9x16/cute_9x16_001.jpg","supportedAspectRatios":["9:16"]},{"id":"cute_9x16_002","name":"cute 9x16 002","genre":"cute","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/cute/9x16/cute_9x16_002.jpg","supportedAspectRatios":["9:16"]},{"id":"cute_9x16_003","name":"cute 9x16 003","genre":"cute","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/cute/9x16/cute_9x16_003.jpg","supportedAspectRatios":["9:16"]},{"id":"cute_9x16_004","name":"cute 9x16 004","genre":"cute","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/cute/9x16/cute_9x16_004.jpg","supportedAspectRatios":["9:16"]},{"id":"cute_9x16_005","name":"cute 9x16 005","genre":"cute","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/cute/9x16/cute_9x16_005.jpg","supportedAspectRatios":["9:16"]},{"id":"cute_9x16_006","name":"cute 9x16 006","genre":"cute","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/cute/9x16/cute_9x16_006.jpg","supportedAspectRatios":["9:16"]},{"id":"cute_16x9_001","name":"cute 16x9 001","genre":"cute","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/cute/16x9/cute_16x9_001.jpg","supportedAspectRatios":["16:9"]},{"id":"cute_16x9_002","name":"cute 16x9 002","genre":"cute","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/cute/16x9/cute_16x9_002.jpg","supportedAspectRatios":["16:9"]},{"id":"cute_16x9_003","name":"cute 16x9 003","genre":"cute","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/cute/16x9/cute_16x9_003.jpg","supportedAspectRatios":["16:9"]},{"id":"cute_16x9_004","name":"cute 16x9 004","genre":"cute","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/cute/16x9/cute_16x9_004.jpg","supportedAspectRatios":["16:9"]},{"id":"cute_16x9_005","name":"cute 16x9 005","genre":"cute","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/cute/16x9/cute_16x9_005.jpg","supportedAspectRatios":["16:9"]},{"id":"cute_16x9_006","name":"cute 16x9 006","genre":"cute","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/cute/16x9/cute_16x9_006.jpg","supportedAspectRatios":["16:9"]},{"id":"cute_16x9_007","name":"cute 16x9 007","genre":"cute","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/cute/16x9/cute_16x9_007.jpg","supportedAspectRatios":["16:9"]},{"id":"cute_16x9_008","name":"cute 16x9 008","genre":"cute","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/cute/16x9/cute_16x9_008.png","supportedAspectRatios":["16:9"]},{"id":"test_001","name":"elegant 1x1 001","genre":"elegant","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/elegant/1x1/test_001.png","supportedAspectRatios":["1:1"]},{"id":"test_002","name":"elegant 4x3 002","genre":"elegant","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/elegant/4x3/test_002.png","supportedAspectRatios":["4:3"]},{"id":"test_003","name":"elegant 16x9 003","genre":"elegant","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/elegant/16x9/test_003.png","supportedAspectRatios":["16:9"]},{"id":"test_001","name":"modern 1x1 001","genre":"modern","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/modern/1x1/test_001.png","supportedAspectRatios":["1:1"]},{"id":"simple_1x1_001","name":"simple 1x1 001","genre":"simple","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/simple/1x1/simple_1x1_001.png","supportedAspectRatios":["1:1"]},{"id":"simple_1x1_002","name":"simple 1x1 002","genre":"simple","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/simple/1x1/simple_1x1_002.png","supportedAspectRatios":["1:1"]},{"id":"simple_1x1_003","name":"simple 1x1 003","genre":"simple","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/simple/1x1/simple_1x1_003.jpg","supportedAspectRatios":["1:1"]},{"id":"simple_1x1_004","name":"simple 1x1 004","genre":"simple","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/simple/1x1/simple_1x1_004.jpg","supportedAspectRatios":["1:1"]},{"id":"simple_1x1_005","name":"simple 1x1 005","genre":"simple","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/simple/1x1/simple_1x1_005.jpg","supportedAspectRatios":["1:1"]},{"id":"simple_1x1_006","name":"simple 1x1 006","genre":"simple","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/simple/1x1/simple_1x1_006.jpg","supportedAspectRatios":["1:1"]},{"id":"simple_1x1_007","name":"simple 1x1 007","genre":"simple","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/simple/1x1/simple_1x1_007.jpg","supportedAspectRatios":["1:1"]},{"id":"simple_4x3_001","name":"simple 4x3 001","genre":"simple","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/simple/4x3/simple_4x3_001.jpg","supportedAspectRatios":["4:3"]},{"id":"simple_4x3_002","name":"simple 4x3 002","genre":"simple","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/simple/4x3/simple_4x3_002.jpg","supportedAspectRatios":["4:3"]},{"id":"simple_4x3_003","name":"simple 4x3 003","genre":"simple","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/simple/4x3/simple_4x3_003.jpg","supportedAspectRatios":["4:3"]},{"id":"simple_4x3_004","name":"simple 4x3 004","genre":"simple","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/simple/4x3/simple_4x3_004.jpg","supportedAspectRatios":["4:3"]},{"id":"simple_4x3_005","name":"simple 4x3 005","genre":"simple","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/simple/4x3/simple_4x3_005.jpg","supportedAspectRatios":["4:3"]},{"id":"simple_9x16_001","name":"simple 9x16 001","genre":"simple","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/simple/9x16/simple_9x16_001.jpg","supportedAspectRatios":["9:16"]},{"id":"simple_9x16_002","name":"simple 9x16 002","genre":"simple","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/simple/9x16/simple_9x16_002.jpg","supportedAspectRatios":["9:16"]},{"id":"simple_9x16_003","name":"simple 9x16 003","genre":"simple","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/simple/9x16/simple_9x16_003.jpg","supportedAspectRatios":["9:16"]},{"id":"simple_9x16_004","name":"simple 9x16 004","genre":"simple","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/simple/9x16/simple_9x16_004.jpg","supportedAspectRatios":["9:16"]},{"id":"simple_16x9_001","name":"simple 16x9 001","genre":"simple","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/simple/16x9/simple_16x9_001.png","supportedAspectRatios":["16:9"]},{"id":"simple_16x9_002","name":"simple 16x9 002","genre":"simple","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/simple/16x9/simple_16x9_002.jpg","supportedAspectRatios":["16:9"]},{"id":"simple_16x9_003","name":"simple 16x9 003","genre":"simple","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/simple/16x9/simple_16x9_003.jpg","supportedAspectRatios":["16:9"]},{"id":"simple_16x9_004","name":"simple 16x9 004","genre":"simple","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/simple/16x9/simple_16x9_004.jpg","supportedAspectRatios":["16:9"]},{"id":"simple_16x9_005","name":"simple 16x9 005","genre":"simple","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/simple/16x9/simple_16x9_005.jpg","supportedAspectRatios":["16:9"]},{"id":"simple_16x9_006","name":"simple 16x9 006","genre":"simple","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/simple/16x9/simple_16x9_006.jpg","supportedAspectRatios":["16:9"]},{"id":"simple_16x9_007","name":"simple 16x9 007","genre":"simple","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/simple/16x9/simple_16x9_007.jpg","supportedAspectRatios":["16:9"]},{"id":"simple_16x9_008","name":"simple 16x9 008","genre":"simple","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/simple/16x9/simple_16x9_008.jpg","supportedAspectRatios":["16:9"]},{"id":"simple_16x9_009","name":"simple 16x9 009","genre":"simple","initialText":"テキスト","initialTextColor":"#000000","initialFontSize":"4rem","initialImageSrc":"/Kurodev-tool-portal/templates/asset-creator/simple/16x9/simple_16x9_009.png","supportedAspectRatios":["16:9"]}],"metadata":{"generatedAt":"2025-11-10T12:30:44.484Z","totalTemplates":93,"invalidTemplates":0,"duplicates":0,"missingFiles":0}}');var L=a(24156);let J={simple:"シンプル",cute:"かわいい",cool:"クール",stylish:"スタイリッシュ",elegant:"エレガント",modern:"モダン",vintage:"ヴィンテージ",minimal:"ミニマル",colorful:"カラフル",dark:"ダーク",bright:"ブライト",nature:"ナチュラル",urban:"アーバン",fantasy:"ファンタジー",retro:"レトロ",futuristic:"フューチャー",romantic:"ロマンチック",energetic:"エネルギッシュ",calm:"カーム",professional:"プロフェッショナル",casual:"カジュアル",formal:"フォーマル",playful:"プレイフル",serious:"シリアス",artistic:"アーティスティック",tech:"テック",gaming:"ゲーミング",music:"ミュージック",food:"フード",travel:"トラベル",fashion:"ファッション",beauty:"ビューティー",lifestyle:"ライフスタイル",business:"ビジネス",education:"エデュケーション",health:"ヘルス",sports:"スポーツ",entertainment:"エンターテイメント",news:"ニュース",technology:"テクノロジー",science:"サイエンス",culture:"カルチャー",social:"ソーシャル",personal:"パーソナル",creative:"クリエイティブ",innovative:"イノベーティブ",traditional:"トラディショナル",contemporary:"コンテンポラリー",experimental:"エクスペリメンタル",classic:"クラシック",trendy:"トレンディ",unique:"ユニーク",premium:"プレミアム",affordable:"アフォーダブル",luxury:"ラグジュアリー",eco:"エコ",sustainable:"サステナブル",organic:"オーガニック",digital:"デジタル",analog:"アナログ",hybrid:"ハイブリッド",pure:"ピュア",mixed:"ミックス",solid:"ソリッド",gradient:"グラデーション",pattern:"パターン",texture:"テクスチャー",geometric:"ジオメトリック",abstract:"アブストラクト",realistic:"リアリスティック",cartoon:"カートゥーン",anime:"アニメ",manga:"マンガ",illustration:"イラストレーション",photography:"フォトグラフィー",design:"デザイン",art:"アート",craft:"クラフト",handmade:"ハンドメイド",industrial:"インダストリアル",rustic:"ラスティック",cozy:"コージー",spacious:"スペーシャス",compact:"コンパクト",large:"ラージ",small:"スモール",medium:"ミディアム",extra:"エクストラ",mega:"メガ",micro:"マイクロ",macro:"マクロ",nano:"ナノ",pico:"ピコ",giga:"ギガ",kilo:"キロ",milli:"ミリ",centi:"センチ",deci:"デシ",deca:"デカ",hecto:"ヘクト",peta:"ペタ",exa:"エクサ",zetta:"ゼタ",yotta:"ヨタ",ronna:"ロナ",quetta:"クエタ",femto:"フェムト",atto:"アト",zepto:"ゼプト",yocto:"ヨクト",ronto:"ロント",quecto:"クエクト"};var D=a(89432);let G=["1:1","4:3","9:16","16:9"],O="asset-creator-favorites",B=e=>{let{template:t,isSelected:a,isFavorite:l,onSelect:r,onToggleFavorite:o,aspectRatio:n,previewSize:c}=e,d=(0,s.useMemo)(()=>{switch(c){case"small":return{sm:150,md:180,lg:200};case"medium":default:return{sm:200,md:250,lg:300};case"large":return{sm:300,md:400,lg:500}}},[c]);return(0,i.jsx)(_.Zp,{className:(0,C.cn)("cursor-pointer hover:border-[#20B2AA] transition-all duration-200 group relative",a&&"border-2 border-[#20B2AA] ring-2 ring-[#20B2AA] ring-offset-2",!a&&"hover:shadow-lg"),onClick:()=>r(t),children:(0,i.jsx)(_.Wu,{className:"p-0 rounded-md relative",children:(0,i.jsxs)("div",{className:(0,C.cn)("w-full rounded-md flex items-center justify-center relative overflow-hidden","1:1"===n?"aspect-square":"4:3"===n?"aspect-[4/3]":"9:16"===n?"aspect-[9/16]":"aspect-video"),children:[(0,i.jsx)(y.wF,{src:t.initialImageSrc,alt:t.name,aspectRatio:"16:9",breakpoints:d,style:{objectFit:"cover"},className:"transition-transform duration-300 group-hover:scale-110"}),(0,i.jsx)("button",{onClick:e=>o(t.id,e),className:(0,C.cn)("absolute top-2 right-2 p-1.5 rounded-full bg-black/50 backdrop-blur-sm transition-all duration-200 z-10","hover:bg-black/70 hover:scale-110",l&&"bg-[#20B2AA]/80 hover:bg-[#20B2AA]"),"aria-label":l?"お気に入りを解除":"お気に入りに追加",title:l?"お気に入りを解除":"お気に入りに追加",children:(0,i.jsx)(z.A,{className:(0,C.cn)("h-4 w-4 transition-colors",l?"fill-[#20B2AA] text-[#20B2AA]":"text-white")})}),a&&(0,i.jsx)("div",{className:"absolute inset-0 bg-[#20B2AA]/10 border-2 border-[#20B2AA] rounded-md"}),(0,i.jsx)("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:(0,i.jsx)("p",{className:"text-xs text-white font-medium truncate",children:t.name})})]})})})},M=s.memo(e=>{let{onSelectTemplate:t,selectedTemplateId:a}=e,{aspectRatio:l,setAspectRatio:r,customAspectRatio:d,setCustomAspectRatio:x}=A(),m=(0,D.U)("(min-width: 1024px)"),[u,h]=(0,s.useState)(""),[g,v]=(0,s.useState)(()=>{{let e=localStorage.getItem(O);return e?new Set(JSON.parse(e)):new Set}}),[f,j]=(0,s.useState)("medium"),[b,N]=(0,s.useState)("all"),{filteredTemplates:S,availableGenres:w,genreNames:y,isLoading:_}=function(e){let{aspectRatio:t,customAspectRatio:a}=e,[i,l]=(0,s.useState)([]),[r,o]=(0,s.useState)(!0);(0,s.useEffect)(()=>{try{o(!0),L.vF.debug("テンプレート読み込み開始",void 0,"useTemplateManagement");let e=(()=>{try{return L.vF.debug("テンプレート読み込み完了",{count:K.templates.length},"templateLoader"),K.templates}catch(e){return L.vF.error("テンプレート読み込み失敗",e,"templateLoader"),[]}})();L.vF.debug("テンプレート読み込み完了",{count:e.length,genres:[...new Set(e.map(e=>e.genre))]},"useTemplateManagement"),l(e),o(!1)}catch(e){L.vF.error("テンプレート読み込み失敗",e,"useTemplateManagement"),l([]),o(!1)}},[]);let n=(0,s.useMemo)(()=>{let e=i.filter(e=>"custom"===t||e.supportedAspectRatios.includes(t));return L.vF.debug("テンプレートフィルタリング",{aspectRatio:t,beforeCount:i.length,afterCount:e.length,genres:[...new Set(e.map(e=>e.genre))]},"useTemplateManagement"),e},[i,t]),c=(0,s.useMemo)(()=>{let e=[...new Set(n.map(e=>e.genre))];return L.vF.debug("利用可能なジャンル",{availableGenres:e,filteredCount:n.length,totalCount:i.length,aspectRatio:t,allGenres:[...new Set(i.map(e=>e.genre))]},"useTemplateManagement"),e},[n,i,t]),d=(0,s.useMemo)(()=>(e=>{let t={};return e.forEach(e=>{let a;t[e]=J[a=e]||a}),t})(c),[c]),x=(0,s.useMemo)(()=>c.reduce((e,t)=>(e[t]=n.filter(e=>e.genre===t),e),{}),[c,n]);return{templates:i,filteredTemplates:n,availableGenres:c,genreNames:d,templatesByGenre:x,isLoading:r}}({aspectRatio:l,customAspectRatio:d}),{handleCustomAspectRatioChange:M}={handleCustomAspectRatioChange:(e,t)=>{let a=parseInt(e.target.value,10),i={...d,[t]:a};!isNaN(a)&&a>0&&(x(i),r("custom"))}},W=(e,t)=>{t.stopPropagation();let a=new Set(g);a.has(e)?a.delete(e):a.add(e),v(a),localStorage.setItem(O,JSON.stringify(Array.from(a)))},P=(0,s.useMemo)(()=>{let e=S;if(u.trim()){let t=u.toLowerCase();e=e.filter(e=>e.name.toLowerCase().includes(t)||e.genre.toLowerCase().includes(t))}return"favorites"===b&&(e=e.filter(e=>g.has(e.id))),e},[S,u,b,g]),$=(0,s.useMemo)(()=>{if(!m)return"grid-cols-2";switch(f){case"small":return"grid-cols-3";case"medium":default:return"grid-cols-2";case"large":return"grid-cols-1"}},[m,f]);return _?(0,i.jsx)("div",{className:"w-full p-4 text-center",children:(0,i.jsx)("div",{className:"text-sm text-muted-foreground",children:"テンプレートを読み込み中..."})}):(0,i.jsxs)(T.nD,{type:"multiple",className:"w-full",defaultValue:["aspect-ratio","templates"],children:[(0,i.jsxs)(T.As,{value:"aspect-ratio",children:[(0,i.jsx)(T.$m,{children:"アスペクト比"}),(0,i.jsxs)(T.ub,{className:"space-y-4 pt-4",children:[(0,i.jsx)(n.J,{children:"プリセット"}),(0,i.jsx)(F.O,{type:"single",value:"custom"===l?"":l,onValueChange:e=>{e&&r(e)},variant:"outline",className:"flex-wrap justify-start",children:G.map(e=>(0,i.jsx)(F.d,{value:e,"aria-label":"比率 ".concat(e),children:e},e))}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(n.J,{children:"手動設定"}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(c.p,{type:"number",placeholder:"幅",className:"w-24",value:d.width,onChange:e=>M(e,"width")}),(0,i.jsx)("span",{children:":"}),(0,i.jsx)(c.p,{type:"number",placeholder:"高さ",className:"w-24",value:d.height,onChange:e=>M(e,"height")})]}),(0,i.jsx)("p",{className:"text-xs text-muted-foreground",children:"小さい数字で比率、大きい数字で解像度を指定できます。"})]})]})]}),(0,i.jsxs)(T.As,{value:"templates",children:[(0,i.jsx)(T.$m,{children:"テンプレート選択"}),(0,i.jsx)(T.ub,{className:"pt-4",children:w.length>0?(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)(R.A,{className:"absolute left-2 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,i.jsx)(c.p,{type:"text",placeholder:"テンプレートを検索...",value:u,onChange:e=>h(e.target.value),className:"pl-8 pr-2"})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,i.jsx)(p.tU,{value:b,onValueChange:e=>N(e),className:"flex-1",children:(0,i.jsxs)(p.j7,{className:"w-full grid grid-cols-2",children:[(0,i.jsxs)(p.Xi,{value:"all",className:"text-xs",children:["すべて (",P.length,")"]}),(0,i.jsxs)(p.Xi,{value:"favorites",className:"text-xs flex items-center gap-1",children:[(0,i.jsx)(z.A,{className:(0,C.cn)("h-3 w-3",g.size>0&&"fill-current")}),"お気に入り (",g.size,")"]})]})}),m&&(0,i.jsxs)("div",{className:"flex items-center gap-1 bg-muted rounded-md p-1",children:[(0,i.jsx)(o.$,{variant:"ghost",size:"sm",className:(0,C.cn)("h-7 px-2 transition-colors","small"===f&&"bg-[#20B2AA]/20 text-[#20B2AA] hover:bg-[#20B2AA]/30"),onClick:()=>j("small"),title:"小さいプレビュー（3列表示）",children:(0,i.jsx)(k.A,{className:"h-3 w-3"})}),(0,i.jsx)(o.$,{variant:"ghost",size:"sm",className:(0,C.cn)("h-7 px-2 transition-colors","medium"===f&&"bg-[#20B2AA]/20 text-[#20B2AA] hover:bg-[#20B2AA]/30"),onClick:()=>j("medium"),title:"中サイズプレビュー（2列表示）",children:(0,i.jsx)(I.A,{className:"h-3 w-3"})}),(0,i.jsx)(o.$,{variant:"ghost",size:"sm",className:(0,C.cn)("h-7 px-2 transition-colors","large"===f&&"bg-[#20B2AA]/20 text-[#20B2AA] hover:bg-[#20B2AA]/30"),onClick:()=>j("large"),title:"大きいプレビュー（1列表示）",children:(0,i.jsx)(E.A,{className:"h-3 w-3"})})]})]})]}),!u.trim()&&"all"===b&&(0,i.jsxs)(p.tU,{defaultValue:w[0],className:"w-full",children:[(0,i.jsx)(p.j7,{className:(0,C.cn)("w-full h-auto p-1",w.length<=4?1===w.length?"grid grid-cols-1":2===w.length?"grid grid-cols-2":3===w.length?"grid grid-cols-3":"grid grid-cols-4":"flex overflow-x-auto space-x-1 scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100"),children:w.map(e=>(0,i.jsx)(p.Xi,{value:e,className:(0,C.cn)(w.length>4?"min-w-fit whitespace-nowrap":"","h-8 px-3 py-1 text-sm"),children:y[e]},e))}),w.map(e=>(0,i.jsx)(p.av,{value:e,children:(0,i.jsx)("div",{className:(0,C.cn)("grid gap-2 mt-4",$),children:P.filter(t=>t.genre===e).map(e=>(0,i.jsx)(B,{template:e,isSelected:a===e.id,isFavorite:g.has(e.id),onSelect:t,onToggleFavorite:W,aspectRatio:l,previewSize:f},e.id))})},e))]}),(u.trim()||"favorites"===b)&&(0,i.jsx)("div",{className:(0,C.cn)("grid gap-2",$),children:P.length>0?P.map(e=>(0,i.jsx)(B,{template:e,isSelected:a===e.id,isFavorite:g.has(e.id),onSelect:t,onToggleFavorite:W,aspectRatio:l,previewSize:f},e.id)):(0,i.jsx)("div",{className:"col-span-full text-center text-sm text-muted-foreground py-8",children:u.trim()?"検索結果が見つかりませんでした":"お気に入りに登録されたテンプレートはありません"})})]}):(0,i.jsx)("div",{className:"text-center text-sm text-muted-foreground py-4",children:"このアスペクト比に対応するテンプレートはありません。"})})]})]})});var W=a(58414);let P=e=>{let{isDesktop:t,layers:a,updateLayer:l,removeLayer:r,selectedLayerId:o,setSelectedLayerId:n,reorderLayers:c,duplicateLayer:d,addLayer:x,moveLayerUp:m,moveLayerDown:u,selectedTemplate:h,setSelectedTemplate:g,onShapeSelect:v}=e,[f,j]=s.useState("templates"),b=(0,i.jsxs)("div",{className:"h-full flex flex-col min-w-0 max-w-full overflow-x-hidden",children:[(0,i.jsx)("div",{className:"p-3 border-b border-[#4A4A4A] min-w-0",children:(0,i.jsx)("h2",{className:"text-base font-semibold text-[#A0A0A0] truncate",children:"素材・レイヤー"})}),(0,i.jsxs)(p.tU,{value:f,onValueChange:j,className:"flex-1 flex flex-col min-w-0",children:[(0,i.jsxs)(p.j7,{className:"grid w-10/12 grid-cols-2 mx-auto mt-4 min-w-0",children:[(0,i.jsxs)(p.Xi,{value:"templates",className:"text-xs p-2 min-w-0 flex-col gap-2 max-w-full",children:[(0,i.jsx)(S.A,{className:"h-4 w-4"}),(0,i.jsx)("span",{className:"truncate text-xs",children:"素材"})]}),(0,i.jsxs)(p.Xi,{value:"layers",className:"text-xs p-2 min-w-0 flex-col gap-2 max-w-full",children:[(0,i.jsx)(w.A,{className:"h-4 w-4"}),(0,i.jsx)("span",{className:"truncate text-xs",children:"レイヤー"})]})]}),(0,i.jsx)(p.av,{value:"templates",className:"flex-1 px-3 pb-3 pt-2 mt-8 min-w-0 max-w-full overflow-x-hidden",children:(0,i.jsx)("div",{className:"min-w-0 max-w-full",children:(0,i.jsx)(M,{onSelectTemplate:g,selectedTemplateId:(null==h?void 0:h.id)||null})})}),(0,i.jsx)(p.av,{value:"layers",className:"flex-1 px-3 pb-3 pt-2 mt-8 min-w-0 max-w-full overflow-x-hidden",children:(0,i.jsx)("div",{className:"min-w-0 max-w-full",children:(0,i.jsx)(W.G,{context:{layers:a,updateLayer:l,removeLayer:r,selectedLayerId:o,setSelectedLayerId:n,reorderLayers:c,duplicateLayer:d,addLayer:x,moveLayerUp:m,moveLayerDown:u},onShapeSelect:v,showShapeSelector:!0})})})]})]});return t?(0,i.jsx)("div",{className:"w-1/5 border-r border-[#4A4A4A] bg-[#1A1A1A] overflow-y-auto overflow-x-hidden",children:b}):null};var $=a(22215),V=a(6166),q=a(5081),U=a(14967),H=a(87570),X=a(21645),Z=a(78541),Y=a(34691),Q=a(86930),ee=a(54407),et=a(80889),ea=a(68698),ei=a(64248),es=a(95176),el=a(77463);let er={web:[{name:"Web バナー (大)",width:1200,height:630,platform:"web",selected:!0},{name:"Web バナー (中)",width:800,height:420,platform:"web",selected:!0},{name:"Web バナー (小)",width:600,height:315,platform:"web",selected:!1},{name:"ヘッダー画像",width:1920,height:400,platform:"web",selected:!1}],social:[{name:"Twitter ヘッダー",width:1500,height:500,platform:"twitter",selected:!0},{name:"Twitter 投稿",width:1200,height:675,platform:"twitter",selected:!0},{name:"Instagram 投稿",width:1080,height:1080,platform:"instagram",selected:!0},{name:"Instagram ストーリー",width:1080,height:1920,platform:"instagram",selected:!1},{name:"Facebook カバー",width:1200,height:630,platform:"facebook",selected:!1}],print:[{name:"A4 (300DPI)",width:2480,height:3508,platform:"print",selected:!0},{name:"A3 (300DPI)",width:3508,height:4961,platform:"print",selected:!1},{name:"名刺 (300DPI)",width:1063,height:638,platform:"print",selected:!1},{name:"ポスター A2 (300DPI)",width:4961,height:7016,platform:"print",selected:!1},{name:"フライヤー A5 (300DPI)",width:1748,height:2480,platform:"print",selected:!0}],presentation:[{name:"スライド 16:9",width:1920,height:1080,platform:"presentation",selected:!0},{name:"スライド 4:3",width:1024,height:768,platform:"presentation",selected:!1},{name:"プレゼン用高解像度",width:3840,height:2160,platform:"presentation",selected:!1}]},eo={low:{pixelRatio:1,label:"軽量 (1x)",description:"Web表示用"},medium:{pixelRatio:1.5,label:"標準 (1.5x)",description:"一般的な用途"},high:{pixelRatio:2,label:"高品質 (2x)",description:"Retina対応"},ultra:{pixelRatio:3,label:"超高品質 (3x)",description:"高解像度ディスプレイ"},print:{pixelRatio:4,label:"印刷用 (4x)",description:"300DPI印刷対応"}},en=e=>{let{onExport:t,isExporting:a=!1}=e,l=!(0,D.U)("(min-width: 768px)"),[d,m]=(0,s.useState)({resolution:"fhd",quality:"high",format:"png",pixelRatio:2,backgroundColor:"#ffffff",includeTransparency:!1,optimizeForPlatform:"general",batchExport:!1,batchSizes:[]}),[p,h]=(0,s.useState)("web"),[g,v]=(0,s.useState)([]),[f,j]=(0,s.useState)(!1),[b,A]=(0,s.useState)(""),N=e=>{m(t=>({...t,...e}))},S=e=>{N({batchExport:!0,batchSizes:er[e].map(e=>({...e,selected:e.selected})),optimizeForPlatform:"web"===e?"web":"print"===e?"print":"social",quality:"print"===e?"print":"high",format:"png",includeTransparency:"print"!==e}),h(e)},w=async()=>{let e=document.getElementById("download-target");if(!e)return void r.oR.error("プレビューエリアが見つかりません");try{await t(e,d)}catch(e){L.vF.error("エクスポート失敗",e,"AssetExportSettingsPanel"),r.oR.error("エクスポートに失敗しました")}},y=()=>{if(!b.trim())return void r.oR.error("プリセット名を入力してください");let e={...d,name:b.trim()};v(t=>[...t,e]),r.oR.success('プリセット "'.concat(b.trim(),'" を保存しました')),A(""),j(!1)};return(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)(_.Zp,{children:[(0,i.jsx)(_.aR,{className:"pb-3",children:(0,i.jsxs)(_.ZB,{className:"text-sm flex items-center gap-2",children:[(0,i.jsx)(X.A,{className:"h-4 w-4"}),"よく使う設定"]})}),(0,i.jsxs)(_.Wu,{className:"space-y-2",children:[(0,i.jsx)("p",{className:"text-xs text-[#A0A0A0] mb-2",children:"ワンクリックで主要プラットフォーム向けにエクスポート"}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,i.jsxs)(o.$,{variant:"outline",size:l?"sm":"default",onClick:async()=>{let e=document.getElementById("download-target");if(!e)return void r.oR.error("プレビューエリアが見つかりません");await t(e,{...d,resolution:"custom",customWidth:1200,customHeight:675,quality:"high",pixelRatio:2,format:"png",optimizeForPlatform:"social"})},className:"flex items-center gap-2",children:[(0,i.jsx)(Z.A,{className:"h-4 w-4"}),(0,i.jsx)("span",{className:"text-xs",children:"Twitter投稿"})]}),(0,i.jsxs)(o.$,{variant:"outline",size:l?"sm":"default",onClick:async()=>{let e=document.getElementById("download-target");if(!e)return void r.oR.error("プレビューエリアが見つかりません");await t(e,{...d,resolution:"custom",customWidth:1280,customHeight:720,quality:"high",pixelRatio:2,format:"png",optimizeForPlatform:"social"})},className:"flex items-center gap-2",children:[(0,i.jsx)(Y.A,{className:"h-4 w-4"}),(0,i.jsx)("span",{className:"text-xs",children:"YouTubeサムネ"})]}),(0,i.jsxs)(o.$,{variant:"outline",size:l?"sm":"default",onClick:async()=>{let e=document.getElementById("download-target");if(!e)return void r.oR.error("プレビューエリアが見つかりません");await t(e,{...d,resolution:"custom",customWidth:1920,customHeight:1080,quality:"high",pixelRatio:2,format:"png",optimizeForPlatform:"social"})},className:"flex items-center gap-2",children:[(0,i.jsx)(Y.A,{className:"h-4 w-4"}),(0,i.jsx)("span",{className:"text-xs",children:"YouTube HD"})]}),(0,i.jsxs)(o.$,{variant:"outline",size:l?"sm":"default",onClick:async()=>{let e=document.getElementById("download-target");if(!e)return void r.oR.error("プレビューエリアが見つかりません");await t(e,{...d,resolution:"custom",customWidth:1080,customHeight:1080,quality:"high",pixelRatio:2,format:"png",optimizeForPlatform:"social"})},className:"flex items-center gap-2",children:[(0,i.jsx)(Q.A,{className:"h-4 w-4"}),(0,i.jsx)("span",{className:"text-xs",children:"Instagram"})]})]})]})]}),(0,i.jsxs)(_.Zp,{children:[(0,i.jsx)(_.aR,{className:"pb-3",children:(0,i.jsxs)(_.ZB,{className:"text-sm flex items-center gap-2",children:[(0,i.jsx)(X.A,{className:"h-4 w-4"}),"用途別プリセット"]})}),(0,i.jsx)(_.Wu,{className:"space-y-3",children:(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,i.jsxs)(o.$,{variant:"web"===p?"default":"outline",size:l?"sm":"default",onClick:()=>S("web"),className:"flex items-center gap-2",children:[(0,i.jsx)(ee.A,{className:"h-4 w-4"}),(0,i.jsx)("span",{className:"hidden sm:inline",children:"Web用"}),(0,i.jsx)("span",{className:"sm:hidden",children:"Web"})]}),(0,i.jsxs)(o.$,{variant:"social"===p?"default":"outline",size:l?"sm":"default",onClick:()=>S("social"),className:"flex items-center gap-2",children:[(0,i.jsx)(et.A,{className:"h-4 w-4"}),(0,i.jsx)("span",{className:"hidden sm:inline",children:"SNS用"}),(0,i.jsx)("span",{className:"sm:hidden",children:"SNS"})]}),(0,i.jsxs)(o.$,{variant:"print"===p?"default":"outline",size:l?"sm":"default",onClick:()=>S("print"),className:"flex items-center gap-2",children:[(0,i.jsx)(ea.A,{className:"h-4 w-4"}),(0,i.jsx)("span",{className:"hidden sm:inline",children:"印刷用"}),(0,i.jsx)("span",{className:"sm:hidden",children:"印刷"})]}),(0,i.jsxs)(o.$,{variant:"presentation"===p?"default":"outline",size:l?"sm":"default",onClick:()=>S("presentation"),className:"flex items-center gap-2",children:[(0,i.jsx)(ei.A,{className:"h-4 w-4"}),(0,i.jsx)("span",{className:"hidden sm:inline",children:"プレゼン用"}),(0,i.jsx)("span",{className:"sm:hidden",children:"プレゼン"})]})]})})]}),(0,i.jsxs)(_.Zp,{children:[(0,i.jsx)(_.aR,{className:"pb-3",children:(0,i.jsxs)(_.ZB,{className:"text-sm flex items-center gap-2",children:[(0,i.jsx)($.A,{className:"h-4 w-4"}),"基本設定"]})}),(0,i.jsxs)(_.Wu,{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(n.J,{htmlFor:"resolution",children:"解像度"}),(0,i.jsxs)(x.l6,{value:d.resolution,onValueChange:e=>N({resolution:e}),children:[(0,i.jsx)(x.bq,{className:l?"h-10":"",children:(0,i.jsx)(x.yv,{})}),(0,i.jsxs)(x.gC,{children:[(0,i.jsx)(x.eb,{value:"hd",children:"HD (1280\xd7720)"}),(0,i.jsx)(x.eb,{value:"fhd",children:"Full HD (1920\xd71080)"}),(0,i.jsx)(x.eb,{value:"4k",children:"4K (3840\xd72160)"}),(0,i.jsx)(x.eb,{value:"print",children:"印刷用高解像度"}),(0,i.jsx)(x.eb,{value:"custom",children:"カスタム"})]})]})]}),"custom"===d.resolution&&(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,i.jsxs)("div",{className:"space-y-1",children:[(0,i.jsx)(n.J,{htmlFor:"customWidth",children:"幅 (px)"}),(0,i.jsx)(c.p,{id:"customWidth",type:"number",value:d.customWidth||"",onChange:e=>N({customWidth:parseInt(e.target.value)||void 0}),placeholder:"1920",inputMode:"numeric",className:l?"h-10":""})]}),(0,i.jsxs)("div",{className:"space-y-1",children:[(0,i.jsx)(n.J,{htmlFor:"customHeight",children:"高さ (px)"}),(0,i.jsx)(c.p,{id:"customHeight",type:"number",value:d.customHeight||"",onChange:e=>N({customHeight:parseInt(e.target.value)||void 0}),placeholder:"1080",inputMode:"numeric",className:l?"h-10":""})]})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(n.J,{htmlFor:"quality",children:"品質"}),(0,i.jsxs)(x.l6,{value:d.quality,onValueChange:e=>{let t=eo[e];N({quality:e,pixelRatio:t.pixelRatio})},children:[(0,i.jsx)(x.bq,{className:l?"h-10":"",children:(0,i.jsx)(x.yv,{})}),(0,i.jsx)(x.gC,{children:Object.entries(eo).map(e=>{let[t,a]=e;return(0,i.jsx)(x.eb,{value:t,children:(0,i.jsxs)("div",{className:"flex flex-col",children:[(0,i.jsx)("span",{children:a.label}),(0,i.jsx)("span",{className:"text-xs text-muted-foreground",children:a.description})]})},t)})})]})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(n.J,{htmlFor:"format",children:"フォーマット"}),(0,i.jsxs)(x.l6,{value:d.format,onValueChange:e=>N({format:e}),children:[(0,i.jsx)(x.bq,{className:l?"h-10":"",children:(0,i.jsx)(x.yv,{})}),(0,i.jsxs)(x.gC,{children:[(0,i.jsx)(x.eb,{value:"png",children:"PNG (透明背景対応)"}),(0,i.jsx)(x.eb,{value:"jpeg",children:"JPEG (軽量)"})]})]})]}),"png"===d.format&&(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)(q.S,{id:"transparency",checked:d.includeTransparency,onCheckedChange:e=>N({includeTransparency:e})}),(0,i.jsx)(n.J,{htmlFor:"transparency",className:"text-sm",children:"透明背景を使用"})]}),!d.includeTransparency&&(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(n.J,{htmlFor:"backgroundColor",children:"背景色"}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)(c.p,{id:"backgroundColor",type:"color",value:d.backgroundColor,onChange:e=>N({backgroundColor:e.target.value}),className:"w-12 h-10 p-1 border rounded"}),(0,i.jsx)(c.p,{value:d.backgroundColor,onChange:e=>N({backgroundColor:e.target.value}),placeholder:"#ffffff",className:(0,C.cn)("flex-1",l?"h-10":"")})]})]})]})]}),d.batchExport&&d.batchSizes.length>0&&(0,i.jsxs)(_.Zp,{children:[(0,i.jsx)(_.aR,{className:"pb-3",children:(0,i.jsxs)(_.ZB,{className:"text-sm flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(es.A,{className:"h-4 w-4"}),"バッチエクスポート"]}),(0,i.jsx)("div",{className:"flex gap-1",children:(0,i.jsx)(o.$,{variant:"outline",size:"sm",onClick:()=>{let e=d.batchSizes.every(e=>e.selected);N({batchSizes:d.batchSizes.map(t=>({...t,selected:!e}))})},className:"h-7 px-2 text-xs",children:d.batchSizes.every(e=>e.selected)?"全解除":"全選択"})})]})}),(0,i.jsx)(_.Wu,{children:(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)("p",{className:"text-sm text-muted-foreground",children:"エクスポートするサイズを選択してください:"}),(0,i.jsx)("div",{className:"grid gap-1",children:d.batchSizes.map((e,t)=>(0,i.jsxs)("div",{className:"flex items-center justify-between p-2 bg-muted rounded text-sm",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(q.S,{checked:e.selected,onCheckedChange:a=>{let i=[...d.batchSizes];i[t]={...e,selected:a},N({batchSizes:i})},id:"batch-size-".concat(t)}),(0,i.jsx)("label",{htmlFor:"batch-size-".concat(t),className:"cursor-pointer",children:e.name})]}),(0,i.jsxs)(U.E,{variant:"secondary",children:[e.width,"\xd7",e.height]})]},t))}),(0,i.jsxs)("div",{className:"text-xs text-muted-foreground",children:["選択済み: ",d.batchSizes.filter(e=>e.selected).length,"/",d.batchSizes.length,"サイズ"]})]})})]}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)(o.$,{onClick:w,disabled:a,className:(0,C.cn)("flex-1",l?"h-11":""),children:a?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u.A,{className:"mr-2 h-4 w-4 animate-spin"}),"エクスポート中..."]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(V.A,{className:"mr-2 h-4 w-4"}),"エクスポート"]})}),(0,i.jsxs)(H.lG,{open:f,onOpenChange:j,children:[(0,i.jsx)(H.zM,{asChild:!0,children:(0,i.jsxs)(o.$,{variant:"outline",disabled:a,className:l?"h-11":"",title:"現在の設定をプリセットとして保存",children:[(0,i.jsx)(el.A,{className:"h-4 w-4"}),l?"":"保存"]})}),(0,i.jsxs)(H.Cf,{className:"bg-[#2D2D2D] border-[#4A4A4A]",children:[(0,i.jsxs)(H.c7,{children:[(0,i.jsx)(H.L3,{className:"text-[#E0E0E0]",children:"プリセットを保存"}),(0,i.jsx)(H.rr,{className:"text-[#A0A0A0]",children:"現在の設定をプリセットとして保存します。後で再利用できます。"})]}),(0,i.jsx)("div",{className:"space-y-4 py-4",children:(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(n.J,{htmlFor:"preset-name",className:"text-[#E0E0E0]",children:"プリセット名"}),(0,i.jsx)(c.p,{id:"preset-name",value:b,onChange:e=>A(e.target.value),placeholder:"例: Twitter用設定",className:"bg-[#1A1A1A] border-[#4A4A4A] text-[#E0E0E0]",onKeyDown:e=>{"Enter"===e.key&&y()}})]})}),(0,i.jsxs)(H.Es,{children:[(0,i.jsx)(o.$,{variant:"outline",onClick:()=>{A(""),j(!1)},className:"border-[#4A4A4A] text-[#E0E0E0] hover:bg-[#3A3A3A]",children:"キャンセル"}),(0,i.jsx)(o.$,{onClick:y,disabled:!b.trim(),className:"bg-[#20B2AA] hover:bg-[#1A9B95] text-white",children:"保存"})]})]})]})]})]})},ec=e=>{let{isDesktop:t,isExporting:a,renderToolsPanel:l,handleBatchExport:r,handleAdvancedExport:o,handleAddShape:n,selectedTab:c,setSelectedTab:d}=e,[x,m]=s.useState("tools"),u=(0,i.jsxs)("div",{className:"h-full flex flex-col min-w-0 max-w-full overflow-x-hidden",children:[(0,i.jsx)("div",{className:"p-3 border-b border-[#4A4A4A] min-w-0",children:(0,i.jsx)("h2",{className:"text-base font-semibold text-[#A0A0A0] truncate",children:"編集・エクスポート"})}),(0,i.jsxs)(p.tU,{value:null!=c?c:x,onValueChange:null!=d?d:m,className:"flex-1 flex flex-col min-w-0",children:[(0,i.jsxs)(p.j7,{className:"grid w-10/12 grid-cols-2 mx-auto mt-4 min-w-0",children:[(0,i.jsxs)(p.Xi,{value:"tools",className:"text-xs p-2 min-w-0 flex-col gap-2 max-w-full",children:[(0,i.jsx)($.A,{className:"h-4 w-4"}),(0,i.jsx)("span",{className:"truncate text-xs",children:"編集"})]}),(0,i.jsxs)(p.Xi,{value:"export",className:"text-xs p-2 min-w-0 flex-col gap-2 max-w-full",children:[(0,i.jsx)(V.A,{className:"h-4 w-4"}),(0,i.jsx)("span",{className:"truncate text-xs",children:"エクスポート"})]})]}),(0,i.jsx)(p.av,{value:"tools",className:"flex-1 px-3 pb-3 pt-2 mt-8 min-w-0 max-w-full overflow-x-hidden overflow-y-auto",children:(0,i.jsx)("div",{className:"min-w-0 max-w-full",children:l()})}),(0,i.jsx)(p.av,{value:"export",className:"flex-1 px-3 pb-3 pt-2 mt-8 min-w-0 max-w-full overflow-x-hidden overflow-y-auto",children:(0,i.jsx)("div",{className:"min-w-0 max-w-full",children:(0,i.jsx)(en,{onExport:r,isExporting:a})})})]})]});return t?(0,i.jsx)("div",{className:"w-1/5 border-l border-[#4A4A4A] bg-[#1A1A1A] overflow-y-auto overflow-x-hidden",children:u}):null};var ed=a(44647),ex=a(38825),em=a(15025),ep=a(84885),eu=a(73308);let eh=e=>{let{isDesktop:t,isPreviewDedicatedMode:a,setIsPreviewDedicatedMode:s,zoom:l,setZoom:r,onFitToScreen:n,canUndo:c,canRedo:d,showGrid:x,setShowGrid:m,showAspectGuide:p,setShowAspectGuide:u,showSafeArea:h,setShowSafeArea:g,showCenterLines:v,setShowCenterLines:f,handleToolbarUndo:j,handleToolbarRedo:b,handleSave:A,handleDownloadThumbnail:N,handleQuickExport:S,onOpenExportSettings:w,history:y,historyIndex:_,onJumpToHistory:C}=e;return(0,i.jsxs)(i.Fragment,{children:[t&&(0,i.jsx)(eu.M,{zoom:l,setZoom:r,onFitToScreen:n,onUndo:j,onRedo:b,onSave:A,onDownload:N,onQuickExport:S,onOpenExportSettings:w,canUndo:c,canRedo:d,isPreviewDedicatedMode:a,onTogglePreviewMode:()=>s(!a),showGrid:x,setShowGrid:m,showAspectGuide:p,setShowAspectGuide:u,showSafeArea:h,setShowSafeArea:g,showCenterLines:v,setShowCenterLines:f,history:y,historyIndex:_,onJumpToHistory:C}),!t&&a&&(0,i.jsx)("div",{className:"absolute top-2 left-2 z-20",children:(0,i.jsxs)(o.$,{size:"sm",variant:"outline",onClick:()=>s(!1),className:"bg-background/90 backdrop-blur-sm shadow-lg",children:[(0,i.jsx)(ep.A,{className:"h-4 w-4 mr-1"}),"通常表示に戻る"]})})]})};var eg=a(30417),ev=a(5952);let ef=e=>{let{isDesktop:t,isPreviewDedicatedMode:a,setIsPreviewDedicatedMode:l,selectedTab:r,setSelectedTab:n,showGrid:c,setShowGrid:d,showAspectGuide:x,setShowAspectGuide:m,showSafeArea:u,setShowSafeArea:h,showCenterLines:g,setShowCenterLines:v,gridSize:f,setGridSize:j,gridColor:b,setGridColor:A,gridOpacity:N,setGridOpacity:S,showMajorLines:w,setShowMajorLines:y,majorInterval:_,setMajorInterval:C,snapToGrid:T,setSnapToGrid:F,snapStrength:R,setSnapStrength:z,zoom:k,setZoom:I,onFitToScreen:E,baseSizeRef:K,layers:L,selectedLayerId:J,setSelectedLayerId:D,updateLayer:G,removeLayer:O,duplicateLayer:B,moveLayerUp:M,moveLayerDown:P,reorderLayers:$,addLayer:V,aspectRatio:q,customAspectRatio:U,isShiftKeyDown:H,handleLayerDragStop:X,handleLayerResize:Z,handleToolbarUndo:Y,handleToolbarRedo:Q,handleSave:ee,handleDownloadThumbnail:et,handleQuickExport:ea,onOpenExportSettings:ei,canUndo:es,canRedo:el,handleAddShape:er,renderToolsPanel:eo,history:en,historyIndex:ec,onJumpToHistory:ep,isMobileSidebarOpen:eu=!1}=e,ef=s.useMemo(()=>!!t||!eu,[t,eu]),ej=s.useRef([...L].sort((e,t)=>{var a,i;return(null!=(a=e.zIndex)?a:0)-(null!=(i=t.zIndex)?i:0)}));return s.useEffect(()=>{ej.current=[...L].sort((e,t)=>{var a,i;return(null!=(a=e.zIndex)?a:0)-(null!=(i=t.zIndex)?i:0)})},[L]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"flex flex-col h-full min-h-0",children:[(0,i.jsx)(eh,{isDesktop:t,isPreviewDedicatedMode:a,setIsPreviewDedicatedMode:l,zoom:k,setZoom:I,onFitToScreen:E,canUndo:es,canRedo:el,showGrid:c,setShowGrid:d,showAspectGuide:x,setShowAspectGuide:m,showSafeArea:u,setShowSafeArea:h,showCenterLines:g,setShowCenterLines:v,handleToolbarUndo:Y,handleToolbarRedo:Q,handleSave:ee,handleDownloadThumbnail:et,handleQuickExport:ea,onOpenExportSettings:ei,history:en,historyIndex:ec,onJumpToHistory:ep}),(0,i.jsx)("div",{className:"".concat(t?"flex-1 overflow-auto bg-[#1A1A1A] relative":"flex-shrink-0 bg-[#1A1A1A] relative max-h-[50vh] overflow-auto"),"data-preview-container":"true",children:(0,i.jsx)("div",{className:"".concat(t?"flex items-center justify-center h-full p-4 lg:p-8":"flex items-center justify-center p-4"),children:(0,i.jsx)("div",{className:"w-full",children:(0,i.jsxs)("div",{id:"thumbnail-preview",style:{width:"".concat(K.current*k,"px"),aspectRatio:"custom"===q?"".concat(U.width,"/").concat(U.height):(q||"16:9").replace(":","/"),margin:"0 auto",transition:"width 0.2s ease-in-out"},className:"bg-card relative border rounded-md shadow-lg",children:[(0,i.jsx)("div",{id:"download-target",className:"w-full h-full relative overflow-visible",children:ej.current.map(e=>{let t=e.id===J,a=t&&!e.locked,s=t&&!e.locked;if(!e.visible)return null;if("image"===e.type)return(0,i.jsx)(ex.A,{id:e.id,isSelected:t,src:e.src||"",alt:e.name,x:e.x,y:e.y,width:e.width,height:e.height,rotation:e.rotation,onDragStop:(t,a)=>X(e.id,t,a),onResize:(t,a,i,s,l)=>Z(e.id,a,i,s,l),onResizeStop:(t,a,i,s,l)=>Z(e.id,a,i,s,l),lockAspectRatio:H,enableResizing:s,disableDragging:!a,onSelect:()=>D(e.id),isLocked:e.locked,isDraggable:a,onRotateStart:()=>{},onRotate:()=>{},onRotateStop:()=>{},isBackground:e.isBackground,zIndex:e.zIndex,updateLayer:G,imageFilters:e.imageFilters,showRotationHandle:ef},e.id);if("text"===e.type)return(0,i.jsx)(ed.A,{id:e.id,isSelected:t,text:e.text||"",color:e.color||"#000000",fontSize:e.fontSize||"1rem",fontFamily:e.fontFamily,fontWeight:e.fontWeight,fontStyle:e.fontStyle,textDecoration:e.textDecoration,textShadow:e.textShadow,letterSpacing:e.letterSpacing,textStrokeWidth:e.textStrokeWidth,textStrokeColor:e.textStrokeColor,textGradient:e.textGradient,x:e.x,y:e.y,width:e.width,height:e.height,rotation:e.rotation,onDragStop:(t,a)=>X(e.id,t,a),onResizeStop:(t,a,i,s,l)=>Z(e.id,a,i,s,l),enableResizing:s,disableDragging:!a,onSelect:()=>D(e.id),isLocked:e.locked,isDraggable:a,onRotateStart:()=>{},onRotate:()=>{},onRotateStop:()=>{},updateLayer:G,showRotationHandle:ef},e.id);if("shape"===e.type){var l,r,o;return(0,i.jsx)(em.A,{id:e.id,isSelected:t,shapeType:e.shapeType,backgroundColor:null!=(l=e.backgroundColor)?l:"#FFFFFF",borderColor:null!=(r=e.borderColor)?r:"transparent",borderWidth:null!=(o=e.borderWidth)?o:0,x:e.x,y:e.y,width:e.width,height:e.height,rotation:e.rotation,onDragStop:(t,a)=>X(e.id,t,a),onResize:(t,a,i,s,l)=>Z(e.id,a,i,s,l),onResizeStop:(t,a,i,s,l)=>Z(e.id,a,i,s,l),enableResizing:s,disableDragging:!a,onSelect:()=>D(e.id),isLocked:e.locked,isDraggable:a,onRotateStart:()=>{},onRotate:()=>{},onRotateStop:()=>{},updateLayer:G,showRotationHandle:ef},e.id)}return null})}),(0,i.jsxs)("div",{className:"absolute inset-0 pointer-events-none",children:[c&&(0,i.jsx)("div",{className:"absolute inset-0",style:{opacity:N,backgroundImage:(()=>{let e="linear-gradient(".concat(b," 1px, transparent 1px), linear-gradient(90deg, ").concat(b," 1px, transparent 1px)");if(!w)return e;let t=b;try{let e=b.match(/rgba\((\d+),\s*(\d+),\s*(\d+),\s*([0-9.]+)\)/);if(e){let a=e[1],i=e[2],s=e[3];t="rgba(".concat(a,", ").concat(i,", ").concat(s,", ").concat(Math.min(1,Number(e[4])+.2),")")}}catch(e){}let a="linear-gradient(".concat(t," 1px, transparent 1px), linear-gradient(90deg, ").concat(t," 1px, transparent 1px)");return"".concat(e,", ").concat(a)})(),backgroundSize:(()=>{let e=f*k;if(!w)return"".concat(e,"px ").concat(e,"px");let t=e*Math.max(1,_);return"".concat(e,"px ").concat(e,"px, ").concat(t,"px ").concat(t,"px")})(),backgroundPosition:"0 0, 0 0"},"aria-hidden":"true"}),x&&(0,i.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,i.jsx)("div",{className:"border-2 border-dashed border-cyan-400/80 bg-cyan-400/10 rounded shadow-lg",style:{width:"90%",height:"90%",aspectRatio:"custom"===q?"".concat(U.width,"/").concat(U.height):q||"16:9"},"aria-hidden":"true"})}),u&&(0,i.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,i.jsx)("div",{className:"border-2 border-dashed border-emerald-400/85 bg-emerald-400/10 rounded shadow-lg",style:{width:"95%",height:"95%",aspectRatio:"custom"===q?"".concat(U.width,"/").concat(U.height):q||"16:9"},"aria-hidden":"true"})}),g&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,i.jsx)("div",{className:"w-full h-0.5 bg-rose-400/85 shadow-sm","aria-hidden":"true"})}),(0,i.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,i.jsx)("div",{className:"h-full w-0.5 bg-rose-400/85 shadow-sm","aria-hidden":"true"})})]})]})]})})})})]}),!t&&(0,i.jsx)("div",{className:"border-t bg-background max-h-[100vh] overflow-y-auto",children:(0,i.jsx)("div",{className:"p-2 lg:p-4 space-y-3",children:(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)("h4",{className:"text-sm font-medium text-muted-foreground",children:"クイックアクセス"}),(0,i.jsxs)(p.tU,{value:r,onValueChange:n,className:"w-full flex flex-col",children:[(0,i.jsxs)(p.j7,{className:"w-full h-16 items-center justify-center rounded-md bg-secondary p-1 text-secondary-foreground",children:[(0,i.jsx)(p.Xi,{value:"tools",className:"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-2 text-xs font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",children:"ツール設定"}),(0,i.jsx)(p.Xi,{value:"layers",className:"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-2 text-xs font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",children:"レイヤー管理"}),(0,i.jsx)(p.Xi,{value:"edit",className:"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-2 text-xs font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",children:"編集"}),(0,i.jsx)(p.Xi,{value:"display",className:"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-2 text-xs font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",children:"表示設定"})]}),(0,i.jsx)(p.av,{value:"tools",className:"mt-4 flex-1 overflow-y-auto",children:eo()}),(0,i.jsx)(p.av,{value:"layers",className:"mt-4 flex-1 overflow-y-auto",children:(0,i.jsx)(W.G,{context:{layers:L,updateLayer:G,removeLayer:O,selectedLayerId:J,setSelectedLayerId:D,reorderLayers:$,duplicateLayer:B,addLayer:V,moveLayerUp:M,moveLayerDown:P},onShapeSelect:t?void 0:e=>er(e),showShapeSelector:!0})}),(0,i.jsx)(p.av,{value:"edit",className:"mt-4 flex-1 overflow-y-auto",children:(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)("h4",{className:"text-sm font-medium",children:"レイヤー操作"}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,i.jsx)(o.$,{size:"sm",variant:"outline",onClick:()=>B(J),children:"複製"}),(0,i.jsx)(o.$,{size:"sm",variant:"outline",onClick:()=>O(J),children:"削除"}),(0,i.jsx)(o.$,{size:"sm",variant:"outline",onClick:()=>M(J),children:"最前面"}),(0,i.jsx)(o.$,{size:"sm",variant:"outline",onClick:()=>P(J),children:"最背面"})]})]}),(0,i.jsx)(eg.p,{selectedLayer:L.find(e=>e.id===J)||null,onUpdateLayer:G,className:"mt-4"})]})}),(0,i.jsx)(p.av,{value:"display",className:"mt-4 flex-1 overflow-y-auto",children:(0,i.jsx)(ev.a,{zoom:k,onZoomChange:I,showGrid:c,onShowGridChange:d,showGuides:g,onShowGuidesChange:v,showSafeArea:u,onShowSafeAreaChange:h,showAspectGuide:x,onShowAspectGuideChange:m,gridSize:f,onGridSizeChange:j})})]})]})})})]})};var ej=a(47739),eb=a(11860),eA=a(40369),eN=a(51431),eS=a(12786),ew=a(17410),ey=a(49907);function e_(){let{isOpen:e,setIsOpen:t,isDesktop:v}=(0,h.c)({defaultOpen:!1,desktopDefaultOpen:!0}),{isOpen:f,setIsOpen:j}=(0,h.c)({defaultOpen:!1,desktopDefaultOpen:!0}),[b,N]=s.useState("settings"),[S,w]=s.useState(!1),[y,_]=s.useState(!1),[T,F]=s.useState(!1),[R,z]=s.useState("templates"),[k,I]=s.useState(!1),[E,K]=s.useState(!0),[J,D]=s.useState(!1),[G,O]=s.useState(!1),[B,W]=s.useState(20),[$,V]=s.useState("rgba(136, 218, 255, 0.25)"),[q,U]=s.useState(.6),[H,X]=s.useState(!0),[Z,Y]=s.useState(5),[Q,ee]=s.useState(!1),[et,ea]=s.useState(8),[ei,es]=s.useState(!1),[el,er]=s.useState(!1),[eo,ed]=s.useState(!1),[ex,em]=s.useState("#ff0000"),[ep,eu]=s.useState("#0000ff"),[eh,eg]=s.useState(90),[ev,e_]=s.useState(!1),{handleAsyncError:eC}=(0,g.u)(),{selectedTemplate:eT,setSelectedTemplate:eF,currentText:eR,setCurrentText:ez,layers:ek,addLayer:eI,removeLayer:eE,updateLayer:eK,selectedLayerId:eL,setSelectedLayerId:eJ,reorderLayers:eD,duplicateLayer:eG,moveLayerUp:eO,moveLayerDown:eB,aspectRatio:eM,customAspectRatio:eW,restoreState:eP}=A(),e$=ek.find(e=>e.id===eL);s.useEffect(()=>{if(e$&&(0,eb.Nt)(e$))if(e$.textShadow&&"none"!==e$.textShadow?es(!0):es(!1),e$.textStrokeWidth&&"0px"!==e$.textStrokeWidth?er(!0):er(!1),e$.textGradient){ed(!0);let e=(e=>{let t=e.match(/linear-gradient\((\d+)deg,\s*(#[0-9a-fA-F]+),\s*(#[0-9a-fA-F]+)\)/);return t?{angle:parseInt(t[1]),color1:t[2],color2:t[3]}:{angle:90,color1:"#ff0000",color2:"#0000ff"}})(e$.textGradient);em(e.color1),eu(e.color2),eg(e.angle)}else ed(!1);else es(!1),er(!1),ed(!1)},[e$]),s.useEffect(()=>{try{let e=localStorage.getItem("assetCreator:grid:v1");if(e){let t=JSON.parse(e);"boolean"==typeof t.showGrid&&I(t.showGrid),"number"==typeof t.gridSize&&W(t.gridSize),"string"==typeof t.gridColor&&V(t.gridColor),"number"==typeof t.gridOpacity&&U(t.gridOpacity),"boolean"==typeof t.showMajorLines&&X(t.showMajorLines),"number"==typeof t.majorInterval&&Y(t.majorInterval),"boolean"==typeof t.snapToGrid&&ee(t.snapToGrid),"number"==typeof t.snapStrength&&ea(t.snapStrength)}}catch(e){}},[]),s.useEffect(()=>{try{localStorage.setItem("assetCreator:grid:v1",JSON.stringify({showGrid:k,gridSize:B,gridColor:$,gridOpacity:q,showMajorLines:H,majorInterval:Z,snapToGrid:Q,snapStrength:et}))}catch(e){}},[k,B,$,q,H,Z,Q,et]),s.useCallback(()=>{if(!v)return y?{width:"98vw",maxWidth:"none"}:{width:"90vw",maxWidth:"none"};if(y){let e=Math.min(.95*window.innerWidth,2400),t=Math.min(.85*window.innerHeight,1600);return{width:"".concat(e,"px"),maxWidth:"none",maxHeight:"".concat(t,"px")}}return e||f?{width:"min(1600px, 80vw)",maxWidth:"none"}:{width:"min(1800px, 90vw)",maxWidth:"none"}},[v,y,e,f]);let eV=((e,t,a)=>{let[i,l]=(0,s.useState)(1),[r,o]=(0,s.useState)(e),[n,c]=(0,s.useState)(t),d={id:"history-".concat(Date.now()),timestamp:Date.now(),actionType:"initial",description:"初期状態",layers:e,selectedLayerId:t},[x,m]=(0,s.useState)([d]),p=(0,s.useRef)({layers:e,selectedLayerId:t}),u=(0,s.useRef)(0),[h,g]=(0,s.useState)(0),[v,f]=(0,s.useState)(!1),[j,b]=(0,s.useState)(!1),A=(0,s.useRef)(!1),N=(0,s.useCallback)((e,t)=>{if(A.current)return;console.log("Adding to history:",{layers:e.length,selectedLayerId:t});let a=p.current,{type:i,description:s}=(0,ej.U)(a.layers,e,a.selectedLayerId,t),l={id:"history-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),timestamp:Date.now(),actionType:i,description:s,layers:e.map(e=>({...e})),selectedLayerId:t};m(e=>{let t,a=e.slice(0,u.current+1);return a.push(l),a.length>50?(a.shift(),t=Math.max(0,u.current-1)):t=u.current+1,u.current=t,g(t),f(t>0),b(!1),console.log("History updated:",{totalHistory:a.length,currentIndex:u.current,canUndo:u.current>0,canRedo:!1,actionType:i,description:s}),a}),p.current={layers:e.map(e=>({...e})),selectedLayerId:t}},[]),S=(0,s.useCallback)(e=>{if(e<0||e>=x.length)return console.error("Invalid history index:",e),null;let t=x[e];return t?(u.current=e,g(e),A.current=!0,f(e>0),b(e<x.length-1),console.log("Jumping to history index:",e,"description:",t.description),o([...t.layers]),c(t.selectedLayerId),a&&a(t.layers,t.selectedLayerId),p.current={layers:t.layers.map(e=>({...e})),selectedLayerId:t.selectedLayerId},setTimeout(()=>{A.current=!1},100),t):(console.error("History entry not found at index:",e),null)},[x,a]),w=(0,s.useCallback)(()=>(console.log("undo called:",{currentIndex:u.current,historyLength:x.length,canUndo:v}),u.current>=x.length&&(console.log("Index out of bounds, adjusting to:",x.length-1),u.current=x.length-1),u.current>0&&u.current<x.length)?S(u.current-1):null,[x,v,S]),y=(0,s.useCallback)(()=>(console.log("redo called:",{currentIndex:u.current,historyLength:x.length,canRedo:j}),u.current>=x.length&&(console.log("Index out of bounds, adjusting to:",x.length-1),u.current=x.length-1),u.current>=0&&u.current<x.length-1)?S(u.current+1):null,[x,j,S]),_=(0,s.useCallback)(()=>{A.current=!1},[]),C=(0,s.useCallback)((e,t)=>{try{let a={layers:e,selectedLayerId:t,timestamp:new Date().toISOString()};return localStorage.setItem("asset-creator-save",JSON.stringify(a)),!0}catch(e){return L.vF.error("保存失敗",e,"useCanvasOperations"),!1}},[]),T=(0,s.useCallback)(()=>{try{let e=localStorage.getItem("asset-creator-save");if(e)return JSON.parse(e)}catch(e){L.vF.error("ロード失敗",e,"useCanvasOperations")}return null},[]);return{zoom:i,setZoom:l,currentLayers:r,currentSelectedLayerId:n,undo:w,redo:y,canUndo:v,canRedo:j,addToHistory:N,resetHistoryFlag:_,jumpToHistory:S,history:x,historyIndex:u.current,saveToLocalStorage:C,loadFromLocalStorage:T}})(ek,eL,eP),{zoom:eq,setZoom:eU,addToHistory:eH,saveToLocalStorage:eX,loadFromLocalStorage:eZ,history:eY,historyIndex:eQ,jumpToHistory:e0}=eV,{isShiftKeyDown:e1,canUndo:e4,canRedo:e2}=(e=>{let{canvasOperations:t,guideSettings:a}=e;console.log("useKeyboardShortcuts hook called");let i=A();console.log("Canvas operations state:",{canUndo:t.canUndo,canRedo:t.canRedo,selectedLayerId:i.selectedLayerId});let[l,o]=(0,s.useState)(!1),{selectedLayerId:n,setSelectedLayerId:c,removeLayer:d,duplicateLayer:x}=i,{undo:m,redo:p,canUndo:u,canRedo:h}=t;console.log("Keyboard shortcuts state:",{canUndo:u,canRedo:h,selectedLayerId:n,canvasOperationsCanUndo:t.canUndo,canvasOperationsCanRedo:t.canRedo});let g=(0,s.useCallback)(e=>{if("Shift"===e.key)return void o(!0);let s=t.canUndo,l=t.canRedo;if(e.ctrlKey||e.metaKey)switch(e.key){case"z":e.preventDefault(),console.log("Ctrl+Z pressed",{canUndo:s,canRedo:l,shiftKey:e.shiftKey}),e.shiftKey?l?(console.log("Executing redo"),p()&&r.oR.success("やり直しました")):console.log("Cannot redo"):s?(console.log("Executing undo"),m()&&r.oR.success("元に戻しました")):console.log("Cannot undo");break;case"y":e.preventDefault(),console.log("Ctrl+Y pressed",{canRedo:l}),l?(console.log("Executing redo"),p()&&r.oR.success("やり直しました")):console.log("Cannot redo");break;case"d":e.preventDefault(),n&&(x(n),r.oR.success("レイヤーを複製しました"));break;case"Delete":case"Backspace":e.preventDefault(),n&&(d(n),r.oR.success("レイヤーを削除しました"));break;case"s":e.preventDefault(),t.saveToLocalStorage(i.layers,i.selectedLayerId)?r.oR.success("プロジェクトを保存しました"):r.oR.error("保存に失敗しました")}switch(e.key){case"Delete":case"Backspace":!n||e.ctrlKey||e.metaKey||(d(n),r.oR.success("レイヤーを削除しました"));break;case"Escape":n&&c(null);break;case"g":case"G":(null==a?void 0:a.setShowGrid)&&(null==a?void 0:a.showGrid)!==void 0&&a.setShowGrid(!a.showGrid);break;case"s":case"S":!e.ctrlKey&&!e.metaKey&&(null==a?void 0:a.setShowSafeArea)&&(null==a?void 0:a.showSafeArea)!==void 0&&a.setShowSafeArea(!a.showSafeArea);break;case"c":case"C":!e.ctrlKey&&!e.metaKey&&(null==a?void 0:a.setShowCenterLines)&&(null==a?void 0:a.showCenterLines)!==void 0&&a.setShowCenterLines(!a.showCenterLines)}},[t,i,n,c,d,x,m,p,o,a]),v=(0,s.useCallback)(e=>{"Shift"===e.key&&o(!1)},[o]);return(0,s.useEffect)(()=>(window.addEventListener("keydown",g),window.addEventListener("keyup",v),()=>{window.removeEventListener("keydown",g),window.removeEventListener("keyup",v)}),[g,v]),{isShiftKeyDown:l,canUndo:u,canRedo:h}})({canvasOperations:eV,guideSettings:{showGrid:k,setShowGrid:I,showSafeArea:J,setShowSafeArea:D,showCenterLines:G,setShowCenterLines:O}}),e6=s.useCallback(e=>e>=2||e>=1.5?.96:e>=1.2?.95:e>=.9?.9:e>=.6?.5:.9,[]),e9=s.useRef(400),e3=s.useCallback(()=>{let e,t,a,i=document.querySelector('[data-preview-container="true"]');if(!i)return 400;let s=i.getBoundingClientRect();if(s.width<=0||s.height<=0)return e9.current;if("custom"===eM)e=eW.width/eW.height;else{let[t,a]=eM.split(":").map(Number);e=t/a}let l=e6(e),r=Math.max((s.width-12)*l,200),o=Math.max((s.height-12)*l,150),n=r/e,c=o*e;return n<=o?(t=r,a=n):(t=c,a=o),L.vF.info("基準サイズ計算完了",{aspectRatio:eM,aspectRatioValue:e.toFixed(2),optimalSize:{width:t.toFixed(1),height:a.toFixed(1)},calculatedBaseSize:t.toFixed(1)},"calculateBaseSize"),t},[eM,eW,v,e6]);s.useEffect(()=>{e9.current=e3(),eU(1)},[eM,eW,e3,eU]),s.useEffect(()=>{let e=0,t=()=>{if(e>=20)return void L.vF.warn("基準サイズの計算がタイムアウトしました",{},"updateBaseSizeWhenReady");let a=document.querySelector('[data-preview-container="true"]');if(!a){e++,setTimeout(t,50);return}let i=a.getBoundingClientRect();if(i.width<=0||i.height<=0){e++,setTimeout(t,50);return}let s=e3();(s>400||s!==e9.current&&400===e9.current)&&(e9.current=s,eU(1),L.vF.info("初期基準サイズを更新しました",{baseSize:s},"updateBaseSizeWhenReady"))},a=setTimeout(t,100);return()=>{clearTimeout(a)}},[e3,eU,e,f,y]);let e5=s.useCallback(()=>{eU(1)},[eU]);s.useEffect(()=>{let e,t=()=>{e9.current=e3(),eU(1)},a=()=>{clearTimeout(e),e=setTimeout(t,150)};return window.addEventListener("resize",a),()=>{window.removeEventListener("resize",a),clearTimeout(e)}},[e3,eU]),s.useEffect(()=>{let e=e=>{if(e.ctrlKey||e.metaKey){e.preventDefault();let t=e.deltaY>0?"out":"in",a=[.1,.25,.5,.75,1,1.5,2,3],i=(e,t)=>"in"===t?a.find(t=>t>e)||Math.min(e+.25,3):[...a].reverse().find(t=>t<e)||Math.max(e-.25,.1),s=document.querySelector('[data-preview-container="true"]'),l=document.getElementById("thumbnail-preview");s&&l&&e9.current>0?eU(a=>{let r,o=i(a,t),n=e.clientX,c=e.clientY,d=s.getBoundingClientRect(),x=s.scrollLeft,m=s.scrollTop,p=n-d.left+x,u=c-d.top+m,h=l.getBoundingClientRect(),g=h.left-d.left+x,v=h.top-d.top+m,f=o/a,j=e9.current*a,b=e9.current*o;if("custom"===eM)r=eW.width/eW.height;else{let[e,t]=eM.split(":").map(Number);r=e/t}let A=j/r,N=b/r,S=g-(b-j)/2+(p-g)*f-(n-d.left),w=v-(N-A)/2+(u-v)*f-(c-d.top);return requestAnimationFrame(()=>{requestAnimationFrame(()=>{s&&(s.scrollLeft=Math.max(0,S),s.scrollTop=Math.max(0,w))})}),o}):eU(e=>i(e,t))}},t=document.getElementById("thumbnail-preview");if(t)return t.addEventListener("wheel",e,{passive:!1}),()=>{t.removeEventListener("wheel",e)}},[eU,eM,eW]);let e8=s.useRef(ek);s.useEffect(()=>{let e=e8.current;console.log("=== LAYERS EFFECT TRIGGERED ==="),console.log("Layers effect triggered:",{prev:e.length,current:ek.length,selectedLayerId:eL,canUndo:e4,canRedo:e2,prevLayers:e.map(e=>({id:e.id,type:e.type})),currentLayers:ek.map(e=>({id:e.id,type:e.type}))}),ek.length!==e.length?(console.log("*** LAYERS COUNT CHANGED ***"),console.log("Layers count changed, saving to history:",{prev:e.length,current:ek.length,selectedLayerId:eL}),setTimeout(()=>{console.log("*** EXECUTING DELAYED HISTORY SAVE ***"),eH(ek,eL)},100)):console.log("Layers count unchanged, skipping history save"),e8.current=ek,console.log("=== END LAYERS EFFECT ===")},[ek,eL,eH,e4,e2]),s.useEffect(()=>{v?(t(!0),j(!0)):(t(!1),j(!1))},[v,t,j]);let e7=s.useCallback(async(e,t)=>{w(!0);try{await eC(async()=>{let i,s,o={width:1920,height:1080};switch(t.resolution){case"hd":o={width:1280,height:720};break;case"fhd":o={width:1920,height:1080};break;case"4k":o={width:3840,height:2160};break;case"print":o={width:2480,height:3508};break;case"custom":t.customWidth&&t.customHeight&&(o={width:t.customWidth,height:t.customHeight})}if("custom"!==eM){let[e,t]=eM.split(":").map(Number);e>0&&t>0&&(o.width=Math.round(o.height*(e/t)))}else if(eW.width>0&&eW.height>0){let e=eW.width/eW.height;o.width=Math.round(o.height*e)}let n={cacheBust:!0,pixelRatio:t.pixelRatio||2,quality:"png"===t.format?1:.9,backgroundColor:t.backgroundColor||(t.includeTransparency?"transparent":"#ffffff"),width:o.width,height:o.height,style:{transform:"scale(1)",transformOrigin:"top left"}};if("png"===t.format)i=await (0,l.$E)(e,n),s="asset-".concat(t.optimizeForPlatform,"-").concat(o.width,"x").concat(o.height,".png");else if("jpeg"===t.format){let{toJpeg:l}=await Promise.resolve().then(a.bind(a,26059));i=await l(e,n),s="asset-".concat(t.optimizeForPlatform,"-").concat(o.width,"x").concat(o.height,".jpg")}else i=await (0,l.$E)(e,n),s="asset-".concat(t.optimizeForPlatform,"-").concat(o.width,"x").concat(o.height,".png");let c=document.createElement("a");c.download=s,c.href=i,c.click(),r.oR.success("".concat(s," をエクスポートしました"))},"エクスポートに失敗しました")}finally{w(!1)}},[eM,eW,eC]),te=s.useCallback(async(e,t)=>{w(!0);try{let i=t.batchSizes.filter(e=>e.selected);if(0===i.length)return void r.oR.error("エクスポートするサイズを選択してください");let s=i.map(async i=>{let s,r,o={cacheBust:!0,pixelRatio:t.pixelRatio||2,quality:"png"===t.format?1:.9,backgroundColor:t.backgroundColor||(t.includeTransparency?"transparent":"#ffffff"),width:i.width,height:i.height};if("png"===t.format)s=await (0,l.$E)(e,o),r="asset-".concat(i.platform,"-").concat(i.width,"x").concat(i.height,".png");else if("jpeg"===t.format){let{toJpeg:t}=await Promise.resolve().then(a.bind(a,26059));s=await t(e,o),r="asset-".concat(i.platform,"-").concat(i.width,"x").concat(i.height,".jpg")}else s=await (0,l.$E)(e,o),r="asset-".concat(i.platform,"-").concat(i.width,"x").concat(i.height,".png");let n=document.createElement("a");return n.download=r,n.href=s,n.click(),r}),o=await Promise.all(s);r.oR.success("".concat(o.length,"個のファイルをエクスポートしました"))}catch(e){L.vF.error("Batch export failed",e,"AssetCreator"),r.oR.error("バッチエクスポートに失敗しました")}finally{w(!1)}},[]),tt=s.useCallback(async e=>{let t=document.getElementById("download-target");if(!t)return void r.oR.error("プレビューエリアが見つかりません");try{await e7(t,{resolution:"super"===e?"4k":"high"===e?"fhd":"hd",quality:"high",format:"png",pixelRatio:"super"===e?4:"high"===e?2:1,backgroundColor:"#ffffff",includeTransparency:!1,optimizeForPlatform:"general",batchExport:!1,batchSizes:[]})}catch(e){L.vF.error("Export failed",e,"AssetCreator"),r.oR.error("エクスポートに失敗しました")}},[e7]),ta=s.useCallback(async e=>{let t=document.getElementById("download-target");if(!t)return void r.oR.error("プレビューエリアが見つかりません");try{let a={"twitter-post":{width:1200,height:675,pixelRatio:2,format:"png"},"twitter-header":{width:1500,height:500,pixelRatio:2,format:"png"},"youtube-thumbnail":{width:1280,height:720,pixelRatio:2,format:"png"},"youtube-thumbnail-hd":{width:1920,height:1080,pixelRatio:2,format:"png"},"instagram-post":{width:1080,height:1080,pixelRatio:2,format:"png"},"instagram-story":{width:1080,height:1920,pixelRatio:2,format:"png"}}[e],i={resolution:"custom",customWidth:a.width,customHeight:a.height,quality:"high",format:a.format,pixelRatio:a.pixelRatio,backgroundColor:"#ffffff",includeTransparency:!1,optimizeForPlatform:(e.startsWith("twitter")||e.startsWith("youtube"),"social"),batchExport:!1,batchSizes:[]};await e7(t,i)}catch(e){L.vF.error("Quick export failed",e,"AssetCreator"),r.oR.error("エクスポートに失敗しました")}},[e7]),ti=s.useCallback((e,t,a)=>{let i=a.x,s=a.y;if(Q){let e=Math.round(i/B)*B,t=Math.round(s/B)*B;Math.abs(e-i)<=et&&(i=e),Math.abs(t-s)<=et&&(s=t)}eK(e,{x:i,y:s})},[eK,Q,B,et]),ts=s.useCallback((e,t,a,i,s)=>{eK(e,{width:a.offsetWidth,height:a.offsetHeight,x:s.x,y:s.y})},[eK]),tl=e=>{let t=ek.filter(e=>"shape"===e.type).length*(v?20:5),a=ek.filter(t=>"shape"===t.type&&"shapeType"in t&&t.shapeType===e).length+1,i="",s=v?550:10,l=v?250:10,r=v?300:50,o=v?300:50,n=v?2:1,c=v?300:100,d=v?5:3;switch(e){case"rectangle":i="四角 ".concat(a);break;case"circle":i="円 ".concat(a);break;case"triangle":i="三角 ".concat(a);break;case"line":i="線 ".concat(a);break;case"arrow":i="矢印 ".concat(a);break;case"star":i="星 ".concat(a);break;case"polygon":i="多角形 ".concat(a);break;case"heart":i="ハート ".concat(a);break;case"diamond":i="ダイヤ ".concat(a);break;case"dashed-line":case"dotted-line":i="点線 ".concat(a);break;case"wavy-line":i="波線 ".concat(a);break;case"speech-bubble-round":i="吹き出し ".concat(a);break;case"speech-bubble-square":i="吹き出し(角) ".concat(a);break;case"thought-bubble":i="思考バブル ".concat(a);break;case"badge":i="バッジ ".concat(a);break;case"ribbon":i="リボン ".concat(a);break;default:i="図形 ".concat(a)}eI({type:"shape",shapeType:e,name:i,visible:!0,locked:!1,x:s+t,y:l+t,width:"line"===e||"arrow"===e||"dashed-line"===e||"dotted-line"===e||"wavy-line"===e?c:r,height:"line"===e||"arrow"===e||"dashed-line"===e||"dotted-line"===e||"wavy-line"===e?d:o,backgroundColor:"#cccccc",borderColor:"#000000",borderWidth:n})},tr=s.useCallback(()=>{eX(ek,eL)?r.oR.success("プロジェクトを保存しました"):r.oR.error("保存に失敗しました")},[eX,ek,eL]),to=s.useCallback(()=>{console.log("Toolbar undo button clicked"),eV.undo()?r.oR.success("元に戻しました"):console.log("Undo failed - no history to undo")},[eV.undo]),tn=s.useCallback(()=>{console.log("Toolbar redo button clicked"),eV.redo()?r.oR.success("やり直しました"):console.log("Redo failed - no history to redo")},[eV.redo]);if(s.useEffect(()=>{v&&F(!1)},[v]),!eT)return(0,i.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)(u.A,{className:"w-16 h-16 text-[#A0A0A0] mb-4 animate-spin mx-auto","aria-hidden":"true"}),(0,i.jsx)("p",{className:"text-[#E0E0E0] text-lg font-semibold",children:"テンプレートを読み込み中..."}),(0,i.jsx)("p",{className:"text-[#A0A0A0] mt-2",children:"しばらくお待ちください。"})]})});let tc=()=>{var e,t,a,s,l,r,p,u,h,g,v,f,j,b,A,N,S,w,y,_,T,F,R,z,E,K,L,J,D,G,O,M;return(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)("h4",{className:"font-medium",children:"基本情報"}),(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(n.J,{className:"text-sm font-medium",children:"レイヤー名"}),(0,i.jsx)(c.p,{value:(null==e$?void 0:e$.name)||"",onChange:e=>e$&&eK(e$.id,{name:e.target.value}),className:"mt-1",placeholder:"レイヤー名を入力",disabled:!e$})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(n.J,{className:"text-sm font-medium",children:"X座標"}),(0,i.jsx)(c.p,{type:"number",value:(null==e$?void 0:e$.x)||0,onChange:e=>e$&&eK(e$.id,{x:Number(e.target.value)}),className:"mt-1",disabled:!e$})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(n.J,{className:"text-sm font-medium",children:"Y座標"}),(0,i.jsx)(c.p,{type:"number",value:(null==e$?void 0:e$.y)||0,onChange:e=>e$&&eK(e$.id,{y:Number(e.target.value)}),className:"mt-1",disabled:!e$})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(n.J,{className:"text-sm font-medium",children:"幅"}),(0,i.jsx)(c.p,{type:"number",value:(null==e$?void 0:e$.width)||0,onChange:e=>e$&&eK(e$.id,{width:Number(e.target.value)}),className:"mt-1",disabled:!e$})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(n.J,{className:"text-sm font-medium",children:"高さ"}),(0,i.jsx)(c.p,{type:"number",value:(null==e$?void 0:e$.height)||0,onChange:e=>e$&&eK(e$.id,{height:Number(e.target.value)}),className:"mt-1",disabled:!e$})]})]})]})]}),e$&&(0,eb.Nt)(e$)&&(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)("h4",{className:"font-medium",children:"テキスト設定"}),(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(n.J,{className:"text-sm font-medium",children:"テキスト"}),(0,i.jsx)(m.T,{value:e$.text||"",onChange:e=>eK(e$.id,{text:e.target.value}),className:"mt-1 min-h-[80px] resize-none",placeholder:"テキストを入力してください"})]}),(0,i.jsxs)("div",{className:"space-y-3 pt-2 border-t border-[#4A4A4A]",children:[(0,i.jsx)("h5",{className:"text-sm font-medium text-[#E0E0E0]",children:"フォント設定"}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(n.J,{className:"text-xs text-[#A0A0A0]",children:"フォントファミリー"}),(0,i.jsx)(eA.R,{value:e$.fontFamily||"Arial, sans-serif",onValueChange:e=>eK(e$.id,{fontFamily:e})})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(n.J,{className:"text-xs text-[#A0A0A0]",children:"フォントウェイト"}),(0,i.jsxs)(x.l6,{value:e$.fontWeight||"normal",onValueChange:e=>eK(e$.id,{fontWeight:e}),children:[(0,i.jsx)(x.bq,{className:"h-8 text-xs",children:(0,i.jsx)(x.yv,{})}),(0,i.jsxs)(x.gC,{children:[(0,i.jsx)(x.eb,{value:"normal",children:"通常"}),(0,i.jsx)(x.eb,{value:"bold",children:"太字"}),(0,i.jsx)(x.eb,{value:"lighter",children:"細字"}),(0,i.jsx)(x.eb,{value:"100",children:"100"}),(0,i.jsx)(x.eb,{value:"300",children:"300"}),(0,i.jsx)(x.eb,{value:"400",children:"400"}),(0,i.jsx)(x.eb,{value:"500",children:"500"}),(0,i.jsx)(x.eb,{value:"600",children:"600"}),(0,i.jsx)(x.eb,{value:"700",children:"700"}),(0,i.jsx)(x.eb,{value:"800",children:"800"}),(0,i.jsx)(x.eb,{value:"900",children:"900"})]})]})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(n.J,{className:"text-xs text-[#A0A0A0]",children:"フォントスタイル"}),(0,i.jsxs)(x.l6,{value:e$.fontStyle||"normal",onValueChange:e=>eK(e$.id,{fontStyle:e}),children:[(0,i.jsx)(x.bq,{className:"h-8 text-xs",children:(0,i.jsx)(x.yv,{})}),(0,i.jsxs)(x.gC,{children:[(0,i.jsx)(x.eb,{value:"normal",children:"通常"}),(0,i.jsx)(x.eb,{value:"italic",children:"イタリック"}),(0,i.jsx)(x.eb,{value:"oblique",children:"斜体"})]})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(n.J,{className:"text-xs text-[#A0A0A0]",children:"文字装飾"}),(0,i.jsxs)(x.l6,{value:e$.textDecoration||"none",onValueChange:e=>eK(e$.id,{textDecoration:e}),children:[(0,i.jsx)(x.bq,{className:"h-8 text-xs",children:(0,i.jsx)(x.yv,{})}),(0,i.jsxs)(x.gC,{children:[(0,i.jsx)(x.eb,{value:"none",children:"なし"}),(0,i.jsx)(x.eb,{value:"underline",children:"下線"}),(0,i.jsx)(x.eb,{value:"line-through",children:"取り消し線"}),(0,i.jsx)(x.eb,{value:"overline",children:"上線"})]})]})]})]})]}),(0,i.jsxs)("div",{className:"space-y-3 pt-2 border-t border-[#4A4A4A]",children:[(0,i.jsx)("h5",{className:"text-sm font-medium text-[#E0E0E0]",children:"サイズ設定"}),(0,i.jsxs)("div",{children:[(0,i.jsx)(n.J,{className:"text-xs text-[#A0A0A0]",children:"フォントサイズ"}),(0,i.jsx)(d.A,{value:[parseFloat((null==(e=e$.fontSize)?void 0:e.replace("rem",""))||"2")],onValueChange:e=>{let[t]=e;return eK(e$.id,{fontSize:"".concat(t,"rem")})},min:.5,max:8,step:.1,className:"mt-2"}),(0,i.jsx)("div",{className:"text-xs text-[#A0A0A0] text-center mt-1",children:e$.fontSize||"2rem"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(n.J,{className:"text-xs text-[#A0A0A0]",children:"文字間隔"}),(0,i.jsx)(d.A,{value:[parseFloat((null==(t=e$.letterSpacing)?void 0:t.replace("px",""))||"0")],onValueChange:e=>{let[t]=e;return eK(e$.id,{letterSpacing:"".concat(t,"px")})},min:-10,max:20,step:.5,className:"mt-2"}),(0,i.jsx)("div",{className:"text-xs text-[#A0A0A0] text-center mt-1",children:e$.letterSpacing||"0px"})]})]}),(0,i.jsxs)("div",{className:"space-y-3 pt-2 border-t border-[#4A4A4A]",children:[(0,i.jsx)("h5",{className:"text-sm font-medium text-[#E0E0E0]",children:"色・効果"}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)(n.J,{className:"text-xs text-[#A0A0A0]",children:"グラデーション"}),(0,i.jsx)(o.$,{size:"sm",variant:eo?"default":"outline",onClick:()=>{let e=!eo;ed(e),e?eK(e$.id,{textGradient:"linear-gradient(90deg, #ff0000, #0000ff)"}):eK(e$.id,{textGradient:void 0})},className:"h-6 px-3 text-xs",children:eo?"ON":"OFF"})]}),eo&&(0,i.jsxs)("div",{className:"pl-2 border-l-2 border-[#4A4A4A] space-y-3",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(n.J,{className:"text-xs text-[#A0A0A0]",children:"プリセット"}),(0,i.jsx)("div",{className:"grid grid-cols-4 gap-2 mt-2",children:[{name:"虹",gradient:"linear-gradient(90deg, #ff0000, #ff7f00, #ffff00, #00ff00, #0000ff, #4b0082, #9400d3)"},{name:"金",gradient:"linear-gradient(135deg, #ffd700, #ffed4e)"},{name:"銀",gradient:"linear-gradient(135deg, #c0c0c0, #ffffff)"},{name:"紅白",gradient:"linear-gradient(90deg, #ff6b9d, #ffffff)"},{name:"青→白",gradient:"linear-gradient(90deg, #4169e1, #87ceeb)"},{name:"紫→ピンク",gradient:"linear-gradient(90deg, #9b59b6, #e91e63)"},{name:"オレンジ→ピンク",gradient:"linear-gradient(90deg, #ff8c00, #ff69b4)"},{name:"緑→青",gradient:"linear-gradient(90deg, #00ff7f, #00ced1)"}].map(e=>(0,i.jsx)("button",{onClick:()=>{eK(e$.id,{textGradient:e.gradient}),e_(!1)},className:"h-8 rounded border border-[#4A4A4A] hover:border-[#808080] transition-colors text-[10px] relative overflow-hidden group",style:{background:e.gradient},title:e.name,children:(0,i.jsx)("span",{className:"relative z-10 text-white drop-shadow-[0_1px_2px_rgba(0,0,0,0.8)]",children:e.name})},e.name))})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,i.jsx)(n.J,{className:"text-xs text-[#A0A0A0]",children:"カスタム"}),(0,i.jsx)(o.$,{size:"sm",variant:ev?"default":"outline",onClick:()=>e_(!ev),className:"h-6 px-3 text-xs",children:ev?"閉じる":"開く"})]}),ev&&(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(n.J,{className:"text-xs text-[#A0A0A0]",children:"開始色"}),(0,i.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,i.jsx)("input",{type:"color",value:ex,onChange:e=>em(e.target.value),className:"w-8 h-7 rounded border border-[#4A4A4A]"}),(0,i.jsx)(c.p,{value:ex,onChange:e=>em(e.target.value),className:"flex-1 h-7 text-xs"})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(n.J,{className:"text-xs text-[#A0A0A0]",children:"終了色"}),(0,i.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,i.jsx)("input",{type:"color",value:ep,onChange:e=>eu(e.target.value),className:"w-8 h-7 rounded border border-[#4A4A4A]"}),(0,i.jsx)(c.p,{value:ep,onChange:e=>eu(e.target.value),className:"flex-1 h-7 text-xs"})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(n.J,{className:"text-xs text-[#A0A0A0]",children:"方向"}),(0,i.jsxs)(x.l6,{value:eh.toString(),onValueChange:e=>eg(parseInt(e)),children:[(0,i.jsx)(x.bq,{className:"h-7 text-xs",children:(0,i.jsx)(x.yv,{})}),(0,i.jsxs)(x.gC,{children:[(0,i.jsx)(x.eb,{value:"0",children:"→ 横"}),(0,i.jsx)(x.eb,{value:"90",children:"↓ 縦"}),(0,i.jsx)(x.eb,{value:"135",children:"↘ 斜め右下"}),(0,i.jsx)(x.eb,{value:"45",children:"↗ 斜め右上"})]})]})]}),(0,i.jsx)(o.$,{onClick:()=>{eK(e$.id,{textGradient:"linear-gradient(".concat(eh,"deg, ").concat(ex,", ").concat(ep,")")})},size:"sm",className:"w-full h-7 text-xs",children:"適用"})]})]}),(0,i.jsxs)("details",{className:"text-xs",children:[(0,i.jsx)("summary",{className:"text-[#A0A0A0] cursor-pointer hover:text-[#E0E0E0]",children:"詳細設定（CSS手入力）"}),(0,i.jsxs)("div",{className:"mt-2",children:[(0,i.jsx)(c.p,{value:e$.textGradient||"",onChange:e=>eK(e$.id,{textGradient:e.target.value}),className:"h-7 text-xs",placeholder:"linear-gradient(90deg, #ff0000, #0000ff)"}),(0,i.jsx)("div",{className:"text-[10px] text-[#808080] mt-1",children:"例: linear-gradient(90deg, #ff0000, #0000ff)"})]})]})]})]}),!eo&&(0,i.jsxs)("div",{children:[(0,i.jsx)(n.J,{className:"text-xs text-[#A0A0A0]",children:"色"}),(0,i.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,i.jsx)("input",{type:"color",value:e$.color||"#ffffff",onChange:e=>eK(e$.id,{color:e.target.value}),className:"w-8 h-8 rounded border border-[#4A4A4A]"}),(0,i.jsx)(c.p,{value:e$.color||"#ffffff",onChange:e=>eK(e$.id,{color:e.target.value}),className:"flex-1"})]})]}),(0,i.jsxs)("div",{className:"space-y-2 pt-1",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)(n.J,{className:"text-xs text-[#A0A0A0]",children:"アウトライン"}),(0,i.jsx)(o.$,{size:"sm",variant:el?"default":"outline",onClick:()=>{let e=!el;er(e),e?eK(e$.id,{textStrokeWidth:"2px",textStrokeColor:"#000000"}):eK(e$.id,{textStrokeWidth:"0px"})},className:"h-6 px-3 text-xs",children:el?"ON":"OFF"})]}),el&&(0,i.jsxs)("div",{className:"space-y-2 pl-2 border-l-2 border-[#4A4A4A]",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(n.J,{className:"text-xs text-[#A0A0A0]",children:"太さ"}),(0,i.jsx)(d.A,{value:[parseFloat((null==(a=e$.textStrokeWidth)?void 0:a.replace("px",""))||"2")],onValueChange:e=>{let[t]=e;return eK(e$.id,{textStrokeWidth:"".concat(t,"px")})},min:.5,max:20,step:.5,className:"mt-2"}),(0,i.jsx)("div",{className:"text-xs text-[#A0A0A0] text-center mt-1",children:e$.textStrokeWidth||"2px"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(n.J,{className:"text-xs text-[#A0A0A0]",children:"色"}),(0,i.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,i.jsx)("input",{type:"color",value:e$.textStrokeColor||"#000000",onChange:e=>eK(e$.id,{textStrokeColor:e.target.value}),className:"w-8 h-7 rounded border border-[#4A4A4A]"}),(0,i.jsx)(c.p,{value:e$.textStrokeColor||"#000000",onChange:e=>eK(e$.id,{textStrokeColor:e.target.value}),className:"flex-1 h-7 text-xs"})]})]})]})]})]}),(0,i.jsxs)("div",{className:"space-y-3 pt-2 border-t border-[#4A4A4A]",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)(n.J,{className:"text-xs text-[#A0A0A0]",children:"文字シャドウ"}),(0,i.jsx)(o.$,{size:"sm",variant:ei?"default":"outline",onClick:()=>{let e=!ei;es(e),e?eK(e$.id,{textShadow:"2px 2px 4px rgba(0,0,0,0.5)"}):eK(e$.id,{textShadow:"none"})},className:"h-6 px-3 text-xs",children:ei?"ON":"OFF"})]}),ei&&(()=>{let e=(0,eS.T)(e$.textShadow),t=(e,t)=>{let a={...(0,eS.T)(e$.textShadow),[e]:t},i=(0,eS.A)(a.x,a.y,a.blur,a.color,a.opacity);eK(e$.id,{textShadow:i})};return(0,i.jsxs)("div",{className:"space-y-3 pl-2 border-l-2 border-[#4A4A4A]",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(n.J,{className:"text-xs text-[#A0A0A0]",children:"水平位置（X）"}),(0,i.jsx)(d.A,{value:[e.x],onValueChange:e=>{let[a]=e;return t("x",a)},min:-20,max:20,step:1,className:"mt-2"}),(0,i.jsxs)("div",{className:"text-xs text-[#A0A0A0] text-center mt-1",children:[e.x,"px"]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(n.J,{className:"text-xs text-[#A0A0A0]",children:"垂直位置（Y）"}),(0,i.jsx)(d.A,{value:[e.y],onValueChange:e=>{let[a]=e;return t("y",a)},min:-20,max:20,step:1,className:"mt-2"}),(0,i.jsxs)("div",{className:"text-xs text-[#A0A0A0] text-center mt-1",children:[e.y,"px"]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(n.J,{className:"text-xs text-[#A0A0A0]",children:"ぼかし"}),(0,i.jsx)(d.A,{value:[e.blur],onValueChange:e=>{let[a]=e;return t("blur",a)},min:0,max:30,step:1,className:"mt-2"}),(0,i.jsxs)("div",{className:"text-xs text-[#A0A0A0] text-center mt-1",children:[e.blur,"px"]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(n.J,{className:"text-xs text-[#A0A0A0]",children:"影の色"}),(0,i.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,i.jsx)("input",{type:"color",value:e.color,onChange:e=>t("color",e.target.value),className:"w-10 h-8 rounded border border-[#4A4A4A]"}),(0,i.jsx)(c.p,{value:e.color,onChange:e=>t("color",e.target.value),className:"h-8 text-xs"})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(n.J,{className:"text-xs text-[#A0A0A0]",children:"不透明度"}),(0,i.jsx)(d.A,{value:[100*e.opacity],onValueChange:e=>{let[a]=e;return t("opacity",a/100)},min:0,max:100,step:1,className:"mt-2"}),(0,i.jsxs)("div",{className:"text-xs text-[#A0A0A0] text-center mt-1",children:[Math.round(100*e.opacity),"%"]})]})]})})()]})]})]}),e$&&(0,eb.pz)(e$)&&(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)("h4",{className:"font-medium",children:"画像設定"}),(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(n.J,{className:"text-sm font-medium",children:"画像を変更"}),(0,i.jsx)(c.p,{type:"file",accept:"image/*",onChange:e=>{var t;let a=null==(t=e.target.files)?void 0:t[0];if(a){let e=URL.createObjectURL(a);eK(e$.id,{src:e})}},className:"mt-1"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(n.J,{className:"text-sm font-medium",children:"不透明度"}),(0,i.jsx)(d.A,{value:[e$.opacity||100],onValueChange:e=>{let[t]=e;return eK(e$.id,{opacity:t})},min:0,max:100,step:1,className:"mt-2"}),(0,i.jsxs)("div",{className:"text-xs text-[#A0A0A0] text-center mt-1",children:[e$.opacity||100,"%"]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(n.J,{className:"text-sm font-medium",children:"回転角度"}),(0,i.jsx)(d.A,{value:[e$.rotation||0],onValueChange:e=>{let[t]=e;return eK(e$.id,{rotation:t})},min:-180,max:180,step:1,className:"mt-2"}),(0,i.jsxs)("div",{className:"text-xs text-[#A0A0A0] text-center mt-1",children:[e$.rotation||0,"\xb0"]})]}),(0,i.jsxs)("div",{className:"space-y-3 pt-2 border-t border-[#3A3A3A]",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)(n.J,{className:"text-sm font-medium",children:"フィルター・エフェクト"}),(0,i.jsx)(o.$,{variant:"ghost",size:"sm",className:"h-7 text-xs text-[#A0A0A0] hover:text-[#E0E0E0]",onClick:()=>{let e=e$.imageFilters;(null==e?void 0:e.enabled)?eK(e$.id,{imageFilters:{...e,enabled:!1}}):eK(e$.id,{imageFilters:e?{...e,enabled:!0}:{brightness:100,contrast:100,saturate:100,hueRotate:0,sepia:0,grayscale:0,blur:0,enabled:!0}})},children:(null==(s=e$.imageFilters)?void 0:s.enabled)?"OFF":"ON"})]}),(null==(l=e$.imageFilters)?void 0:l.enabled)&&(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(n.J,{className:"text-xs text-[#A0A0A0] mb-2 block",children:"雰囲気プリセット"}),(0,i.jsx)("div",{className:"grid grid-cols-3 gap-2",children:Object.keys(ew.Su).filter(e=>"none"!==e).map(e=>{var t;ew.Su[e];let a=(null==(t=e$.imageFilters)?void 0:t.preset)===e;return(0,i.jsx)("button",{type:"button",onClick:()=>{let t=(0,ew.Ur)(e);eK(e$.id,{imageFilters:t})},className:(0,C.cn)("px-2 py-1.5 text-xs rounded border transition-colors",a?"bg-[#20B2AA]/20 border-[#20B2AA] text-[#E0E0E0]":"bg-[#2D2D2D] border-[#4A4A4A] text-[#A0A0A0] hover:bg-[#3A3A3A]"),title:"soft"===e?"ソフト":"cool"===e?"クール":"pop"===e?"ポップ":"monochrome"===e?"モノクロ":"sepia"===e?"セピア":e,children:"soft"===e?"ソフト":"cool"===e?"クール":"pop"===e?"ポップ":"monochrome"===e?"モノクロ":"sepia"===e?"セピア":e},e)})})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(n.J,{className:"text-xs text-[#A0A0A0]",children:"基本調整"}),(0,i.jsxs)("div",{children:[(0,i.jsx)(n.J,{className:"text-xs text-[#A0A0A0]",children:"明るさ"}),(0,i.jsx)(d.A,{value:[null!=(_=null==(r=e$.imageFilters)?void 0:r.brightness)?_:100],onValueChange:e=>{let[t]=e,a=e$.imageFilters||{};eK(e$.id,{imageFilters:{...a,brightness:t,enabled:!0,preset:"custom"}})},min:0,max:200,step:1,className:"mt-2"}),(0,i.jsxs)("div",{className:"text-xs text-[#A0A0A0] text-center mt-1",children:[null!=(T=null==(p=e$.imageFilters)?void 0:p.brightness)?T:100,"%"]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(n.J,{className:"text-xs text-[#A0A0A0]",children:"コントラスト"}),(0,i.jsx)(d.A,{value:[null!=(F=null==(u=e$.imageFilters)?void 0:u.contrast)?F:100],onValueChange:e=>{let[t]=e,a=e$.imageFilters||{};eK(e$.id,{imageFilters:{...a,contrast:t,enabled:!0,preset:"custom"}})},min:0,max:200,step:1,className:"mt-2"}),(0,i.jsxs)("div",{className:"text-xs text-[#A0A0A0] text-center mt-1",children:[null!=(R=null==(h=e$.imageFilters)?void 0:h.contrast)?R:100,"%"]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(n.J,{className:"text-xs text-[#A0A0A0]",children:"彩度"}),(0,i.jsx)(d.A,{value:[null!=(z=null==(g=e$.imageFilters)?void 0:g.saturate)?z:100],onValueChange:e=>{let[t]=e,a=e$.imageFilters||{};eK(e$.id,{imageFilters:{...a,saturate:t,enabled:!0,preset:"custom"}})},min:0,max:200,step:1,className:"mt-2"}),(0,i.jsxs)("div",{className:"text-xs text-[#A0A0A0] text-center mt-1",children:[null!=(E=null==(v=e$.imageFilters)?void 0:v.saturate)?E:100,"%"]})]})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(n.J,{className:"text-xs text-[#A0A0A0]",children:"雰囲気調整"}),(0,i.jsxs)("div",{children:[(0,i.jsx)(n.J,{className:"text-xs text-[#A0A0A0]",children:"色相"}),(0,i.jsx)(d.A,{value:[null!=(K=null==(f=e$.imageFilters)?void 0:f.hueRotate)?K:0],onValueChange:e=>{let[t]=e,a=e$.imageFilters||{};eK(e$.id,{imageFilters:{...a,hueRotate:t,enabled:!0,preset:"custom"}})},min:0,max:360,step:1,className:"mt-2"}),(0,i.jsxs)("div",{className:"text-xs text-[#A0A0A0] text-center mt-1",children:[null!=(L=null==(j=e$.imageFilters)?void 0:j.hueRotate)?L:0,"\xb0"]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(n.J,{className:"text-xs text-[#A0A0A0]",children:"セピア"}),(0,i.jsx)(d.A,{value:[null!=(J=null==(b=e$.imageFilters)?void 0:b.sepia)?J:0],onValueChange:e=>{let[t]=e,a=e$.imageFilters||{};eK(e$.id,{imageFilters:{...a,sepia:t,enabled:!0,preset:"custom"}})},min:0,max:100,step:1,className:"mt-2"}),(0,i.jsxs)("div",{className:"text-xs text-[#A0A0A0] text-center mt-1",children:[null!=(D=null==(A=e$.imageFilters)?void 0:A.sepia)?D:0,"%"]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(n.J,{className:"text-xs text-[#A0A0A0]",children:"モノクロ"}),(0,i.jsx)(d.A,{value:[null!=(G=null==(N=e$.imageFilters)?void 0:N.grayscale)?G:0],onValueChange:e=>{let[t]=e,a=e$.imageFilters||{};eK(e$.id,{imageFilters:{...a,grayscale:t,enabled:!0,preset:"custom"}})},min:0,max:100,step:1,className:"mt-2"}),(0,i.jsxs)("div",{className:"text-xs text-[#A0A0A0] text-center mt-1",children:[null!=(O=null==(S=e$.imageFilters)?void 0:S.grayscale)?O:0,"%"]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(n.J,{className:"text-xs text-[#A0A0A0]",children:"ぼかし"}),(0,i.jsx)(d.A,{value:[null!=(M=null==(w=e$.imageFilters)?void 0:w.blur)?M:0],onValueChange:e=>{let[t]=e,a=e$.imageFilters||{};eK(e$.id,{imageFilters:{...a,blur:t,enabled:!0,preset:"custom"}})},min:0,max:10,step:.1,className:"mt-2"}),(0,i.jsxs)("div",{className:"text-xs text-[#A0A0A0] text-center mt-1",children:[(null==(y=e$.imageFilters)?void 0:y.blur)?e$.imageFilters.blur.toFixed(1):"0.0","px"]})]})]}),(0,i.jsx)(o.$,{variant:"outline",size:"sm",className:"w-full h-8 text-xs",onClick:()=>{eK(e$.id,{imageFilters:ew.Su.none})},children:"リセット"})]})]})]})]}),e$&&(0,eb.jS)(e$)&&(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)("h4",{className:"font-medium",children:"図形設定"}),(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(n.J,{className:"text-sm font-medium",children:"図形の種類"}),(0,i.jsx)("div",{className:"mt-2",children:(0,i.jsx)(eN.X,{value:e$.shapeType||"rectangle",onChange:e=>eK(e$.id,{shapeType:e})})})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(n.J,{className:"text-sm font-medium",children:"塗りつぶし色"}),(0,i.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,i.jsx)("input",{type:"color",value:e$.backgroundColor||"#000000",onChange:e=>eK(e$.id,{backgroundColor:e.target.value}),className:"w-8 h-8 rounded border border-[#4A4A4A]"}),(0,i.jsx)(c.p,{value:e$.backgroundColor||"#000000",onChange:e=>eK(e$.id,{backgroundColor:e.target.value}),className:"flex-1"})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(n.J,{className:"text-sm font-medium",children:"境界線色"}),(0,i.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,i.jsx)("input",{type:"color",value:e$.borderColor||"#000000",onChange:e=>eK(e$.id,{borderColor:e.target.value}),className:"w-8 h-8 rounded border border-[#4A4A4A]"}),(0,i.jsx)(c.p,{value:e$.borderColor||"#000000",onChange:e=>eK(e$.id,{borderColor:e.target.value}),className:"flex-1"})]})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(n.J,{className:"text-sm font-medium",children:"境界線の太さ"}),(0,i.jsx)(d.A,{value:[e$.borderWidth||0],onValueChange:e=>{let[t]=e;return eK(e$.id,{borderWidth:t})},min:0,max:20,step:1,className:"mt-2"}),(0,i.jsxs)("div",{className:"text-xs text-[#A0A0A0] text-center mt-1",children:[e$.borderWidth||0,"px"]})]})]})]}),(0,i.jsxs)("div",{className:"space-y-4 pt-2 border-t border-[#4A4A4A]",id:"grid-settings",children:[(0,i.jsx)("h4",{className:"font-medium",children:"プレビュー設定"}),(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)(n.J,{className:"text-xs text-muted-foreground",children:"グリッド表示"}),(0,i.jsx)(o.$,{size:"sm",variant:k?"default":"outline",onClick:()=>I(!k),className:"h-7 px-3 text-xs",children:k?"ON":"OFF"})]}),k&&(0,i.jsxs)("div",{className:"space-y-3 pl-2 border-l",children:[(0,i.jsxs)("div",{className:"space-y-1",children:[(0,i.jsx)(n.J,{className:"text-xs text-muted-foreground",children:"グリッドサイズ"}),(0,i.jsx)("div",{className:"flex gap-1",children:[10,20,40].map(e=>(0,i.jsxs)(o.$,{size:"sm",variant:B===e?"default":"outline",onClick:()=>W(e),className:"h-7 px-2 text-xs",children:[e,"px"]},e))})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(n.J,{className:"text-xs text-muted-foreground w-20",children:"色"}),(0,i.jsx)("input",{type:"color",value:function(){try{let e=$.match(/rgba\((\d+),\s*(\d+),\s*(\d+),/);if(e){let t=parseInt(e[1],10),a=parseInt(e[2],10),i=parseInt(e[3],10),s=e=>e.toString(16).padStart(2,"0");return"#".concat(s(t)).concat(s(a)).concat(s(i))}}catch(e){}return"#88daff"}(),onChange:e=>{let t=e.target.value,a=parseInt(t.slice(1,3),16),i=parseInt(t.slice(3,5),16),s=parseInt(t.slice(5,7),16);V("rgba(".concat(a,", ").concat(i,", ").concat(s,", ").concat(Math.max(0,Math.min(1,q)),")"))},className:"w-8 h-7 rounded border"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(n.J,{className:"text-xs text-muted-foreground",children:"不透明度"}),(0,i.jsx)(d.A,{value:[Math.round(100*q)],onValueChange:e=>{let[t]=e;return U(t/100)},min:10,max:100,step:5,className:"mt-2"}),(0,i.jsxs)("div",{className:"text-xs text-muted-foreground text-center mt-1",children:[Math.round(100*q),"%"]})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)(n.J,{className:"text-xs text-muted-foreground",children:"主要線"}),(0,i.jsx)(o.$,{size:"sm",variant:H?"default":"outline",onClick:()=>X(!H),className:"h-7 px-3 text-xs",children:H?"ON":"OFF"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(n.J,{className:"text-xs text-muted-foreground",children:"主要線の間隔"}),(0,i.jsx)("div",{className:"flex gap-1 mt-1",children:[3,5,10].map(e=>(0,i.jsx)(o.$,{size:"sm",variant:Z===e?"default":"outline",onClick:()=>Y(e),className:"h-7 px-2 text-xs",children:e},e))})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)(n.J,{className:"text-xs text-muted-foreground",children:"スナップ"}),(0,i.jsx)(o.$,{size:"sm",variant:Q?"default":"outline",onClick:()=>ee(!Q),className:"h-7 px-3 text-xs",children:Q?"ON":"OFF"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(n.J,{className:"text-xs text-muted-foreground",children:"スナップ強度"}),(0,i.jsx)("div",{className:"flex gap-1 mt-1",children:[0,4,8,16].map(e=>(0,i.jsxs)(o.$,{size:"sm",variant:et===e?"default":"outline",onClick:()=>ea(e),className:"h-7 px-2 text-xs",children:[e,"px"]},e))})]})]})]})]}),!e$&&(0,i.jsxs)("div",{className:"text-center py-8",children:[(0,i.jsx)("p",{className:"text-sm text-muted-foreground",children:"レイヤーを選択してください"}),(0,i.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"レイヤーパネルからレイヤーを選択すると、ここで詳細設定ができます"})]})]})};return(0,i.jsxs)("div",{className:"relative flex flex-col lg:h-screen",children:[!v&&(0,i.jsxs)(i.Fragment,{children:[T&&(0,i.jsx)("div",{className:"fixed inset-0 z-30 bg-background/80 backdrop-blur-sm lg:hidden pointer-events-auto",onClick:()=>F(!1)}),(0,i.jsx)(ey.R,{onOpen:()=>{z("templates"),F(!0)},position:"right",className:"top-20 right-4 z-40 lg:hidden"}),(0,i.jsx)(ey.B,{isOpen:T,onClose:()=>F(!1),title:"templates"===R?"テンプレート":"エクスポート",className:"z-40 lg:hidden",children:(0,i.jsxs)(p.tU,{value:R,onValueChange:e=>z(e),className:"flex flex-col h-full",children:[(0,i.jsxs)(p.j7,{className:"grid w-full grid-cols-2 h-12",children:[(0,i.jsx)(p.Xi,{value:"templates",className:"text-xs",children:"テンプレート"}),(0,i.jsx)(p.Xi,{value:"export",className:"text-xs",children:"エクスポート"})]}),(0,i.jsx)(p.av,{value:"templates",className:"mt-4 flex-1 overflow-y-auto",children:(0,i.jsx)(M,{onSelectTemplate:eF,selectedTemplateId:(null==eT?void 0:eT.id)||null})}),(0,i.jsx)(p.av,{value:"export",className:"mt-4 flex-1 overflow-y-auto",children:(0,i.jsx)(en,{onExport:(e,t)=>t.batchExport&&t.batchSizes.length>0?te(e,t):e7(e,t),isExporting:S})})]})})]}),(0,i.jsxs)("div",{className:"flex flex-col lg:flex-row lg:h-full lg:overflow-hidden",children:[!y&&(0,i.jsx)(P,{isDesktop:v,layers:ek,updateLayer:eK,removeLayer:eE,selectedLayerId:eL,setSelectedLayerId:eJ,reorderLayers:eD,duplicateLayer:eG,addLayer:eI,moveLayerUp:eO,moveLayerDown:eB,selectedTemplate:eT,setSelectedTemplate:eF,onShapeSelect:e=>tl(e)}),(0,i.jsx)("main",{className:y?"w-full flex flex-col min-w-0 overflow-hidden":"w-full lg:w-3/5 flex flex-col min-w-0 overflow-hidden",children:(0,i.jsx)("div",{className:"flex-1 flex flex-col min-h-0 ".concat(v?"p-6":"p-2 pt-16"),children:(0,i.jsx)("div",{className:"flex-1 flex flex-col min-h-0",children:(0,i.jsx)(ef,{isDesktop:v,isPreviewDedicatedMode:y,setIsPreviewDedicatedMode:_,selectedTab:b,setSelectedTab:N,isMobileSidebarOpen:T,showGrid:k,setShowGrid:I,showAspectGuide:E,setShowAspectGuide:K,showSafeArea:J,setShowSafeArea:D,showCenterLines:G,setShowCenterLines:O,gridSize:B,setGridSize:W,gridColor:$,setGridColor:V,gridOpacity:q,setGridOpacity:U,showMajorLines:H,setShowMajorLines:X,majorInterval:Z,setMajorInterval:Y,snapToGrid:Q,setSnapToGrid:ee,snapStrength:et,setSnapStrength:ea,zoom:eq,setZoom:eU,onFitToScreen:e5,baseSizeRef:e9,layers:ek,selectedLayerId:eL,setSelectedLayerId:eJ,updateLayer:eK,removeLayer:eE,duplicateLayer:eG,moveLayerUp:eO,moveLayerDown:eB,reorderLayers:eD,addLayer:eI,aspectRatio:eM,customAspectRatio:eW,isShiftKeyDown:e1,handleLayerDragStop:ti,handleLayerResize:ts,handleToolbarUndo:to,handleToolbarRedo:tn,handleSave:tr,handleDownloadThumbnail:tt,handleQuickExport:ta,onOpenExportSettings:()=>{v?(j(!0),N("export")):(z("export"),F(!0))},canUndo:e4,canRedo:e2,handleAddShape:tl,renderToolsPanel:tc,history:eY,historyIndex:eQ,onJumpToHistory:e0})})})}),!y&&(0,i.jsx)(ec,{isDesktop:v,isExporting:S,renderToolsPanel:tc,handleBatchExport:te,handleAdvancedExport:e7,handleAddShape:tl,selectedTab:b,setSelectedTab:N})]})]})}function eC(){return(0,i.jsx)(N.z,{children:(0,i.jsx)(b,{children:(0,i.jsx)(e_,{})})})}},34243:(e,t,a)=>{Promise.resolve().then(a.bind(a,34085))}},e=>{e.O(0,[96,76,358],()=>e(e.s=34243)),_N_E=e.O()}]);