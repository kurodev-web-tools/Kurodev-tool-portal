(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[52],{13631:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>ec});var l=a(18841),t=a(58669),i=a(28198),r=a(77902),n=a(98356),c=a(33544),d=a(2570),o=a(44166),x=a(14967),m=a(98156),h=a(54686),A=a(54625),b=a(88472),u=a(28806),p=a(49752),j=a(38425),g=a(59172),v=a(90584),N=a(90215),f=a(19463),y=a(83190),w=a(23718),E=a(17550),k=a(45185),C=a(75359),D=a(79706),S=a(42542),I=a(42990),F=a(74486),J=a(81052),z=a(19866),$=a(63615),P=a(68698),T=a(31171),R=a(41383),O=a(78561),M=a(16051),L=a(78253),q=a(77463),Z=a(24860),V=a(5564),B=a(53333),X=a(30897),W=a(7934),U=a(10768),_=a(61197),G=a(5081),H=a(87570),K=a(49907),Y=a(24156),Q=a(96802),ee=a(65939);let es={gaming:{label:"ゲーム",icon:h.A,gradient:"from-blue-600/20 via-blue-500/10 to-purple-600/20",borderColor:"border-blue-500/50",badgeColor:"bg-blue-500/20 text-blue-400 border-blue-500/30",bgColor:"bg-blue-500/10"},singing:{label:"歌枠",icon:A.A,gradient:"from-pink-600/20 via-pink-500/10 to-rose-600/20",borderColor:"border-pink-500/50",badgeColor:"bg-pink-500/20 text-pink-400 border-pink-500/30",bgColor:"bg-pink-500/10"},talk:{label:"雑談",icon:b.A,gradient:"from-green-600/20 via-green-500/10 to-emerald-600/20",borderColor:"border-green-500/50",badgeColor:"bg-green-500/20 text-green-400 border-green-500/30",bgColor:"bg-green-500/10"},collaboration:{label:"コラボ",icon:u.A,gradient:"from-orange-600/20 via-orange-500/10 to-amber-600/20",borderColor:"border-orange-500/50",badgeColor:"bg-orange-500/20 text-orange-400 border-orange-500/30",bgColor:"bg-orange-500/10"},event:{label:"イベント",icon:p.A,gradient:"from-purple-600/20 via-purple-500/10 to-violet-600/20",borderColor:"border-purple-500/50",badgeColor:"bg-purple-500/20 text-purple-400 border-purple-500/30",bgColor:"bg-purple-500/10"},other:{label:"その他",icon:j.A,gradient:"from-gray-600/20 via-gray-500/10 to-slate-600/20",borderColor:"border-gray-500/50",badgeColor:"bg-gray-500/20 text-gray-400 border-gray-500/30",bgColor:"bg-gray-500/10"}},ea=[{id:1,title:"超絶高難易度ゲームに初見で挑戦！",description:"視聴者から寄せられた「絶対にクリアできない」と噂のゲームに、何の予備知識もなく挑戦します。絶叫と感動のドラマが生まれること間違いなし！",points:["リアクション芸が光る","視聴者との一体感が生まれる","切り抜き動画映えする"],category:"gaming",estimatedDuration:120,difficulty:"hard"},{id:2,title:"視聴者参加型！みんなで決める歌枠セットリスト",description:"配信中にアンケート機能を使って、次に歌う曲を視聴者に決めてもらうインタラクティブな歌枠。定番曲から意外な曲まで、何が飛び出すか分からない！",points:["ファンサービス満点","コメントが盛り上がる","アーカイブの再生数も期待できる"],category:"singing",estimatedDuration:90,difficulty:"easy"},{id:3,title:"完全オリジナル！自作ゲームお披露目会",description:"数ヶ月かけて制作した自作ゲームを、ファンと一緒についにプレイ！開発秘話や裏話を交えながら、感動のエンディングを目指す。",points:["クリエイターとしての一面を見せられる","独自性が高い","記念配信に最適"],category:"gaming",estimatedDuration:180,difficulty:"medium"}],el={introduction:"皆さん、こんにちは！〇〇です！今日の配信は、なんと…！",body:"（ここでゲームプレイや企画の本編）\nいやー、これは難しい！でも、みんなの応援があるから頑張れる！",conclusion:"というわけで、今日の配信はここまで！たくさんのコメント、スパチャありがとう！次回もまた見てね！おつ〇〇～！"},et=[{id:"standard",name:"標準形式",description:"導入・本題・結論の3部構成",category:"other",sections:[{id:"introduction",label:"導入",placeholder:"導入部分を入力...",required:!0,order:1,color:"blue"},{id:"body",label:"本題",placeholder:"本題部分を入力...",required:!0,order:2,color:"green"},{id:"conclusion",label:"結論",placeholder:"結論部分を入力...",required:!0,order:3,color:"purple"}]},{id:"gaming",name:"ゲーム実況形式",description:"ゲーム実況向けのテンプレート",category:"gaming",sections:[{id:"intro",label:"挨拶・ゲーム紹介",placeholder:"挨拶とゲーム紹介...",required:!0,order:1,color:"blue"},{id:"setup",label:"準備・ルール説明",placeholder:"準備やルール説明...",required:!1,order:2,color:"yellow"},{id:"play",label:"ゲームプレイ",placeholder:"ゲームプレイの内容...",required:!0,order:3,color:"green"},{id:"highlight",label:"見どころ",placeholder:"見どころやポイント...",required:!1,order:4,color:"orange"},{id:"ending",label:"終了挨拶",placeholder:"終了挨拶...",required:!0,order:5,color:"purple"}]},{id:"singing",name:"歌枠形式",description:"歌枠配信用のテンプレート",category:"singing",sections:[{id:"intro",label:"挨拶",placeholder:"挨拶...",required:!0,order:1,color:"blue"},{id:"setlist",label:"セットリスト紹介",placeholder:"セットリスト...",required:!1,order:2,color:"pink"},{id:"performance",label:"歌唱",placeholder:"歌唱内容...",required:!0,order:3,color:"green"},{id:"thanks",label:"お礼・次回予告",placeholder:"お礼と次回予告...",required:!0,order:4,color:"purple"}]},{id:"talk",name:"雑談形式",description:"雑談配信用のテンプレート",category:"talk",sections:[{id:"intro",label:"挨拶・今日のテーマ",placeholder:"挨拶と今日のテーマ...",required:!0,order:1,color:"blue"},{id:"topic1",label:"話題1",placeholder:"話題1の内容...",required:!1,order:2,color:"green"},{id:"topic2",label:"話題2",placeholder:"話題2の内容...",required:!1,order:3,color:"yellow"},{id:"interaction",label:"視聴者との交流",placeholder:"視聴者との交流内容...",required:!1,order:4,color:"orange"},{id:"ending",label:"終了挨拶",placeholder:"終了挨拶...",required:!0,order:5,color:"purple"}]}],ei=[{id:"analyze",label:"キーワード分析中..."},{id:"brainstorm",label:"アイデア発想中..."},{id:"organize",label:"企画案を整理中..."},{id:"complete",label:"完成！"}],er=[{id:"analyze",label:"企画案を分析中..."},{id:"structure",label:"台本構造を作成中..."},{id:"generate",label:"セクションを生成中..."},{id:"adjust",label:"最終調整中..."},{id:"complete",label:"完成！"}],en=e=>{let{steps:s,currentStepId:a,type:t}=e,i=a?s.findIndex(e=>e.id===a):-1,r=i>=0?(i+1)/s.length*100:0;return(0,l.jsx)("div",{className:"w-full space-y-6",children:(0,l.jsxs)("div",{className:"w-full h-full bg-[#2D2D2D] rounded-md flex flex-col items-center justify-center text-center p-8 min-h-[400px]",children:[(0,l.jsx)(g.A,{className:"w-16 h-16 text-primary mb-6 animate-spin","aria-hidden":"true"}),(0,l.jsx)("h3",{className:"text-xl font-semibold text-[#E0E0E0] mb-2",children:"ideas"===t?"企画案を生成中...":"台本を生成中..."}),(0,l.jsxs)("div",{className:"w-full max-w-md mt-6",children:[(0,l.jsx)("div",{className:"w-full h-2 bg-[#1A1A1A] rounded-full overflow-hidden",children:(0,l.jsx)("div",{className:"h-full bg-primary transition-all duration-500 ease-out rounded-full",style:{width:"".concat(r,"%")}})}),(0,l.jsx)("p",{className:"text-sm text-[#A0A0A0] mt-2 text-center",children:i>=0&&i<s.length?s[i].label:"準備中..."})]}),(0,l.jsx)("div",{className:"w-full max-w-2xl mt-8",children:(0,l.jsxs)("div",{className:"flex items-center justify-between relative",children:[(0,l.jsx)("div",{className:"absolute top-5 left-0 right-0 h-0.5 bg-[#4A4A4A] -z-10"}),(0,l.jsx)("div",{className:"absolute top-5 left-0 h-0.5 bg-primary transition-all duration-500 ease-out -z-10",style:{width:"".concat(r,"%")}}),s.map((e,s)=>{let a=i>=s,t=i===s;return(0,l.jsxs)("div",{className:"flex flex-col items-center relative z-10",children:[(0,l.jsx)("div",{className:(0,B.cn)("w-10 h-10 rounded-full flex items-center justify-center border-2 transition-all duration-300",t?"bg-primary border-primary scale-110 shadow-lg shadow-primary/50":a?"bg-primary/20 border-primary":"bg-[#1A1A1A] border-[#4A4A4A]"),children:t?(0,l.jsx)(g.A,{className:"w-5 h-5 text-white animate-spin"}):a?(0,l.jsx)("div",{className:"w-3 h-3 rounded-full bg-primary"}):(0,l.jsx)("div",{className:"w-3 h-3 rounded-full bg-[#4A4A4A]"})}),(0,l.jsx)("p",{className:(0,B.cn)("text-xs mt-2 text-center max-w-[100px] transition-colors duration-300",t?"text-primary font-semibold":a?"text-[#E0E0E0]":"text-[#4A4A4A]"),children:e.label})]},e.id)})]})})]})})};function ec(){let[e,s]=(0,t.useState)([]),[a,b]=(0,t.useState)(null),[ec,ed]=(0,t.useState)(null),[eo,ex]=(0,t.useState)(!1),[em,eh]=(0,t.useState)(!1),[eA,eb]=(0,t.useState)(null),[eu,ep]=(0,t.useState)(null),[ej,eg]=(0,t.useState)({keywords:"",direction:"",duration:60,speakingStyle:[],includeElements:[],customPrompt:""}),[ev,eN]=(0,t.useState)("edit"),[ef,ey]=(0,t.useState)(1),[ew,eE]=(0,t.useState)(null),[ek,eC]=(0,t.useState)(!1),[eD,eS]=(0,t.useState)(""),[eI,eF]=(0,t.useState)([]),[eJ,ez]=(0,t.useState)("all"),[e$,eP]=(0,t.useState)({}),[eT,eR]=(0,t.useState)(new Set),[eO,eM]=(0,t.useState)("all"),eL="script-generator-ideas-order",eq="script-generator-favorites",eZ="script-generator-history",eV="script-generator-saved-scripts",eB="script-generator-personas",eX="script-generator-default-persona",[eW,eU]=(0,t.useState)([]),[e_,eG]=(0,t.useState)(""),[eH,eK]=(0,t.useState)("all"),[eY,eQ]=(0,t.useState)([]),[e0,e4]=(0,t.useState)(-1),[e2,e1]=(0,t.useState)(!1),[e5,e3]=(0,t.useState)([]),[e6,e8]=(0,t.useState)("saved"),[e9,e7]=(0,t.useState)([]),[se,ss]=(0,t.useState)("standard"),[sa,sl]=(0,t.useState)([]),[st,si]=(0,t.useState)(null),[sr,sn]=(0,t.useState)(null),[sc,sd]=(0,t.useState)(!1),[so,sx]=(0,t.useState)(null),[sm,sh]=(0,t.useState)({name:"",description:"",speakingStyle:[],traits:[]}),{isOpen:sA,setIsOpen:sb,isDesktop:su}=(0,X.c)({defaultOpen:!1,desktopDefaultOpen:!0}),[sp,sj]=(0,t.useState)("persona"),{handleAsyncError:sg}=(0,W.u)();(0,t.useEffect)(()=>{sj(su?"generate":"persona")},[su]),(0,t.useEffect)(()=>{let a=localStorage.getItem(eq);if(a)try{let e=JSON.parse(a);eR(new Set(e)),s(s=>s.map(s=>({...s,isFavorite:e.includes(s.id)})))}catch(e){console.error("Failed to load favorites:",e)}let l=localStorage.getItem(eL);if(l&&e.length>0)try{let e=JSON.parse(l);s(s=>[...s].sort((s,a)=>{var l,t;let i=null!=(l=e[s.id])?l:s.id,r=null!=(t=e[a.id])?t:a.id;return i-r}))}catch(e){console.error("Failed to load order:",e)}},[]),(0,t.useEffect)(()=>{try{let e=localStorage.getItem(eZ);if(e){let s=JSON.parse(e);eU(Array.isArray(s)?s:[])}}catch(e){console.error("履歴読み込み失敗",e)}},[]),(0,t.useEffect)(()=>{try{let e=localStorage.getItem(eV);if(e){let s=JSON.parse(e);e3(Array.isArray(s)?s:[])}}catch(e){console.error("保存済み台本読み込み失敗",e)}},[]),(0,t.useEffect)(()=>{try{let e=localStorage.getItem("script-generator-custom-templates");if(e){let s=JSON.parse(e);e7(Array.isArray(s)?s:[])}}catch(e){console.error("カスタムテンプレート読み込み失敗",e)}},[]),(0,t.useEffect)(()=>{try{let e=localStorage.getItem(eB);if(e){let s=JSON.parse(e);sl(Array.isArray(s)?s:[])}let s=localStorage.getItem(eX);s&&(sn(s),si(s))}catch(e){console.error("ペルソナ読み込み失敗",e)}},[]);let sv=(0,t.useMemo)(()=>[...et,...e9],[e9]),sN=(0,t.useMemo)(()=>sv.find(e=>e.id===se)||et[0],[sv,se]),sf={blue:{border:"border-blue-500/50",bg:"bg-blue-500/5"},green:{border:"border-green-500/50",bg:"bg-green-500/5"},purple:{border:"border-purple-500/50",bg:"bg-purple-500/5"},yellow:{border:"border-yellow-500/50",bg:"bg-yellow-500/5"},orange:{border:"border-orange-500/50",bg:"bg-orange-500/5"},pink:{border:"border-pink-500/50",bg:"bg-pink-500/5"}},sy=(0,t.useMemo)(()=>(null==ec?void 0:ec.templateId)&&sv.find(e=>e.id===ec.templateId)||et[0],[ec,sv]),sw=(0,t.useCallback)(e=>ec?ec.sections&&ec.sections[e]?ec.sections[e]:"introduction"===e||"intro"===e?ec.introduction||"":"body"===e||"play"===e||"performance"===e?ec.body||"":("conclusion"===e||"ending"===e||"thanks"===e)&&ec.conclusion||"":"",[ec]),sE=(0,t.useCallback)((e,s,a)=>{if(0!==e.length)try{let l={id:"history-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),timestamp:Date.now(),ideas:e.map(e=>({...e})),keywords:s,direction:a,createdAt:new Date().toISOString()};eU(e=>{let s=[l,...e].slice(0,50);return localStorage.setItem(eZ,JSON.stringify(s)),s})}catch(e){console.error("履歴保存失敗",e)}},[]),sk=(0,t.useCallback)(e=>{eU(s=>{let a=s.filter(s=>s.id!==e);try{localStorage.setItem(eZ,JSON.stringify(a))}catch(e){console.error("履歴削除失敗",e)}return a})},[]),sC=(0,t.useCallback)(()=>{if(confirm("すべての履歴を削除しますか？")){eU([]);try{localStorage.removeItem(eZ)}catch(e){console.error("履歴全削除失敗",e)}}},[]),sD=(0,t.useCallback)(e=>{s(e.ideas.map(e=>({...e,isFavorite:eT.has(e.id)}))),b(null),ed(null),eM("all"),sj(su?"generate":"persona")},[eT,su]),sS=(0,t.useMemo)(()=>eW.filter(e=>{if(e_){let s=e_.toLowerCase();if(!(e.keywords&&e.keywords.toLowerCase().includes(s)||e.direction&&e.direction.toLowerCase().includes(s)||e.ideas.some(e=>e.title.toLowerCase().includes(s)||e.description.toLowerCase().includes(s))))return!1}return("all"===eH||!!e.ideas.some(e=>e.category===eH))&&!0}),[eW,e_,eH]),sI=(0,t.useCallback)(e=>{try{localStorage.setItem(eB,JSON.stringify(e))}catch(e){console.error("ペルソナ保存失敗",e),ee.oR.error("ペルソナの保存に失敗しました")}},[]),sF=(0,t.useCallback)(e=>{try{e?localStorage.setItem(eX,e):localStorage.removeItem(eX)}catch(e){console.error("デフォルトペルソナ保存失敗",e)}},[]),sJ=(0,t.useCallback)(()=>{sh({name:"",description:"",speakingStyle:[],traits:[]}),sx(null)},[]),sz=(0,t.useCallback)(()=>{let e={id:"persona-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),name:sm.name.trim(),description:sm.description.trim(),speakingStyle:sm.speakingStyle,traits:sm.traits,createdAt:Date.now(),updatedAt:Date.now()};if(!e.name)return void ee.oR.error("ペルソナ名を入力してください");if(sa.length>=50)return void ee.oR.error("ペルソナは最大".concat(50,"件まで作成できます"));let s=[...sa,e];sl(s),sI(s),0===sa.length&&(sn(e.id),si(e.id),sF(e.id)),ee.oR.success("ペルソナを作成しました"),sd(!1),sJ()},[sa,sm,sI,sF,sJ]),s$=(0,t.useCallback)(e=>{let s=sa.map(s=>s.id===e.id?{...e,updatedAt:Date.now()}:s);sl(s),sI(s),ee.oR.success("ペルソナを更新しました"),sd(!1),sJ()},[sa,sI,sJ]),sP=(0,t.useCallback)(e=>{let s=sa.find(s=>s.id===e);if(!s)return;if(sr===e)return void ee.oR.error("デフォルトに設定されているペルソナは削除できません。先に他のペルソナをデフォルトに設定してください。");if(!confirm("「".concat(s.name,"」を削除しますか？")))return;let a=sa.filter(s=>s.id!==e);sl(a),sI(a),st===e&&si(sr||(a.length>0?a[0].id:null)),ee.oR.success("ペルソナを削除しました")},[sa,sr,st,sI]),sT=(0,t.useCallback)(e=>{sn(e),sF(e),ee.oR.success("デフォルトペルソナを設定しました")},[sF]),sR=(0,t.useCallback)(e=>{sx(e),sh({name:e.name,description:e.description,speakingStyle:e.speakingStyle||[],traits:e.traits||[]}),sd(!0)},[]),sO=(0,t.useCallback)(()=>{sJ(),sd(!0)},[sJ]),sM=(0,t.useCallback)(()=>{if(so){let e={...so,name:sm.name.trim(),description:sm.description.trim(),speakingStyle:sm.speakingStyle,traits:sm.traits,updatedAt:Date.now()};if(!e.name)return void ee.oR.error("ペルソナ名を入力してください");s$(e)}else sz()},[so,sm,s$,sz]),sL=(0,t.useCallback)(e=>{eR(a=>{let l=new Set(a);return l.has(e)?l.delete(e):l.add(e),localStorage.setItem(eq,JSON.stringify(Array.from(l))),s(s=>s.map(s=>s.id===e?{...s,isFavorite:l.has(e)}:s)),l})},[]),sq=(0,t.useCallback)(e=>{e.destination&&s(s=>{let a=[...s],l=parseInt(e.draggableId),t=a.findIndex(e=>e.id===l);if(-1===t)return s;let[i]=a.splice(t,1);a.splice(e.destination.index,0,i);let r=a.reduce((e,s,a)=>(e[s.id]=a,e),{});return localStorage.setItem(eL,JSON.stringify(r)),a})},[]),sZ=(0,t.useMemo)(()=>{let s=e.filter(e=>{if(eD){let s=eD.toLowerCase();if(!(e.title.toLowerCase().includes(s)||e.description.toLowerCase().includes(s)||e.points.some(e=>e.toLowerCase().includes(s))))return!1}return(!(eI.length>0)||!!eI.includes(e.category))&&("all"===eJ||e.difficulty===eJ)&&(void 0===e$.min||!(e.estimatedDuration<e$.min))&&(void 0===e$.max||!(e.estimatedDuration>e$.max))});return"favorites"===eO&&(s=s.filter(e=>e.isFavorite)),s},[e,eD,eI,eJ,e$,eO]),sV=(0,t.useCallback)(async()=>{ex(!0),eb(ei[0].id),await sg(async()=>{await new Promise(e=>setTimeout(e,300)),eb(ei[1].id),await new Promise(e=>setTimeout(e,300)),eb(ei[2].id),await new Promise(e=>setTimeout(e,400)),eb(ei[3].id);let e=ea.map(e=>({...e,isFavorite:eT.has(e.id)}));s(e),b(null),eS(""),eF([]),ez("all"),eP({}),eM("all"),sE(e),await new Promise(e=>setTimeout(e,200))},"企画案生成中にエラーが発生しました"),ex(!1),eb(null)},[sg,eT,sE]),sB=(0,t.useCallback)(e=>{b(e),ec&&ec.ideaId===e||ed(null)},[ec]),sX=(0,t.useCallback)(e=>{let s={introduction:e.introduction,body:e.body,conclusion:e.conclusion,timestamp:Date.now()};eQ(e=>{let a=e.slice(0,e0+1);return(a.push(s),a.length>50)?a.slice(-50):a}),e4(e=>{let s=e+1;return s>=49?49:s})},[e0]),sW=(0,t.useCallback)(()=>{if(e0>0&&ec){let e=eY[e0-1];ed({...ec,introduction:e.introduction,body:e.body,conclusion:e.conclusion}),e4(e=>e-1),e1(!0)}},[eY,e0,ec]),sU=(0,t.useCallback)(()=>{if(e0<eY.length-1&&ec){let e=eY[e0+1];ed({...ec,introduction:e.introduction,body:e.body,conclusion:e.conclusion}),e4(e=>e+1),e1(!0)}},[eY,e0,ec]),s_=(0,t.useCallback)((e,s)=>{ec&&(ed({...ec,..."introduction"===e&&{introduction:s},..."body"===e&&{body:s},..."conclusion"===e&&{conclusion:s},sections:ec.sections?{...ec.sections,[e]:s}:{introduction:ec.introduction,body:ec.body,conclusion:ec.conclusion,[e]:s}}),e1(!0),e8("editing"))},[ec]),sG=(0,t.useCallback)(function(){let s=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!ec)return void console.log("保存失敗: currentScriptがnullまたはwindowがundefined");let a=e.find(e=>e.id===ec.ideaId);if(!a){console.log("保存失敗: selectedIdeaが見つかりません",{scriptId:ec.ideaId,generatedIdeasCount:e.length,generatedIds:e.map(e=>e.id)});let a="台本 ".concat(ec.ideaId);e8("saving");try{let e=e5.filter(e=>e.scriptId===ec.ideaId),l=e.length>0?Math.max(...e.map(e=>e.version)):0,t=e.length>0&&!s?l+1:e.length>0?l:1,i={id:"saved-".concat(ec.ideaId,"-").concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),scriptId:ec.ideaId,title:a,introduction:ec.introduction,body:ec.body,conclusion:ec.conclusion,createdAt:e.length>0?e[0].createdAt:Date.now(),updatedAt:Date.now(),version:t};e3(a=>{let t;return t=s&&e.length>0?a.map(e=>e.scriptId===ec.ideaId&&e.version===l?i:e):[i,...a].slice(0,50),localStorage.setItem(eV,JSON.stringify(t)),t}),e8("saved"),e1(!1),s||ee.oR.success("台本を保存しました")}catch(e){console.error("台本保存失敗",e),e8("editing"),ee.oR.error("保存に失敗しました")}return}e8("saving");try{let e=e5.filter(e=>e.scriptId===ec.ideaId),l=e.length>0?Math.max(...e.map(e=>e.version)):0,t=e.length>0&&!s?l+1:e.length>0?l:1,i={id:"saved-".concat(ec.ideaId,"-").concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),scriptId:ec.ideaId,title:a.title,introduction:ec.introduction,body:ec.body,conclusion:ec.conclusion,createdAt:e.length>0?e[0].createdAt:Date.now(),updatedAt:Date.now(),version:t};e3(a=>{let t;return t=s&&e.length>0?a.map(e=>e.scriptId===ec.ideaId&&e.version===l?i:e):[i,...a].slice(0,50),localStorage.setItem(eV,JSON.stringify(t)),t}),e8("saved"),e1(!1),s||ee.oR.success("台本を保存しました")}catch(e){console.error("台本保存失敗",e),e8("editing"),ee.oR.error("保存に失敗しました")}},[ec,e,e5]);(0,t.useEffect)(()=>{if(!ec||"editing"!==e6||!1===e2)return;let e=setTimeout(()=>{sG(!0)},3e4);return()=>{clearTimeout(e)}},[ec,e6,e2,sG]);let sH=(0,t.useCallback)(e=>{let s={ideaId:e.scriptId,content:"".concat(e.introduction,"\n\n").concat(e.body,"\n\n").concat(e.conclusion),introduction:e.introduction,body:e.body,conclusion:e.conclusion};ed(s),b(e.scriptId),e8("saved"),e1(!1),eQ([{introduction:s.introduction,body:s.body,conclusion:s.conclusion,timestamp:Date.now()}]),e4(0),ee.oR.success("保存済み台本を読み込みました")},[]),sK=(0,t.useCallback)(e=>{e3(s=>{let a=s.filter(s=>s.id!==e);try{localStorage.setItem(eV,JSON.stringify(a))}catch(e){console.error("保存済み台本削除失敗",e)}return a}),ee.oR.success("保存済み台本を削除しました")},[]),sY=(0,t.useCallback)(e=>{let s=Math.floor(e/60);return"".concat(s.toString().padStart(2,"0"),":").concat((e%60).toString().padStart(2,"0"))},[]),sQ=(0,t.useMemo)(()=>{var e,s,a;if(!ec)return null;let l=e=>e.split("\n").length,t="";ec.templateId&&ec.sections?Object.values(ec.sections).forEach(e=>{t+=e}):t=ec.introduction+ec.body+ec.conclusion;let i=t.length,r=l(t),n=Math.max(1,Math.ceil(i/250));return{introduction:{chars:(null==(e=ec.introduction)?void 0:e.length)||0,lines:l(ec.introduction||"")},body:{chars:(null==(s=ec.body)?void 0:s.length)||0,lines:l(ec.body||"")},conclusion:{chars:(null==(a=ec.conclusion)?void 0:a.length)||0,lines:l(ec.conclusion||"")},total:{chars:i,lines:r,estimatedMinutes:n}}},[ec]),s0=(0,t.useMemo)(()=>{if(!ec||!sQ)return null;let e=0;return{sections:sy.sections.sort((e,s)=>e.order-s.order).map(s=>{let a=sw(s.id).length,l=Math.max(Math.ceil(a/250*60),1),t=e,i=e+l;return e=i,{section:s,startTime:t,endTime:i,duration:l,chars:a}}),totalSeconds:e,totalMinutes:Math.ceil(e/60)}},[ec,sy,sQ,sw]);(0,t.useCallback)(e=>{if(!ec)return;let s={},a={introduction:ec.introduction||"",body:ec.body||"",conclusion:ec.conclusion||""};e.sections.forEach(e=>{s[e.id]=a[e.id]||""}),ed({...ec,templateId:e.id,sections:s}),e1(!1),e8("saved"),ee.oR.success("「".concat(e.name,"」テンプレートを適用しました"))},[ec]);let s4=(0,t.useCallback)(async e=>{eh(!0),ep(er[0].id),await sg(async()=>{await new Promise(e=>setTimeout(e,300)),ep(er[1].id),await new Promise(e=>setTimeout(e,400)),ep(er[2].id),await new Promise(e=>setTimeout(e,400)),ep(er[3].id),await new Promise(e=>setTimeout(e,400)),ep(er[4].id);let s={};sN.sections.forEach(e=>{"introduction"===e.id||"intro"===e.id?s[e.id]=el.introduction:"body"===e.id||"play"===e.id||"performance"===e.id?s[e.id]=el.body:"conclusion"===e.id||"ending"===e.id||"thanks"===e.id?s[e.id]=el.conclusion:s[e.id]="（".concat(e.label,"の内容）")});let a=s.introduction||s.intro||"",l=s.body||s.play||s.performance||"",t=s.conclusion||s.ending||s.thanks||"",i=sN.sections.sort((e,s)=>e.order-s.order).map(e=>"【".concat(e.label,"】\n").concat(s[e.id]||"")).join("\n\n"),r={ideaId:e.id,content:"【".concat(e.title,"】\n\n").concat(i),introduction:a,body:l,conclusion:t,templateId:sN.id,sections:s};ed(r),b(e.id),eQ([{introduction:r.introduction,body:r.body,conclusion:r.conclusion,timestamp:Date.now()}]),e4(0),e1(!1),e8("saved"),Y.vF.debug("台本生成完了",{ideaTitle:e.title,scriptLength:r.content.length,templateId:sN.id},"ScriptGenerator"),await new Promise(e=>setTimeout(e,200))},"台本生成中にエラーが発生しました"),eh(!1),ep(null)},[sg,sN]),s2=(0,t.useCallback)(()=>{if(!ec)return;let s=e.find(e=>e.id===a),l=window.open("","_blank");if(!l)return void ee.oR.error("ポップアップがブロックされています。ポップアップを許可してください。");let t='\n<!DOCTYPE html>\n<html lang="ja">\n<head>\n  <meta charset="UTF-8">\n  <meta name="viewport" content="width=device-width, initial-scale=1.0">\n  <title>台本 - '.concat((null==s?void 0:s.title)||"企画案","</title>\n  <style>\n    * {\n      margin: 0;\n      padding: 0;\n      box-sizing: border-box;\n    }\n    \n    body {\n      font-family: 'Segoe UI', 'Meiryo', 'Hiragino Kaku Gothic ProN', sans-serif;\n      line-height: 1.8;\n      color: #333;\n      background: #fff;\n      padding: 40px;\n      max-width: 800px;\n      margin: 0 auto;\n    }\n    \n    @media print {\n      body {\n        padding: 20px;\n      }\n      \n      .no-print {\n        display: none;\n      }\n      \n      @page {\n        margin: 2cm;\n        size: A4;\n      }\n      \n      h1, h2, h3 {\n        page-break-after: avoid;\n      }\n      \n      .section {\n        page-break-inside: avoid;\n        margin-bottom: 30px;\n      }\n    }\n    \n    h1 {\n      font-size: 24px;\n      font-weight: bold;\n      margin-bottom: 20px;\n      color: #000;\n      border-bottom: 2px solid #333;\n      padding-bottom: 10px;\n    }\n    \n    .metadata {\n      margin-bottom: 30px;\n      padding: 15px;\n      background: #f5f5f5;\n      border-left: 4px solid #4A90E2;\n      font-size: 14px;\n    }\n    \n    .metadata-item {\n      margin-bottom: 8px;\n    }\n    \n    .metadata-label {\n      font-weight: bold;\n      color: #666;\n      display: inline-block;\n      min-width: 100px;\n    }\n    \n    .section {\n      margin-bottom: 40px;\n    }\n    \n    .section-title {\n      font-size: 18px;\n      font-weight: bold;\n      margin-bottom: 15px;\n      color: #000;\n      padding: 10px;\n      background: #f9f9f9;\n      border-left: 4px solid #4A90E2;\n    }\n    \n    .section-content {\n      font-size: 16px;\n      line-height: 2;\n      color: #333;\n      white-space: pre-wrap;\n      padding: 0 10px;\n    }\n    \n    .section-content p {\n      margin-bottom: 12px;\n    }\n    \n    .footer {\n      margin-top: 50px;\n      padding-top: 20px;\n      border-top: 1px solid #ddd;\n      font-size: 12px;\n      color: #666;\n      text-align: center;\n    }\n    \n    @media print {\n      .footer {\n        position: fixed;\n        bottom: 0;\n        width: 100%;\n      }\n    }\n  </style>\n</head>\n<body>\n  <h1>").concat((null==s?void 0:s.title)||"台本",'</h1>\n  \n  <div class="metadata">\n    ').concat((null==s?void 0:s.description)?'\n      <div class="metadata-item">\n        <span class="metadata-label">概要:</span>\n        <span>'.concat(s.description,"</span>\n      </div>\n    "):"","\n    ").concat((null==s?void 0:s.estimatedDuration)?'\n      <div class="metadata-item">\n        <span class="metadata-label">予想時間:</span>\n        <span>'.concat(s.estimatedDuration,"分</span>\n      </div>\n    "):"","\n    ").concat((null==s?void 0:s.category)?'\n      <div class="metadata-item">\n        <span class="metadata-label">カテゴリ:</span>\n        <span>'.concat(es[s.category].label,"</span>\n      </div>\n    "):"",'\n    <div class="metadata-item">\n      <span class="metadata-label">作成日時:</span>\n      <span>').concat(new Date().toLocaleString("ja-JP"),'</span>\n    </div>\n  </div>\n  \n  <div class="section">\n    <div class="section-title">【導入】</div>\n    <div class="section-content">').concat(ec.introduction,'</div>\n  </div>\n  \n  <div class="section">\n    <div class="section-title">【本題】</div>\n    <div class="section-content">').concat(ec.body,'</div>\n  </div>\n  \n  <div class="section">\n    <div class="section-title">【結論】</div>\n    <div class="section-content">').concat(ec.conclusion,"</div>\n  </div>\n  \n  ").concat((null==s?void 0:s.points)&&s.points.length>0?'\n    <div class="section">\n      <div class="section-title">【ポイント】</div>\n      <div class="section-content">\n        <ul style="list-style-position: inside; padding-left: 0;">\n          '.concat(s.points.map(e=>'<li style="margin-bottom: 8px;">'.concat(e,"</li>")).join(""),"\n        </ul>\n      </div>\n    </div>\n  "):"",'\n  \n  <div class="footer">\n    <p>この台本は VTuberツールスイート で生成されました</p>\n  </div>\n</body>\n</html>\n    ');l.document.write(t),l.document.close(),setTimeout(()=>{l.focus(),l.print()},250)},[ec,a,e]),s1=(0,t.useCallback)(()=>{ec&&(s2(),ee.oR.success("印刷ダイアログを開きました。PDFに保存する場合は「保存先」でPDFを選択してください。"))},[ec,s2]),s5=(0,t.useCallback)(()=>(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)(U.nD,{type:"multiple",defaultValue:["basic"],className:"w-full",children:[(0,l.jsxs)(U.As,{value:"basic",className:"border-[#4A4A4A]",children:[(0,l.jsx)(U.$m,{className:"text-[#E0E0E0] hover:no-underline",children:(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(j.A,{className:"h-4 w-4"}),(0,l.jsx)("span",{children:"基本設定"})]})}),(0,l.jsxs)(U.ub,{className:"space-y-4 pt-4",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(n.J,{htmlFor:"keywords-mobile",children:"キーワード"}),(0,l.jsx)(r.p,{id:"keywords-mobile",placeholder:"例: ゲーム実況、マリオカート",value:ej.keywords,onChange:e=>eg(s=>({...s,keywords:e.target.value})),className:"bg-[#1A1A1A] border-[#4A4A4A] text-[#E0E0E0] placeholder:text-[#4A4A4A]"})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(n.J,{htmlFor:"direction-mobile",children:"企画の方向性"}),(0,l.jsxs)(d.l6,{value:ej.direction,onValueChange:e=>eg(s=>({...s,direction:e})),children:[(0,l.jsx)(d.bq,{id:"direction-mobile",className:"bg-[#1A1A1A] border-[#4A4A4A] text-[#E0E0E0]",children:(0,l.jsx)(d.yv,{placeholder:"方向性を選択"})}),(0,l.jsxs)(d.gC,{className:"bg-[#2D2D2D] border-[#4A4A4A]",children:[(0,l.jsx)(d.eb,{value:"funny",children:"面白い系"}),(0,l.jsx)(d.eb,{value:"moving",children:"感動系"}),(0,l.jsx)(d.eb,{value:"educational",children:"解説・学習系"})]})]})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(n.J,{children:"現在のトレンド"}),(0,l.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,l.jsx)(x.E,{variant:"outline",className:"cursor-pointer border-[#4A4A4A] text-[#A0A0A0] hover:bg-[#4A4A4A]",children:"#VTuberの夏休み"}),(0,l.jsx)(x.E,{variant:"outline",className:"cursor-pointer border-[#4A4A4A] text-[#A0A0A0] hover:bg-[#4A4A4A]",children:"#ゲーム実況"}),(0,l.jsx)(x.E,{variant:"outline",className:"cursor-pointer border-[#4A4A4A] text-[#A0A0A0] hover:bg-[#4A4A4A]",children:"#新作ゲーム"})]})]})]})]}),(0,l.jsxs)(U.As,{value:"streaming",className:"border-[#4A4A4A]",children:[(0,l.jsx)(U.$m,{className:"text-[#E0E0E0] hover:no-underline",children:(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(v.A,{className:"h-4 w-4"}),(0,l.jsx)("span",{children:"配信設定"})]})}),(0,l.jsxs)(U.ub,{className:"space-y-4 pt-4",children:[(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)(n.J,{htmlFor:"duration-mobile",children:"配信時間"}),(0,l.jsxs)("span",{className:"text-sm text-[#A0A0A0]",children:[ej.duration,"分"]})]}),(0,l.jsx)(_.A,{id:"duration-mobile",min:30,max:180,step:30,value:[ej.duration],onValueChange:e=>eg(s=>({...s,duration:e[0]})),className:"w-full"}),(0,l.jsxs)("div",{className:"flex justify-between text-xs text-[#4A4A4A]",children:[(0,l.jsx)("span",{children:"30分"}),(0,l.jsx)("span",{children:"180分"})]})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(n.J,{children:"話し方のスタイル"}),(0,l.jsx)("div",{className:"space-y-2",children:[{id:"casual",label:"カジュアル"},{id:"formal",label:"フォーマル"},{id:"energetic",label:"エネルギッシュ"},{id:"calm",label:"落ち着いた"},{id:"technical",label:"テクニカル"},{id:"entertaining",label:"エンタメ"}].map(e=>(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)(G.S,{id:"style-mobile-".concat(e.id),checked:ej.speakingStyle.includes(e.id),onCheckedChange:s=>{s?eg(s=>({...s,speakingStyle:[...s.speakingStyle,e.id]})):eg(s=>({...s,speakingStyle:s.speakingStyle.filter(s=>s!==e.id)}))}}),(0,l.jsx)(n.J,{htmlFor:"style-mobile-".concat(e.id),className:"text-sm text-[#E0E0E0] cursor-pointer",children:e.label})]},e.id))})]})]})]}),(0,l.jsxs)(U.As,{value:"advanced",className:"border-[#4A4A4A]",children:[(0,l.jsx)(U.$m,{className:"text-[#E0E0E0] hover:no-underline",children:(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(N.A,{className:"h-4 w-4"}),(0,l.jsx)("span",{children:"詳細設定"})]})}),(0,l.jsxs)(U.ub,{className:"space-y-4 pt-4",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(n.J,{children:"含める要素の選択"}),(0,l.jsx)("div",{className:"space-y-2",children:[{id:"gaming",label:"ゲーム要素",icon:h.A},{id:"music",label:"音楽要素",icon:A.A},{id:"collaboration",label:"コラボ要素",icon:u.A},{id:"event",label:"イベント要素",icon:p.A},{id:"other",label:"その他",icon:j.A}].map(e=>{let s=e.icon;return(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)(G.S,{id:"element-mobile-".concat(e.id),checked:ej.includeElements.includes(e.id),onCheckedChange:s=>{s?eg(s=>({...s,includeElements:[...s.includeElements,e.id]})):eg(s=>({...s,includeElements:s.includeElements.filter(s=>s!==e.id)}))}}),(0,l.jsxs)(n.J,{htmlFor:"element-mobile-".concat(e.id),className:"text-sm text-[#E0E0E0] cursor-pointer flex items-center gap-2",children:[(0,l.jsx)(s,{className:"h-4 w-4"}),e.label]})]},e.id)})})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(n.J,{htmlFor:"customPrompt-mobile",children:"カスタムプロンプト"}),(0,l.jsx)(c.T,{id:"customPrompt-mobile",placeholder:"追加で指定したい要件があれば入力してください",value:ej.customPrompt,onChange:e=>eg(s=>({...s,customPrompt:e.target.value})),className:"bg-[#1A1A1A] border-[#4A4A4A] text-[#E0E0E0] placeholder:text-[#4A4A4A] min-h-[100px]"}),(0,l.jsx)("p",{className:"text-xs text-[#4A4A4A]",children:"生成時に考慮してほしい追加の要件や指示を入力できます"})]})]})]})]}),(0,l.jsx)(i.$,{className:"w-full",onClick:sV,disabled:eo,children:eo?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(g.A,{className:"mr-2 h-4 w-4 animate-spin"}),"生成中..."]}):"企画案を生成する"}),(0,l.jsxs)("div",{className:"space-y-2 pt-4 border-t border-[#4A4A4A]",children:[(0,l.jsxs)(n.J,{className:"text-sm flex items-center gap-2 text-[#E0E0E0]",children:[(0,l.jsx)(f.A,{className:"h-4 w-4"}),"台本テンプレート"]}),(0,l.jsx)("div",{className:"space-y-2 max-h-[300px] overflow-y-auto",children:sv.map(e=>{let s=es[e.category].icon,a=se===e.id;return(0,l.jsxs)(m.Zp,{className:(0,B.cn)("cursor-pointer transition-all border-2",a?"border-primary bg-[#2D2D2D] shadow-md":"border-[#4A4A4A] bg-[#2D2D2D] hover:border-[#4A4A4A]/80",e.isCustom&&"border-dashed"),onClick:()=>ss(e.id),children:[(0,l.jsxs)(m.aR,{className:"pb-2",children:[(0,l.jsxs)("div",{className:"flex items-start justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 flex-1",children:[(0,l.jsx)(s,{className:"h-4 w-4 text-[#A0A0A0]"}),(0,l.jsx)(m.ZB,{className:"text-sm font-semibold text-[#E0E0E0]",children:e.name}),e.isCustom&&(0,l.jsx)(x.E,{variant:"outline",className:"text-xs bg-[#1A1A1A] text-[#A0A0A0] border-[#4A4A4A]",children:"カスタム"})]}),a&&(0,l.jsx)(x.E,{className:"bg-primary text-white text-xs",children:"選択中"})]}),(0,l.jsx)(m.BT,{className:"text-xs text-[#A0A0A0] line-clamp-2",children:e.description})]}),(0,l.jsx)(m.Wu,{className:"pt-0",children:(0,l.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.sections.slice(0,3).map(e=>(0,l.jsx)(x.E,{variant:"outline",className:"text-xs bg-[#1A1A1A] text-[#A0A0A0] border-[#4A4A4A]",children:e.label},e.id)),e.sections.length>3&&(0,l.jsxs)(x.E,{variant:"outline",className:"text-xs bg-[#1A1A1A] text-[#A0A0A0] border-[#4A4A4A]",children:["+",e.sections.length-3]})]})})]},e.id)})}),(0,l.jsxs)(i.$,{variant:"outline",size:"sm",className:"w-full border-[#4A4A4A] text-[#A0A0A0] hover:bg-[#4A4A4A]",onClick:()=>{ee.oR.info("カスタムテンプレート作成機能は準備中です")},children:[(0,l.jsx)(y.A,{className:"h-4 w-4 mr-1"}),"カスタムテンプレートを作成"]})]})]}),[eo,sV,sv,se,es]),s3=(0,t.useMemo)(()=>(0,l.jsxs)(o.tU,{value:sp,onValueChange:sj,className:"w-full",children:[(0,l.jsxs)(o.j7,{className:"grid w-full grid-cols-3",children:[(0,l.jsx)(o.Xi,{value:"persona",children:"ペルソナ"}),(0,l.jsx)(o.Xi,{value:"history",children:"履歴"}),(0,l.jsx)(o.Xi,{value:"saved",children:"保存済み"})]}),(0,l.jsxs)(o.av,{value:"persona",className:"mt-4 space-y-4",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(n.J,{htmlFor:"persona-select-mobile",children:"使用するペルソナ"}),(0,l.jsxs)(d.l6,{value:st||void 0,onValueChange:e=>si(e||null),children:[(0,l.jsx)(d.bq,{id:"persona-select-mobile",children:(0,l.jsx)(d.yv,{placeholder:"ペルソナを選択"})}),(0,l.jsx)(d.gC,{children:0===sa.length?(0,l.jsx)("div",{className:"px-2 py-1.5 text-sm text-[#A0A0A0]",children:"ペルソナがありません"}):sa.map(e=>(0,l.jsxs)(d.eb,{value:e.id,children:[e.name,sr===e.id&&" (デフォルト)"]},e.id))})]})]}),(0,l.jsx)("div",{className:"space-y-2 max-h-[400px] overflow-y-auto",children:0===sa.length?(0,l.jsxs)("div",{className:"text-center py-8 text-[#A0A0A0]",children:[(0,l.jsx)(N.A,{className:"h-8 w-8 mx-auto mb-2"}),(0,l.jsx)("p",{children:"まだペルソナがありません"}),(0,l.jsx)("p",{className:"text-sm mt-1",children:"新しいペルソナを作成してください"})]}):sa.map(e=>(0,l.jsxs)(m.Zp,{className:(0,B.cn)("bg-[#2D2D2D] border-[#4A4A4A] hover:border-[#4A4A4A]/80 transition-all",st===e.id&&"border-blue-500/50 bg-blue-500/5"),children:[(0,l.jsx)(m.aR,{className:"pb-3",children:(0,l.jsx)("div",{className:"flex items-start justify-between",children:(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,l.jsx)(N.A,{className:"h-4 w-4 text-[#A0A0A0]"}),(0,l.jsx)(m.ZB,{className:"text-sm font-semibold text-[#E0E0E0]",children:e.name}),sr===e.id&&(0,l.jsxs)(x.E,{variant:"outline",className:"text-xs bg-blue-500/20 text-blue-400 border-blue-500/30",children:[(0,l.jsx)(w.A,{className:"h-3 w-3 mr-1"}),"デフォルト"]})]}),(0,l.jsx)("div",{className:"text-xs text-[#A0A0A0] line-clamp-2",children:e.description})]})})}),(0,l.jsxs)(m.wL,{className:"gap-2 pt-0",children:[(0,l.jsxs)(i.$,{variant:"outline",size:"sm",onClick:()=>si(e.id),className:"flex-1 border-[#4A4A4A] text-[#A0A0A0] hover:bg-[#4A4A4A] hover:text-[#E0E0E0]",children:[(0,l.jsx)(E.A,{className:"h-4 w-4 mr-1"}),"選択"]}),(0,l.jsx)(i.$,{variant:"outline",size:"sm",onClick:()=>sR(e),className:"border-[#4A4A4A] text-[#A0A0A0] hover:bg-[#4A4A4A] hover:text-[#E0E0E0]",children:(0,l.jsx)(k.A,{className:"h-4 w-4"})}),sr!==e.id&&(0,l.jsx)(i.$,{variant:"outline",size:"sm",onClick:()=>sT(e.id),className:"border-yellow-500/50 text-yellow-400 hover:bg-yellow-500/10",title:"デフォルトに設定",children:(0,l.jsx)(w.A,{className:"h-4 w-4"})}),(0,l.jsx)(i.$,{variant:"outline",size:"sm",onClick:()=>sP(e.id),className:"border-red-500/50 text-red-400 hover:bg-red-500/10",disabled:sr===e.id,title:sr===e.id?"デフォルトペルソナは削除できません":"削除",children:(0,l.jsx)(C.A,{className:"h-4 w-4"})})]})]},e.id))}),(0,l.jsxs)(i.$,{variant:"outline",className:"w-full",onClick:sO,children:[(0,l.jsx)(y.A,{className:"h-4 w-4 mr-2"}),"新しいペルソナを作成"]})]}),(0,l.jsxs)(o.av,{value:"history",className:"mt-4 space-y-4",children:[eW.length>0&&(0,l.jsxs)("div",{className:"space-y-3 p-3 bg-[#2D2D2D] rounded-lg border border-[#4A4A4A]",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)(n.J,{htmlFor:"history-search-mobile",className:"flex items-center gap-2 text-sm text-[#E0E0E0]",children:[(0,l.jsx)(D.A,{className:"h-4 w-4"}),"検索"]}),(0,l.jsx)(r.p,{id:"history-search-mobile",placeholder:"キーワード、方向性、タイトルで検索...",value:e_,onChange:e=>eG(e.target.value),className:"bg-[#1A1A1A] border-[#4A4A4A] text-[#E0E0E0] placeholder:text-[#4A4A4A]"})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(n.J,{className:"text-sm text-[#A0A0A0]",children:"カテゴリ"}),(0,l.jsxs)(d.l6,{value:eH,onValueChange:e=>eK(e),children:[(0,l.jsx)(d.bq,{className:"bg-[#1A1A1A] border-[#4A4A4A] text-[#E0E0E0]",children:(0,l.jsx)(d.yv,{})}),(0,l.jsxs)(d.gC,{children:[(0,l.jsx)(d.eb,{value:"all",children:"すべて"}),Object.keys(es).map(e=>(0,l.jsx)(d.eb,{value:e,children:es[e].label},e))]})]})]}),(e_||"all"!==eH)&&(0,l.jsx)("div",{className:"flex justify-end",children:(0,l.jsxs)(i.$,{variant:"outline",size:"sm",onClick:()=>{eG(""),eK("all")},className:"border-[#4A4A4A] text-[#A0A0A0] hover:bg-[#4A4A4A]",children:[(0,l.jsx)(S.A,{className:"h-4 w-4 mr-1"}),"フィルターをクリア"]})}),(0,l.jsxs)("div",{className:"text-xs text-[#A0A0A0]",children:[sS.length,"件の履歴が見つかりました（全",eW.length,"件中）"]})]}),(0,l.jsx)("div",{className:"space-y-2 max-h-[500px] overflow-y-auto",children:0===eW.length?(0,l.jsxs)("div",{className:"text-center py-8 text-[#A0A0A0]",children:[(0,l.jsx)(I.A,{className:"h-8 w-8 mx-auto mb-2"}),(0,l.jsx)("p",{children:"まだ履歴がありません"}),(0,l.jsx)("p",{className:"text-sm mt-1",children:"企画案を生成すると、ここに履歴が表示されます"})]}):0===sS.length?(0,l.jsxs)("div",{className:"text-center py-8 text-[#A0A0A0]",children:[(0,l.jsx)(D.A,{className:"h-8 w-8 mx-auto mb-2"}),(0,l.jsx)("p",{children:"検索条件に一致する履歴がありません"})]}):sS.map(e=>(0,l.jsxs)(m.Zp,{className:"bg-[#2D2D2D] border-[#4A4A4A] hover:border-[#4A4A4A]/80 transition-all cursor-pointer",onClick:()=>sD(e),children:[(0,l.jsx)(m.aR,{className:"pb-3",children:(0,l.jsxs)("div",{className:"flex items-start justify-between",children:[(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,l.jsx)(I.A,{className:"h-4 w-4 text-[#A0A0A0]"}),(0,l.jsxs)(m.ZB,{className:"text-sm font-semibold text-[#E0E0E0]",children:[e.ideas.length,"件の企画案"]})]}),(0,l.jsxs)("div",{className:"flex flex-wrap gap-2 mb-2",children:[e.keywords&&(0,l.jsx)(x.E,{variant:"outline",className:"text-xs bg-[#1A1A1A] text-[#A0A0A0] border-[#4A4A4A]",children:e.keywords}),e.direction&&(0,l.jsx)(x.E,{variant:"outline",className:"text-xs bg-[#1A1A1A] text-[#A0A0A0] border-[#4A4A4A]",children:e.direction})]}),(0,l.jsxs)("div",{className:"flex items-center gap-1 text-xs text-[#A0A0A0]",children:[(0,l.jsx)(v.A,{className:"h-3 w-3"}),new Date(e.timestamp).toLocaleString("ja-JP",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})]})]}),(0,l.jsx)(i.$,{variant:"ghost",size:"icon",onClick:s=>{s.stopPropagation(),sk(e.id)},className:"h-8 w-8 text-[#A0A0A0] hover:text-red-400 hover:bg-red-500/10","aria-label":"履歴を削除",children:(0,l.jsx)(C.A,{className:"h-4 w-4"})})]})}),(0,l.jsx)(m.Wu,{children:(0,l.jsxs)("div",{className:"space-y-1",children:[e.ideas.slice(0,3).map(e=>(0,l.jsxs)("div",{className:"text-xs text-[#A0A0A0] line-clamp-1 flex items-center gap-2",children:[(0,l.jsx)("div",{className:(0,B.cn)("w-2 h-2 rounded-full",es[e.category].bgColor)}),e.title]},e.id)),e.ideas.length>3&&(0,l.jsxs)("div",{className:"text-xs text-[#4A4A4A]",children:["+",e.ideas.length-3,"件"]})]})})]},e.id))}),eW.length>0&&(0,l.jsx)("div",{className:"flex justify-end pt-2 border-t border-[#4A4A4A]",children:(0,l.jsxs)(i.$,{variant:"outline",size:"sm",onClick:sC,className:"border-red-500/50 text-red-400 hover:bg-red-500/10",children:[(0,l.jsx)(C.A,{className:"h-4 w-4 mr-1"}),"すべての履歴を削除"]})})]}),(0,l.jsx)(o.av,{value:"saved",className:"mt-4 space-y-4",children:(0,l.jsx)("div",{className:"space-y-2 max-h-[600px] overflow-y-auto",children:0===e5.length?(0,l.jsxs)("div",{className:"text-center py-8 text-[#A0A0A0]",children:[(0,l.jsx)(F.A,{className:"h-8 w-8 mx-auto mb-2"}),(0,l.jsx)("p",{children:"まだ保存済み台本がありません"}),(0,l.jsx)("p",{className:"text-sm mt-1",children:"台本を編集して保存すると、ここに表示されます"})]}):e5.map(e=>(0,l.jsxs)(m.Zp,{className:"bg-[#2D2D2D] border-[#4A4A4A] hover:border-[#4A4A4A]/80 transition-all",children:[(0,l.jsx)(m.aR,{className:"pb-3",children:(0,l.jsx)("div",{className:"flex items-start justify-between",children:(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,l.jsx)(F.A,{className:"h-4 w-4 text-[#A0A0A0]"}),(0,l.jsx)(m.ZB,{className:"text-sm font-semibold text-[#E0E0E0]",children:e.title}),e.version>1&&(0,l.jsxs)(x.E,{variant:"outline",className:"text-xs bg-[#1A1A1A] text-[#A0A0A0] border-[#4A4A4A]",children:["v",e.version]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-1 text-xs text-[#A0A0A0] mb-2",children:[(0,l.jsx)(v.A,{className:"h-3 w-3"}),"更新: ",new Date(e.updatedAt).toLocaleString("ja-JP",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})]}),(0,l.jsxs)("div",{className:"text-xs text-[#A0A0A0] line-clamp-2",children:[e.introduction.substring(0,50),"..."]})]})})}),(0,l.jsxs)(m.wL,{className:"gap-2 pt-0",children:[(0,l.jsxs)(i.$,{variant:"outline",size:"sm",onClick:()=>sH(e),className:"flex-1 border-[#4A4A4A] text-[#A0A0A0] hover:bg-[#4A4A4A] hover:text-[#E0E0E0]",children:[(0,l.jsx)(J.A,{className:"h-4 w-4 mr-1"}),"読み込む"]}),(0,l.jsx)(i.$,{variant:"outline",size:"sm",onClick:s=>{s.stopPropagation(),confirm("この保存済み台本を削除しますか？")&&sK(e.id)},className:"border-red-500/50 text-red-400 hover:bg-red-500/10",children:(0,l.jsx)(C.A,{className:"h-4 w-4"})})]})]},e.id))})})]}),[sp,eW,sS,e_,eH,sD,sk,sC,e5,sH,sK,sa,st,sr,sR,si,sT,sP,sO]),s6=(0,t.useMemo)(()=>(0,l.jsxs)(o.tU,{value:sp,onValueChange:sj,className:"w-full",children:[(0,l.jsxs)(o.j7,{className:"grid w-full grid-cols-4",children:[(0,l.jsx)(o.Xi,{value:"generate",children:"生成"}),(0,l.jsx)(o.Xi,{value:"persona",children:"ペルソナ"}),(0,l.jsx)(o.Xi,{value:"history",children:"履歴"}),(0,l.jsx)(o.Xi,{value:"saved",children:"保存済み"})]}),(0,l.jsxs)(o.av,{value:"generate",className:"mt-4 space-y-4",children:[(0,l.jsxs)(U.nD,{type:"multiple",defaultValue:["basic"],className:"w-full",children:[(0,l.jsxs)(U.As,{value:"basic",className:"border-[#4A4A4A]",children:[(0,l.jsx)(U.$m,{className:"text-[#E0E0E0] hover:no-underline",children:(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(j.A,{className:"h-4 w-4"}),(0,l.jsx)("span",{children:"基本設定"})]})}),(0,l.jsxs)(U.ub,{className:"space-y-4 pt-4",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(n.J,{htmlFor:"keywords",children:"キーワード"}),(0,l.jsx)(r.p,{id:"keywords",placeholder:"例: ゲーム実況、マリオカート",value:ej.keywords,onChange:e=>eg(s=>({...s,keywords:e.target.value})),className:"bg-[#1A1A1A] border-[#4A4A4A] text-[#E0E0E0] placeholder:text-[#4A4A4A]"})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(n.J,{htmlFor:"direction",children:"企画の方向性"}),(0,l.jsxs)(d.l6,{value:ej.direction,onValueChange:e=>eg(s=>({...s,direction:e})),children:[(0,l.jsx)(d.bq,{id:"direction",className:"bg-[#1A1A1A] border-[#4A4A4A] text-[#E0E0E0]",children:(0,l.jsx)(d.yv,{placeholder:"方向性を選択"})}),(0,l.jsxs)(d.gC,{className:"bg-[#2D2D2D] border-[#4A4A4A]",children:[(0,l.jsx)(d.eb,{value:"funny",children:"面白い系"}),(0,l.jsx)(d.eb,{value:"moving",children:"感動系"}),(0,l.jsx)(d.eb,{value:"educational",children:"解説・学習系"})]})]})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(n.J,{children:"現在のトレンド"}),(0,l.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,l.jsx)(x.E,{variant:"outline",className:"cursor-pointer border-[#4A4A4A] text-[#A0A0A0] hover:bg-[#4A4A4A]",children:"#VTuberの夏休み"}),(0,l.jsx)(x.E,{variant:"outline",className:"cursor-pointer border-[#4A4A4A] text-[#A0A0A0] hover:bg-[#4A4A4A]",children:"#ゲーム実況"}),(0,l.jsx)(x.E,{variant:"outline",className:"cursor-pointer border-[#4A4A4A] text-[#A0A0A0] hover:bg-[#4A4A4A]",children:"#新作ゲーム"})]})]})]})]}),(0,l.jsxs)(U.As,{value:"streaming",className:"border-[#4A4A4A]",children:[(0,l.jsx)(U.$m,{className:"text-[#E0E0E0] hover:no-underline",children:(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(v.A,{className:"h-4 w-4"}),(0,l.jsx)("span",{children:"配信設定"})]})}),(0,l.jsxs)(U.ub,{className:"space-y-4 pt-4",children:[(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)(n.J,{htmlFor:"duration",children:"配信時間"}),(0,l.jsxs)("span",{className:"text-sm text-[#A0A0A0]",children:[ej.duration,"分"]})]}),(0,l.jsx)(_.A,{id:"duration",min:30,max:180,step:30,value:[ej.duration],onValueChange:e=>eg(s=>({...s,duration:e[0]})),className:"w-full"}),(0,l.jsxs)("div",{className:"flex justify-between text-xs text-[#4A4A4A]",children:[(0,l.jsx)("span",{children:"30分"}),(0,l.jsx)("span",{children:"180分"})]})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(n.J,{children:"話し方のスタイル"}),(0,l.jsx)("div",{className:"space-y-2",children:[{id:"casual",label:"カジュアル"},{id:"formal",label:"フォーマル"},{id:"energetic",label:"エネルギッシュ"},{id:"calm",label:"落ち着いた"},{id:"technical",label:"テクニカル"},{id:"entertaining",label:"エンタメ"}].map(e=>(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)(G.S,{id:"style-".concat(e.id),checked:ej.speakingStyle.includes(e.id),onCheckedChange:s=>{s?eg(s=>({...s,speakingStyle:[...s.speakingStyle,e.id]})):eg(s=>({...s,speakingStyle:s.speakingStyle.filter(s=>s!==e.id)}))}}),(0,l.jsx)(n.J,{htmlFor:"style-".concat(e.id),className:"text-sm text-[#E0E0E0] cursor-pointer",children:e.label})]},e.id))})]})]})]}),(0,l.jsxs)(U.As,{value:"advanced",className:"border-[#4A4A4A]",children:[(0,l.jsx)(U.$m,{className:"text-[#E0E0E0] hover:no-underline",children:(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(N.A,{className:"h-4 w-4"}),(0,l.jsx)("span",{children:"詳細設定"})]})}),(0,l.jsxs)(U.ub,{className:"space-y-4 pt-4",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(n.J,{children:"含める要素の選択"}),(0,l.jsx)("div",{className:"space-y-2",children:[{id:"gaming",label:"ゲーム要素",icon:h.A},{id:"music",label:"音楽要素",icon:A.A},{id:"collaboration",label:"コラボ要素",icon:u.A},{id:"event",label:"イベント要素",icon:p.A},{id:"other",label:"その他",icon:j.A}].map(e=>{let s=e.icon;return(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)(G.S,{id:"element-".concat(e.id),checked:ej.includeElements.includes(e.id),onCheckedChange:s=>{s?eg(s=>({...s,includeElements:[...s.includeElements,e.id]})):eg(s=>({...s,includeElements:s.includeElements.filter(s=>s!==e.id)}))}}),(0,l.jsxs)(n.J,{htmlFor:"element-".concat(e.id),className:"text-sm text-[#E0E0E0] cursor-pointer flex items-center gap-2",children:[(0,l.jsx)(s,{className:"h-4 w-4"}),e.label]})]},e.id)})})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(n.J,{htmlFor:"customPrompt",children:"カスタムプロンプト"}),(0,l.jsx)(c.T,{id:"customPrompt",placeholder:"追加で指定したい要件があれば入力してください",value:ej.customPrompt,onChange:e=>eg(s=>({...s,customPrompt:e.target.value})),className:"bg-[#1A1A1A] border-[#4A4A4A] text-[#E0E0E0] placeholder:text-[#4A4A4A] min-h-[100px]"}),(0,l.jsx)("p",{className:"text-xs text-[#4A4A4A]",children:"生成時に考慮してほしい追加の要件や指示を入力できます"})]})]})]})]}),(0,l.jsx)(i.$,{className:"w-full",onClick:sV,disabled:eo,children:eo?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(g.A,{className:"mr-2 h-4 w-4 animate-spin"}),"生成中..."]}):"企画案を生成する"}),(0,l.jsxs)("div",{className:"space-y-2 pt-4 border-t border-[#4A4A4A]",children:[(0,l.jsxs)(n.J,{className:"text-sm flex items-center gap-2 text-[#E0E0E0]",children:[(0,l.jsx)(f.A,{className:"h-4 w-4"}),"台本テンプレート"]}),(0,l.jsx)("div",{className:"space-y-2 max-h-[300px] overflow-y-auto",children:sv.map(e=>{let s=es[e.category].icon,a=se===e.id;return(0,l.jsxs)(m.Zp,{className:(0,B.cn)("cursor-pointer transition-all border-2",a?"border-primary bg-[#2D2D2D] shadow-md":"border-[#4A4A4A] bg-[#2D2D2D] hover:border-[#4A4A4A]/80",e.isCustom&&"border-dashed"),onClick:()=>ss(e.id),children:[(0,l.jsxs)(m.aR,{className:"pb-2",children:[(0,l.jsxs)("div",{className:"flex items-start justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 flex-1",children:[(0,l.jsx)(s,{className:"h-4 w-4 text-[#A0A0A0]"}),(0,l.jsx)(m.ZB,{className:"text-sm font-semibold text-[#E0E0E0]",children:e.name}),e.isCustom&&(0,l.jsx)(x.E,{variant:"outline",className:"text-xs bg-[#1A1A1A] text-[#A0A0A0] border-[#4A4A4A]",children:"カスタム"})]}),a&&(0,l.jsx)(x.E,{className:"bg-primary text-white text-xs",children:"選択中"})]}),(0,l.jsx)(m.BT,{className:"text-xs text-[#A0A0A0] line-clamp-2",children:e.description})]}),(0,l.jsx)(m.Wu,{className:"pt-0",children:(0,l.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.sections.slice(0,3).map(e=>(0,l.jsx)(x.E,{variant:"outline",className:"text-xs bg-[#1A1A1A] text-[#A0A0A0] border-[#4A4A4A]",children:e.label},e.id)),e.sections.length>3&&(0,l.jsxs)(x.E,{variant:"outline",className:"text-xs bg-[#1A1A1A] text-[#A0A0A0] border-[#4A4A4A]",children:["+",e.sections.length-3]})]})})]},e.id)})}),(0,l.jsxs)(i.$,{variant:"outline",size:"sm",className:"w-full border-[#4A4A4A] text-[#A0A0A0] hover:bg-[#4A4A4A]",onClick:()=>{ee.oR.info("カスタムテンプレート作成機能は準備中です")},children:[(0,l.jsx)(y.A,{className:"h-4 w-4 mr-1"}),"カスタムテンプレートを作成"]})]})]}),(0,l.jsxs)(o.av,{value:"persona",className:"mt-4 space-y-4",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(n.J,{htmlFor:"persona-select",children:"使用するペルソナ"}),(0,l.jsxs)(d.l6,{value:st||void 0,onValueChange:e=>si(e||null),children:[(0,l.jsx)(d.bq,{id:"persona-select",children:(0,l.jsx)(d.yv,{placeholder:"ペルソナを選択"})}),(0,l.jsx)(d.gC,{children:0===sa.length?(0,l.jsx)("div",{className:"px-2 py-1.5 text-sm text-[#A0A0A0]",children:"ペルソナがありません"}):sa.map(e=>(0,l.jsxs)(d.eb,{value:e.id,children:[e.name,sr===e.id&&" (デフォルト)"]},e.id))})]})]}),(0,l.jsx)("div",{className:"space-y-2 max-h-[500px] overflow-y-auto",children:0===sa.length?(0,l.jsxs)("div",{className:"text-center py-8 text-[#A0A0A0]",children:[(0,l.jsx)(N.A,{className:"h-8 w-8 mx-auto mb-2"}),(0,l.jsx)("p",{children:"まだペルソナがありません"}),(0,l.jsx)("p",{className:"text-sm mt-1",children:"新しいペルソナを作成してください"})]}):sa.map(e=>(0,l.jsxs)(m.Zp,{className:(0,B.cn)("bg-[#2D2D2D] border-[#4A4A4A] hover:border-[#4A4A4A]/80 transition-all",st===e.id&&"border-blue-500/50 bg-blue-500/5"),children:[(0,l.jsx)(m.aR,{className:"pb-3",children:(0,l.jsx)("div",{className:"flex items-start justify-between",children:(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,l.jsx)(N.A,{className:"h-4 w-4 text-[#A0A0A0]"}),(0,l.jsx)(m.ZB,{className:"text-sm font-semibold text-[#E0E0E0]",children:e.name}),sr===e.id&&(0,l.jsxs)(x.E,{variant:"outline",className:"text-xs bg-blue-500/20 text-blue-400 border-blue-500/30",children:[(0,l.jsx)(w.A,{className:"h-3 w-3 mr-1"}),"デフォルト"]})]}),(0,l.jsx)("div",{className:"text-xs text-[#A0A0A0] line-clamp-2",children:e.description})]})})}),(0,l.jsxs)(m.wL,{className:"gap-2 pt-0",children:[(0,l.jsxs)(i.$,{variant:"outline",size:"sm",onClick:()=>si(e.id),className:"flex-1 border-[#4A4A4A] text-[#A0A0A0] hover:bg-[#4A4A4A] hover:text-[#E0E0E0]",children:[(0,l.jsx)(E.A,{className:"h-4 w-4 mr-1"}),"選択"]}),(0,l.jsx)(i.$,{variant:"outline",size:"sm",onClick:()=>sR(e),className:"border-[#4A4A4A] text-[#A0A0A0] hover:bg-[#4A4A4A] hover:text-[#E0E0E0]",children:(0,l.jsx)(k.A,{className:"h-4 w-4"})}),sr!==e.id&&(0,l.jsx)(i.$,{variant:"outline",size:"sm",onClick:()=>sT(e.id),className:"border-yellow-500/50 text-yellow-400 hover:bg-yellow-500/10",title:"デフォルトに設定",children:(0,l.jsx)(w.A,{className:"h-4 w-4"})}),(0,l.jsx)(i.$,{variant:"outline",size:"sm",onClick:()=>sP(e.id),className:"border-red-500/50 text-red-400 hover:bg-red-500/10",disabled:sr===e.id,title:sr===e.id?"デフォルトペルソナは削除できません":"削除",children:(0,l.jsx)(C.A,{className:"h-4 w-4"})})]})]},e.id))}),(0,l.jsxs)(i.$,{variant:"outline",className:"w-full",onClick:sO,children:[(0,l.jsx)(y.A,{className:"h-4 w-4 mr-2"}),"新しいペルソナを作成"]})]}),(0,l.jsxs)(o.av,{value:"history",className:"mt-4 space-y-4",children:[eW.length>0&&(0,l.jsxs)("div",{className:"space-y-3 p-3 bg-[#2D2D2D] rounded-lg border border-[#4A4A4A]",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)(n.J,{htmlFor:"history-search-desktop",className:"flex items-center gap-2 text-sm text-[#E0E0E0]",children:[(0,l.jsx)(D.A,{className:"h-4 w-4"}),"検索"]}),(0,l.jsx)(r.p,{id:"history-search-desktop",placeholder:"キーワード、方向性、タイトルで検索...",value:e_,onChange:e=>eG(e.target.value),className:"bg-[#1A1A1A] border-[#4A4A4A] text-[#E0E0E0] placeholder:text-[#4A4A4A]"})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(n.J,{className:"text-sm text-[#A0A0A0]",children:"カテゴリ"}),(0,l.jsxs)(d.l6,{value:eH,onValueChange:e=>eK(e),children:[(0,l.jsx)(d.bq,{className:"bg-[#1A1A1A] border-[#4A4A4A] text-[#E0E0E0]",children:(0,l.jsx)(d.yv,{})}),(0,l.jsxs)(d.gC,{children:[(0,l.jsx)(d.eb,{value:"all",children:"すべて"}),Object.keys(es).map(e=>(0,l.jsx)(d.eb,{value:e,children:es[e].label},e))]})]})]}),(e_||"all"!==eH)&&(0,l.jsx)("div",{className:"flex justify-end",children:(0,l.jsxs)(i.$,{variant:"outline",size:"sm",onClick:()=>{eG(""),eK("all")},className:"border-[#4A4A4A] text-[#A0A0A0] hover:bg-[#4A4A4A]",children:[(0,l.jsx)(S.A,{className:"h-4 w-4 mr-1"}),"フィルターをクリア"]})}),(0,l.jsxs)("div",{className:"text-xs text-[#A0A0A0]",children:[sS.length,"件の履歴が見つかりました（全",eW.length,"件中）"]})]}),(0,l.jsx)("div",{className:"space-y-2 max-h-[500px] overflow-y-auto",children:0===eW.length?(0,l.jsxs)("div",{className:"text-center py-8 text-[#A0A0A0]",children:[(0,l.jsx)(I.A,{className:"h-8 w-8 mx-auto mb-2"}),(0,l.jsx)("p",{children:"まだ履歴がありません"}),(0,l.jsx)("p",{className:"text-sm mt-1",children:"企画案を生成すると、ここに履歴が表示されます"})]}):0===sS.length?(0,l.jsxs)("div",{className:"text-center py-8 text-[#A0A0A0]",children:[(0,l.jsx)(D.A,{className:"h-8 w-8 mx-auto mb-2"}),(0,l.jsx)("p",{children:"検索条件に一致する履歴がありません"})]}):sS.map(e=>(0,l.jsxs)(m.Zp,{className:"bg-[#2D2D2D] border-[#4A4A4A] hover:border-[#4A4A4A]/80 transition-all cursor-pointer",onClick:()=>sD(e),children:[(0,l.jsx)(m.aR,{className:"pb-3",children:(0,l.jsxs)("div",{className:"flex items-start justify-between",children:[(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,l.jsx)(I.A,{className:"h-4 w-4 text-[#A0A0A0]"}),(0,l.jsxs)(m.ZB,{className:"text-sm font-semibold text-[#E0E0E0]",children:[e.ideas.length,"件の企画案"]})]}),(0,l.jsxs)("div",{className:"flex flex-wrap gap-2 mb-2",children:[e.keywords&&(0,l.jsx)(x.E,{variant:"outline",className:"text-xs bg-[#1A1A1A] text-[#A0A0A0] border-[#4A4A4A]",children:e.keywords}),e.direction&&(0,l.jsx)(x.E,{variant:"outline",className:"text-xs bg-[#1A1A1A] text-[#A0A0A0] border-[#4A4A4A]",children:e.direction})]}),(0,l.jsxs)("div",{className:"flex items-center gap-1 text-xs text-[#A0A0A0]",children:[(0,l.jsx)(v.A,{className:"h-3 w-3"}),new Date(e.timestamp).toLocaleString("ja-JP",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})]})]}),(0,l.jsx)(i.$,{variant:"ghost",size:"icon",onClick:s=>{s.stopPropagation(),sk(e.id)},className:"h-8 w-8 text-[#A0A0A0] hover:text-red-400 hover:bg-red-500/10","aria-label":"履歴を削除",children:(0,l.jsx)(C.A,{className:"h-4 w-4"})})]})}),(0,l.jsx)(m.Wu,{children:(0,l.jsxs)("div",{className:"space-y-1",children:[e.ideas.slice(0,3).map(e=>(0,l.jsxs)("div",{className:"text-xs text-[#A0A0A0] line-clamp-1 flex items-center gap-2",children:[(0,l.jsx)("div",{className:(0,B.cn)("w-2 h-2 rounded-full",es[e.category].bgColor)}),e.title]},e.id)),e.ideas.length>3&&(0,l.jsxs)("div",{className:"text-xs text-[#4A4A4A]",children:["+",e.ideas.length-3,"件"]})]})})]},e.id))}),eW.length>0&&(0,l.jsx)("div",{className:"flex justify-end pt-2 border-t border-[#4A4A4A]",children:(0,l.jsxs)(i.$,{variant:"outline",size:"sm",onClick:sC,className:"border-red-500/50 text-red-400 hover:bg-red-500/10",children:[(0,l.jsx)(C.A,{className:"h-4 w-4 mr-1"}),"すべての履歴を削除"]})})]}),(0,l.jsx)(o.av,{value:"saved",className:"mt-4 space-y-4",children:(0,l.jsx)("div",{className:"space-y-2 max-h-[600px] overflow-y-auto",children:0===e5.length?(0,l.jsxs)("div",{className:"text-center py-8 text-[#A0A0A0]",children:[(0,l.jsx)(F.A,{className:"h-8 w-8 mx-auto mb-2"}),(0,l.jsx)("p",{children:"まだ保存済み台本がありません"}),(0,l.jsx)("p",{className:"text-sm mt-1",children:"台本を編集して保存すると、ここに表示されます"})]}):e5.map(e=>(0,l.jsxs)(m.Zp,{className:"bg-[#2D2D2D] border-[#4A4A4A] hover:border-[#4A4A4A]/80 transition-all",children:[(0,l.jsx)(m.aR,{className:"pb-3",children:(0,l.jsx)("div",{className:"flex items-start justify-between",children:(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,l.jsx)(F.A,{className:"h-4 w-4 text-[#A0A0A0]"}),(0,l.jsx)(m.ZB,{className:"text-sm font-semibold text-[#E0E0E0]",children:e.title}),e.version>1&&(0,l.jsxs)(x.E,{variant:"outline",className:"text-xs bg-[#1A1A1A] text-[#A0A0A0] border-[#4A4A4A]",children:["v",e.version]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-1 text-xs text-[#A0A0A0] mb-2",children:[(0,l.jsx)(v.A,{className:"h-3 w-3"}),"更新: ",new Date(e.updatedAt).toLocaleString("ja-JP",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})]}),(0,l.jsxs)("div",{className:"text-xs text-[#A0A0A0] line-clamp-2",children:[e.introduction.substring(0,50),"..."]})]})})}),(0,l.jsxs)(m.wL,{className:"gap-2 pt-0",children:[(0,l.jsxs)(i.$,{variant:"outline",size:"sm",onClick:()=>sH(e),className:"flex-1 border-[#4A4A4A] text-[#A0A0A0] hover:bg-[#4A4A4A] hover:text-[#E0E0E0]",children:[(0,l.jsx)(J.A,{className:"h-4 w-4 mr-1"}),"読み込む"]}),(0,l.jsx)(i.$,{variant:"outline",size:"sm",onClick:s=>{s.stopPropagation(),confirm("この保存済み台本を削除しますか？")&&sK(e.id)},className:"border-red-500/50 text-red-400 hover:bg-red-500/10",children:(0,l.jsx)(C.A,{className:"h-4 w-4"})})]})]},e.id))})})]}),[sp,sV,eo,e5,sH,sK,sv,se,es,sa,st,sr,sR,si,sT,sP,sO]);return(0,l.jsxs)("div",{className:"relative flex flex-col lg:flex-row lg:h-[calc(100vh-4.1rem)] lg:overflow-hidden",children:[(0,l.jsx)("aside",{className:"\n        ".concat(su&&sA?"w-1/4":"w-0","\n        ").concat(su?"border-r border-[#4A4A4A]":"","\n        transition-all duration-300\n        overflow-hidden\n        flex-shrink-0\n        bg-[#1A1A1A]\n        relative\n      "),children:su&&sA&&(0,l.jsxs)("div",{className:"h-full overflow-y-auto p-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,l.jsx)("h2",{className:"text-lg font-semibold text-[#E0E0E0]",children:"企画・台本サポート"}),(0,l.jsx)(i.$,{variant:"ghost",size:"icon",onClick:()=>sb(!1),className:"h-8 w-8","aria-label":"サイドバーを閉じる",children:(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-[#A0A0A0]",children:(0,l.jsx)("path",{d:"M18 6L6 18M6 6l12 12"})})})]}),s6]})}),(0,l.jsx)("main",{className:"flex-1 lg:w-1/2 p-4 overflow-y-auto lg:pt-4 pt-20 lg:border-r border-[#4A4A4A]",children:eo?(0,l.jsx)(en,{steps:ei,currentStepId:eA,type:"ideas"}):0===e.length?(0,l.jsxs)("div",{className:"w-full h-full bg-[#2D2D2D] rounded-md flex flex-col items-center justify-center text-center p-8 min-h-[600px]",children:[(0,l.jsx)(j.A,{className:"w-16 h-16 text-[#A0A0A0] mb-4","aria-hidden":"true"}),(0,l.jsx)("h3",{className:"text-xl font-semibold text-[#E0E0E0]",children:"企画案を生成しよう！"}),(0,l.jsx)("p",{className:"text-[#A0A0A0] mt-2",children:"サイドパネルからキーワードや企画の方向性を入力して、「企画案を生成する」ボタンを押してください。"})]}):(0,l.jsxs)("div",{className:"space-y-4",children:[e.length>0&&(0,l.jsx)(o.tU,{value:eO,onValueChange:e=>eM(e),className:"mb-4",children:(0,l.jsxs)(o.j7,{className:"grid w-full grid-cols-3 bg-[#2D2D2D] border border-[#4A4A4A]",children:[(0,l.jsxs)(o.Xi,{value:"all",className:"data-[state=active]:bg-[#1A1A1A]",children:["すべて (",e.length,")"]}),(0,l.jsxs)(o.Xi,{value:"favorites",className:"data-[state=active]:bg-[#1A1A1A]",children:["お気に入り (",e.filter(e=>e.isFavorite).length,")"]}),(0,l.jsx)(o.Xi,{value:"recent",className:"data-[state=active]:bg-[#1A1A1A]",children:"最近生成"})]})}),e.length>0&&(0,l.jsxs)("div",{className:"mb-4 space-y-4 p-4 bg-[#2D2D2D] rounded-lg border border-[#4A4A4A]",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)(n.J,{htmlFor:"idea-search",className:"flex items-center gap-2 text-[#E0E0E0]",children:[(0,l.jsx)(D.A,{className:"h-4 w-4"}),"検索"]}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)(D.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-[#A0A0A0]"}),(0,l.jsx)(r.p,{id:"idea-search",placeholder:"タイトル、説明、ポイントで検索...",value:eD,onChange:e=>eS(e.target.value),className:"pl-10 bg-[#1A1A1A] border-[#4A4A4A] text-[#E0E0E0] placeholder:text-[#4A4A4A]"}),eD&&(0,l.jsx)(i.$,{variant:"ghost",size:"icon",onClick:()=>eS(""),className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-7 w-7 hover:bg-[#4A4A4A]","aria-label":"検索をクリア",children:(0,l.jsx)(S.A,{className:"h-4 w-4 text-[#A0A0A0]"})})]})]}),(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)(n.J,{className:"flex items-center gap-2 text-[#E0E0E0]",children:[(0,l.jsx)(z.A,{className:"h-4 w-4"}),"フィルター"]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(n.J,{className:"text-sm text-[#A0A0A0]",children:"カテゴリ"}),(0,l.jsx)("div",{className:"flex flex-wrap gap-2",children:Object.keys(es).map(e=>{let s=eI.includes(e),a=es[e],t=a.icon;return(0,l.jsxs)(x.E,{className:(0,B.cn)("cursor-pointer transition-all text-xs font-medium",s?a.badgeColor+" border-2 shadow-md":"bg-[#2D2D2D] text-[#A0A0A0] border-[#4A4A4A] hover:border-[#A0A0A0] hover:bg-[#1A1A1A]"),onClick:()=>{eF(a=>s?a.filter(s=>s!==e):[...a,e])},children:[(0,l.jsx)(t,{className:"h-3 w-3 mr-1"}),a.label]},e)})})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(n.J,{className:"text-sm text-[#A0A0A0]",children:"難易度"}),(0,l.jsxs)(d.l6,{value:eJ,onValueChange:e=>ez(e),children:[(0,l.jsx)(d.bq,{className:"bg-[#1A1A1A] border-[#4A4A4A] text-[#E0E0E0]",children:(0,l.jsx)(d.yv,{})}),(0,l.jsxs)(d.gC,{children:[(0,l.jsx)(d.eb,{value:"all",children:"すべて"}),(0,l.jsx)(d.eb,{value:"easy",children:"初級"}),(0,l.jsx)(d.eb,{value:"medium",children:"中級"}),(0,l.jsx)(d.eb,{value:"hard",children:"上級"})]})]})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(n.J,{className:"text-sm text-[#A0A0A0]",children:"予想時間（分）"}),(0,l.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,l.jsx)(r.p,{type:"number",placeholder:"最小",min:"0",value:e$.min||"",onChange:e=>eP(s=>({...s,min:e.target.value?parseInt(e.target.value):void 0})),className:"bg-[#1A1A1A] border-[#4A4A4A] text-[#E0E0E0] placeholder:text-[#4A4A4A]"}),(0,l.jsx)("span",{className:"text-[#A0A0A0]",children:"〜"}),(0,l.jsx)(r.p,{type:"number",placeholder:"最大",min:"0",value:e$.max||"",onChange:e=>eP(s=>({...s,max:e.target.value?parseInt(e.target.value):void 0})),className:"bg-[#1A1A1A] border-[#4A4A4A] text-[#E0E0E0] placeholder:text-[#4A4A4A]"})]})]})]}),(eD||eI.length>0||"all"!==eJ||void 0!==e$.min||void 0!==e$.max)&&(0,l.jsx)("div",{className:"flex justify-end pt-2",children:(0,l.jsxs)(i.$,{variant:"outline",size:"sm",onClick:()=>{eS(""),eF([]),ez("all"),eP({})},className:"border-[#4A4A4A] text-[#A0A0A0] hover:bg-[#4A4A4A]",children:[(0,l.jsx)(S.A,{className:"h-4 w-4 mr-1"}),"フィルターをクリア"]})})]}),(0,l.jsxs)("div",{className:"text-sm text-[#A0A0A0] pt-2 border-t border-[#4A4A4A]",children:[(0,l.jsx)("span",{className:"font-medium text-[#E0E0E0]",children:sZ.length}),"件の企画案が見つかりました",sZ.length<e.length&&(0,l.jsxs)("span",{className:"ml-2",children:["（全",e.length,"件中）"]})]})]}),e.length>0&&0===sZ.length&&(0,l.jsxs)("div",{className:"w-full bg-[#2D2D2D] rounded-md flex flex-col items-center justify-center text-center p-8 min-h-[400px] border border-[#4A4A4A]",children:[(0,l.jsx)(D.A,{className:"w-12 h-12 text-[#A0A0A0] mb-4","aria-hidden":"true"}),(0,l.jsx)("h3",{className:"text-lg font-semibold text-[#E0E0E0] mb-2",children:"検索条件に一致する企画案がありません"}),(0,l.jsx)("p",{className:"text-[#A0A0A0] mb-4",children:"検索条件やフィルターを変更してお試しください。"}),(0,l.jsxs)(i.$,{variant:"outline",onClick:()=>{eS(""),eF([]),ez("all"),eP({})},className:"border-[#4A4A4A]",children:[(0,l.jsx)(S.A,{className:"h-4 w-4 mr-1"}),"フィルターをクリア"]})]}),sZ.length>0&&(0,l.jsx)(Q.JY,{onDragEnd:sq,children:(0,l.jsx)(Q.gL,{droppableId:"ideas",children:e=>(0,l.jsxs)("div",{...e.droppableProps,ref:e.innerRef,className:"space-y-4",children:[sZ.map((e,s)=>{let t=es[e.category],r=t.icon;return(0,l.jsx)(Q.sx,{draggableId:e.id.toString(),index:s,isDragDisabled:e.isFavorite,children:(s,n)=>(0,l.jsxs)(m.Zp,{ref:s.innerRef,...s.draggableProps,className:(0,B.cn)("cursor-pointer transition-all relative overflow-hidden","hover:border-primary hover:shadow-lg hover:shadow-primary/20",a===e.id&&"border-primary shadow-md",n.isDragging&&"shadow-2xl opacity-90 bg-[#3A3A3A]",e.isFavorite&&"border-l-4 border-l-yellow-500/80","bg-gradient-to-br ".concat(t.gradient),!e.isFavorite&&"border-l-4 ".concat(t.borderColor)),onClick:()=>sB(e.id),role:"button",tabIndex:0,"aria-expanded":a===e.id,"aria-label":"企画案: ".concat(e.title),onKeyDown:s=>{("Enter"===s.key||" "===s.key)&&(s.preventDefault(),sB(e.id))},children:[!e.isFavorite&&(0,l.jsx)("div",{...s.dragHandleProps,className:"absolute left-0 top-0 bottom-0 w-6 flex items-center justify-center cursor-grab active:cursor-grabbing hover:bg-[#4A4A4A]/50 z-10 rounded-l-md transition-colors",onClick:e=>e.stopPropagation(),children:(0,l.jsx)($.A,{className:"h-4 w-4 text-[#A0A0A0]"})}),(0,l.jsx)(m.aR,{className:(0,B.cn)("pb-3",!e.isFavorite&&"pl-8"),children:(0,l.jsxs)("div",{className:"flex items-start gap-3",children:[(0,l.jsx)("div",{className:(0,B.cn)("w-12 h-12 rounded-lg flex items-center justify-center shadow-md flex-shrink-0",t.bgColor,"border border-[#4A4A4A]"),children:(0,l.jsx)(r,{className:"h-6 w-6 text-[#E0E0E0]"})}),(0,l.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,l.jsxs)("div",{className:"flex items-start justify-between gap-2 mb-2",children:[(0,l.jsx)(m.ZB,{className:"text-lg font-semibold line-clamp-2 text-[#E0E0E0] flex-1",children:e.title}),(0,l.jsxs)("div",{className:"flex items-center gap-2 flex-shrink-0",children:[(0,l.jsx)(i.$,{variant:"ghost",size:"icon",onClick:s=>{s.stopPropagation(),sL(e.id)},className:(0,B.cn)("h-8 w-8",e.isFavorite?"text-yellow-400 hover:text-yellow-300 hover:bg-yellow-500/10":"text-[#A0A0A0] hover:text-yellow-400 hover:bg-yellow-500/10"),"aria-label":e.isFavorite?"お気に入りから削除":"お気に入りに追加",children:(0,l.jsx)(w.A,{className:(0,B.cn)("h-4 w-4 transition-all",e.isFavorite&&"fill-current")})}),(0,l.jsxs)(x.E,{variant:"outline",className:"flex-shrink-0 border-[#4A4A4A] text-[#A0A0A0]",children:[(0,l.jsx)(v.A,{className:"h-3 w-3 mr-1"}),e.estimatedDuration,"分"]})]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:[(0,l.jsx)(x.E,{className:(0,B.cn)(t.badgeColor,"text-xs font-medium"),children:t.label}),e.difficulty&&(0,l.jsx)(x.E,{variant:"outline",className:(0,B.cn)("text-xs font-medium border-[#4A4A4A]","easy"===e.difficulty&&"text-green-400 border-green-500/50 bg-green-500/10","medium"===e.difficulty&&"text-yellow-400 border-yellow-500/50 bg-yellow-500/10","hard"===e.difficulty&&"text-red-400 border-red-500/50 bg-red-500/10"),children:"easy"===e.difficulty?"初級":"medium"===e.difficulty?"中級":"上級"})]}),(0,l.jsx)(m.BT,{className:"line-clamp-2 text-[#A0A0A0]",children:e.description})]})]})}),(0,l.jsxs)(m.Wu,{children:[(0,l.jsx)("h4",{className:"font-semibold text-sm mb-2 text-[#E0E0E0]",children:"おすすめポイント"}),(0,l.jsx)("div",{className:"flex flex-wrap gap-2",children:e.points.map((e,s)=>(0,l.jsx)(x.E,{variant:"secondary",className:"text-xs bg-[#2D2D2D] text-[#A0A0A0] border-[#4A4A4A]",children:e},s))})]}),(0,l.jsxs)(m.wL,{className:"gap-2",children:[(0,l.jsx)(i.$,{variant:"outline","aria-label":"この企画を調整",className:"border-[#4A4A4A]",children:"この企画を調整"}),(0,l.jsx)(i.$,{onClick:()=>s4(e),disabled:em,"aria-label":"".concat(e.title,"の台本を生成"),children:em?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(g.A,{className:"mr-2 h-4 w-4 animate-spin","aria-hidden":"true"}),"台本生成中..."]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(J.A,{className:"mr-2 h-4 w-4","aria-hidden":"true"}),"台本を生成する"]})})]})]})},e.id)}),e.placeholder]})})})]})}),(0,l.jsx)("aside",{className:"\n        hidden lg:block\n        w-1/4\n        overflow-y-auto\n        bg-[#1A1A1A]\n        border-l border-[#4A4A4A]\n        flex-shrink-0\n      ",children:(0,l.jsx)("div",{className:"p-4 h-full",children:em?(0,l.jsx)("div",{className:"h-full flex items-center justify-center",children:(0,l.jsx)(en,{steps:er,currentStepId:eu,type:"script"})}):ec&&a===ec.ideaId?(0,l.jsxs)(m.Zp,{className:"bg-[#2D2D2D]",children:[(0,l.jsx)(m.aR,{children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)(m.ZB,{className:"text-lg flex items-center gap-2 text-[#E0E0E0]",children:[(0,l.jsx)(J.A,{className:"h-5 w-5"}),"台本プレビュー"]}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsxs)(i.$,{variant:"outline",size:"sm",onClick:s2,className:"border-[#4A4A4A] text-[#A0A0A0] hover:bg-[#4A4A4A] hover:text-[#E0E0E0]",title:"印刷",children:[(0,l.jsx)(P.A,{className:"h-4 w-4 mr-1"}),"印刷"]}),(0,l.jsxs)(i.$,{variant:"outline",size:"sm",onClick:s1,className:"border-[#4A4A4A] text-[#A0A0A0] hover:bg-[#4A4A4A] hover:text-[#E0E0E0]",title:"PDFエクスポート",children:[(0,l.jsx)(T.A,{className:"h-4 w-4 mr-1"}),"PDF"]})]})]})}),(0,l.jsx)(m.Wu,{className:"space-y-4",children:(0,l.jsxs)(o.tU,{value:ev,onValueChange:e=>eN(e),children:[(0,l.jsxs)(o.j7,{className:"grid w-full grid-cols-3 bg-[#1A1A1A] border border-[#4A4A4A]",children:[(0,l.jsxs)(o.Xi,{value:"edit",className:"data-[state=active]:bg-[#2D2D2D] data-[state=active]:text-[#E0E0E0]",children:[(0,l.jsx)(k.A,{className:"h-4 w-4 mr-1"}),"編集"]}),(0,l.jsxs)(o.Xi,{value:"reading",className:"data-[state=active]:bg-[#2D2D2D] data-[state=active]:text-[#E0E0E0]",children:[(0,l.jsx)(R.A,{className:"h-4 w-4 mr-1"}),"読み上げ"]}),(0,l.jsxs)(o.Xi,{value:"timeline",className:"data-[state=active]:bg-[#2D2D2D] data-[state=active]:text-[#E0E0E0]",children:[(0,l.jsx)(O.A,{className:"h-4 w-4 mr-1"}),"タイムライン"]})]}),(0,l.jsxs)(o.av,{value:"edit",className:"mt-4 space-y-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between gap-2 pb-2 border-b border-[#4A4A4A]",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(i.$,{variant:"outline",size:"sm",onClick:sW,disabled:e0<=0,className:"border-[#4A4A4A] text-[#A0A0A0] hover:bg-[#4A4A4A] hover:text-[#E0E0E0] disabled:opacity-50 disabled:cursor-not-allowed",title:"アンドゥ",children:(0,l.jsx)(M.A,{className:"h-4 w-4"})}),(0,l.jsx)(i.$,{variant:"outline",size:"sm",onClick:sU,disabled:e0>=eY.length-1,className:"border-[#4A4A4A] text-[#A0A0A0] hover:bg-[#4A4A4A] hover:text-[#E0E0E0] disabled:opacity-50 disabled:cursor-not-allowed",title:"リドゥ",children:(0,l.jsx)(L.A,{className:"h-4 w-4"})}),(0,l.jsx)(i.$,{variant:"outline",size:"sm",onClick:()=>{ec&&(sX(ec),sG(!1))},disabled:!e2||"saving"===e6,className:"border-[#4A4A4A] text-[#A0A0A0] hover:bg-[#4A4A4A] hover:text-[#E0E0E0] disabled:opacity-50 disabled:cursor-not-allowed",title:"保存",children:"saving"===e6?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(g.A,{className:"h-4 w-4 mr-1 animate-spin"}),"保存中..."]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(q.A,{className:"h-4 w-4 mr-1"}),"保存"]})})]}),(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[sQ&&(0,l.jsxs)("div",{className:"flex items-center gap-4 text-xs text-[#A0A0A0]",children:[(0,l.jsxs)("span",{children:["文字数: ",sQ.total.chars]}),(0,l.jsxs)("span",{children:["行数: ",sQ.total.lines]}),(0,l.jsxs)("span",{className:"flex items-center gap-1",children:[(0,l.jsx)(v.A,{className:"h-3 w-3"}),"予想時間: ",sQ.total.estimatedMinutes,"分"]})]}),ec&&(0,l.jsxs)("div",{className:"ml-auto",children:["saved"===e6&&(0,l.jsx)(x.E,{variant:"outline",className:"text-xs bg-green-500/10 text-green-400 border-green-500/50",children:"保存済み"}),"editing"===e6&&(0,l.jsx)(x.E,{variant:"outline",className:"text-xs bg-yellow-500/10 text-yellow-400 border-yellow-500/50",children:"編集中"}),"saving"===e6&&(0,l.jsx)(x.E,{variant:"outline",className:"text-xs bg-blue-500/10 text-blue-400 border-blue-500/50",children:"保存中..."})]})]})]}),sy.sections.sort((e,s)=>e.order-s.order).map(e=>{let s=sw(e.id),a=sf[e.color]||sf.blue,t=s.split("\n").length;return(0,l.jsxs)("div",{className:"border-l-4 ".concat(a.border," ").concat(a.bg," p-4 rounded"),children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,l.jsxs)("h5",{className:"font-bold text-[#E0E0E0]",children:["【",e.label,"】"]}),(0,l.jsxs)("span",{className:"text-xs text-[#A0A0A0]",children:[s.length,"文字 / ",t,"行"]})]}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("div",{className:"absolute left-0 top-0 bottom-0 w-8 bg-[#2D2D2D] border-r border-[#4A4A4A] text-xs text-[#666] font-mono flex flex-col items-end pr-2 py-2 overflow-hidden",children:s.split("\n").map((e,s)=>(0,l.jsx)("div",{className:"leading-6 whitespace-nowrap",children:s+1},s))}),(0,l.jsx)(c.T,{value:s,onChange:s=>s_(e.id,s.target.value),className:"pl-10 font-mono text-sm text-[#E0E0E0] bg-[#1A1A1A] border-[#4A4A4A] resize-none min-h-[120px]",placeholder:e.placeholder})]})]},e.id)})]}),(0,l.jsxs)(o.av,{value:"reading",className:"mt-4 space-y-4",children:[(0,l.jsxs)("div",{className:"space-y-3 pb-4 border-b border-[#4A4A4A]",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)(n.J,{className:"flex items-center gap-2 text-[#E0E0E0]",children:[(0,l.jsx)(R.A,{className:"h-4 w-4"}),"読み上げ速度"]}),(0,l.jsxs)("span",{className:"text-sm text-[#A0A0A0]",children:[ef.toFixed(1),"倍速"]})]}),(0,l.jsx)(_.A,{min:.5,max:2,step:.1,value:[ef],onValueChange:e=>ey(e[0]),className:"w-full"}),(0,l.jsxs)("div",{className:"flex justify-between text-xs text-[#4A4A4A]",children:[(0,l.jsx)("span",{children:"0.5倍"}),(0,l.jsx)("span",{children:"1.0倍"}),(0,l.jsx)("span",{children:"2.0倍"})]})]}),(0,l.jsx)("div",{className:"flex items-center gap-2 pb-4 border-b border-[#4A4A4A]",children:(0,l.jsx)(i.$,{variant:"outline",size:"sm",onClick:()=>eC(!ek),className:"border-[#4A4A4A] text-[#A0A0A0] hover:bg-[#4A4A4A] hover:text-[#E0E0E0]",children:ek?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(Z.A,{className:"h-4 w-4 mr-1"}),"停止"]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(V.A,{className:"h-4 w-4 mr-1"}),"読み上げ開始"]})})}),(0,l.jsx)("div",{className:"space-y-4 max-h-[500px] overflow-y-auto",children:sy.sections.sort((e,s)=>e.order-s.order).map((e,s)=>{let a=sw(e.id),t=sf[e.color]||sf.blue,i=a.split("\n");return(0,l.jsxs)("div",{className:"border-l-4 ".concat(t.border," ").concat(t.bg," p-4 rounded"),children:[(0,l.jsxs)("h5",{className:"font-bold text-lg text-[#E0E0E0] mb-3",children:["【",e.label,"】"]}),(0,l.jsx)("div",{className:"space-y-2",children:i.map((e,a)=>{let t=sy.sections.slice(0,s).reduce((e,s)=>e+sw(s.id).split("\n").length,0)+a;return(0,l.jsx)("div",{className:(0,B.cn)("text-lg leading-relaxed p-2 rounded transition-all",ew===t?"bg-primary/20 border-2 border-primary text-[#E0E0E0] font-semibold":"text-[#A0A0A0]"),children:e||"\xa0"},a)})})]},e.id)})})]}),(0,l.jsx)(o.av,{value:"timeline",className:"mt-4 space-y-4",children:s0?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"p-4 bg-[#2D2D2D] rounded-lg border border-[#4A4A4A]",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(v.A,{className:"h-5 w-5 text-primary"}),(0,l.jsx)("span",{className:"text-lg font-semibold text-[#E0E0E0]",children:"総時間"})]}),(0,l.jsx)("span",{className:"text-2xl font-bold text-primary",children:sY(s0.totalSeconds)})]})}),(0,l.jsx)("div",{className:"space-y-3",children:s0.sections.map((e,s)=>{sf[e.section.color]||sf.blue;let a=e.duration/s0.totalSeconds*100,t={blue:"bg-blue-500",green:"bg-green-500",purple:"bg-purple-500",yellow:"bg-yellow-500",orange:"bg-orange-500",pink:"bg-pink-500"}[e.section.color]||"bg-blue-500";return(0,l.jsxs)("div",{className:"border border-[#4A4A4A] rounded-lg p-4 bg-[#2D2D2D]",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(t)}),(0,l.jsxs)("h5",{className:"font-semibold text-[#E0E0E0]",children:["【",e.section.label,"】"]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-4 text-sm text-[#A0A0A0]",children:[(0,l.jsx)("span",{children:sY(e.startTime)}),(0,l.jsx)("span",{className:"text-primary",children:"→"}),(0,l.jsx)("span",{children:sY(e.endTime)})]})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between text-xs text-[#4A4A4A]",children:[(0,l.jsxs)("span",{children:["開始: ",sY(e.startTime)]}),(0,l.jsxs)("span",{className:"text-primary font-semibold",children:["継続時間: ",sY(e.duration)]}),(0,l.jsxs)("span",{children:["終了: ",sY(e.endTime)]})]}),(0,l.jsx)("div",{className:"w-full h-3 bg-[#1A1A1A] rounded-full overflow-hidden",children:(0,l.jsx)("div",{className:(0,B.cn)("h-full transition-all",t),style:{width:"".concat(a,"%")}})}),(0,l.jsxs)("div",{className:"text-xs text-[#A0A0A0]",children:[e.chars,"文字 / 累積: ",sY(e.endTime)]})]})]},e.section.id)})})]}):(0,l.jsx)("div",{className:"text-center text-[#A0A0A0] py-8",children:"タイムラインを計算中..."})})]})})]}):(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center h-full min-h-[400px] text-center p-8",children:[(0,l.jsx)(J.A,{className:"w-16 h-16 text-[#A0A0A0] mb-4","aria-hidden":"true"}),(0,l.jsx)("h3",{className:"text-xl font-semibold text-[#E0E0E0] mb-2",children:"台本プレビュー"}),(0,l.jsx)("p",{className:"text-[#A0A0A0]",children:"企画案を選択して「台本を生成する」ボタンを押すと、ここに台本が表示されます。"})]})})}),(0,l.jsx)("div",{className:"p-4 border-t border-[#4A4A4A] lg:hidden",children:(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,l.jsx)(N.A,{className:"h-5 w-5"}),(0,l.jsx)("h3",{className:"text-lg font-semibold",children:"企画案生成"})]}),s5()]})}),!su&&(0,l.jsx)(l.Fragment,{children:em?(0,l.jsx)("div",{className:"p-4 border-t border-[#4A4A4A] lg:hidden bg-[#1A1A1A]",children:(0,l.jsx)(en,{steps:er,currentStepId:eu,type:"script"})}):ec&&a===ec.ideaId&&(0,l.jsx)("div",{className:"p-4 border-t border-[#4A4A4A] lg:hidden bg-[#1A1A1A]",children:(0,l.jsxs)(m.Zp,{className:"bg-[#2D2D2D]",children:[(0,l.jsx)(m.aR,{children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)(m.ZB,{className:"text-lg flex items-center gap-2 text-[#E0E0E0]",children:[(0,l.jsx)(J.A,{className:"h-5 w-5"}),"台本プレビュー"]}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsxs)(i.$,{variant:"outline",size:"sm",onClick:s2,className:"border-[#4A4A4A] text-[#A0A0A0] hover:bg-[#4A4A4A] hover:text-[#E0E0E0]",title:"印刷",children:[(0,l.jsx)(P.A,{className:"h-4 w-4 mr-1"}),"印刷"]}),(0,l.jsxs)(i.$,{variant:"outline",size:"sm",onClick:s1,className:"border-[#4A4A4A] text-[#A0A0A0] hover:bg-[#4A4A4A] hover:text-[#E0E0E0]",title:"PDFエクスポート",children:[(0,l.jsx)(T.A,{className:"h-4 w-4 mr-1"}),"PDF"]})]})]})}),(0,l.jsx)(m.Wu,{className:"space-y-4",children:(0,l.jsxs)(o.tU,{value:ev,onValueChange:e=>eN(e),children:[(0,l.jsxs)(o.j7,{className:"grid w-full grid-cols-3 bg-[#1A1A1A] border border-[#4A4A4A]",children:[(0,l.jsxs)(o.Xi,{value:"edit",className:"data-[state=active]:bg-[#2D2D2D] data-[state=active]:text-[#E0E0E0]",children:[(0,l.jsx)(k.A,{className:"h-4 w-4 mr-1"}),"編集"]}),(0,l.jsxs)(o.Xi,{value:"reading",className:"data-[state=active]:bg-[#2D2D2D] data-[state=active]:text-[#E0E0E0]",children:[(0,l.jsx)(R.A,{className:"h-4 w-4 mr-1"}),"読み上げ"]}),(0,l.jsxs)(o.Xi,{value:"timeline",className:"data-[state=active]:bg-[#2D2D2D] data-[state=active]:text-[#E0E0E0]",children:[(0,l.jsx)(O.A,{className:"h-4 w-4 mr-1"}),"タイムライン"]})]}),(0,l.jsxs)(o.av,{value:"edit",className:"mt-4 space-y-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between gap-2 pb-2 border-b border-[#4A4A4A]",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(i.$,{variant:"outline",size:"sm",onClick:sW,disabled:e0<=0,className:"border-[#4A4A4A] text-[#A0A0A0] hover:bg-[#4A4A4A] hover:text-[#E0E0E0] disabled:opacity-50 disabled:cursor-not-allowed",title:"アンドゥ",children:(0,l.jsx)(M.A,{className:"h-4 w-4"})}),(0,l.jsx)(i.$,{variant:"outline",size:"sm",onClick:sU,disabled:e0>=eY.length-1,className:"border-[#4A4A4A] text-[#A0A0A0] hover:bg-[#4A4A4A] hover:text-[#E0E0E0] disabled:opacity-50 disabled:cursor-not-allowed",title:"リドゥ",children:(0,l.jsx)(L.A,{className:"h-4 w-4"})}),(0,l.jsx)(i.$,{variant:"outline",size:"sm",onClick:()=>{ec&&(sX(ec),sG(!1))},disabled:!e2||"saving"===e6,className:"border-[#4A4A4A] text-[#A0A0A0] hover:bg-[#4A4A4A] hover:text-[#E0E0E0] disabled:opacity-50 disabled:cursor-not-allowed",title:"保存",children:"saving"===e6?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(g.A,{className:"h-4 w-4 mr-1 animate-spin"}),"保存中..."]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(q.A,{className:"h-4 w-4 mr-1"}),"保存"]})})]}),(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[sQ&&(0,l.jsxs)("div",{className:"flex items-center gap-4 text-xs text-[#A0A0A0]",children:[(0,l.jsxs)("span",{children:["文字数: ",sQ.total.chars]}),(0,l.jsxs)("span",{children:["行数: ",sQ.total.lines]}),(0,l.jsxs)("span",{className:"flex items-center gap-1",children:[(0,l.jsx)(v.A,{className:"h-3 w-3"}),"予想時間: ",sQ.total.estimatedMinutes,"分"]})]}),ec&&(0,l.jsxs)("div",{className:"ml-auto",children:["saved"===e6&&(0,l.jsx)(x.E,{variant:"outline",className:"text-xs bg-green-500/10 text-green-400 border-green-500/50",children:"保存済み"}),"editing"===e6&&(0,l.jsx)(x.E,{variant:"outline",className:"text-xs bg-yellow-500/10 text-yellow-400 border-yellow-500/50",children:"編集中"}),"saving"===e6&&(0,l.jsx)(x.E,{variant:"outline",className:"text-xs bg-blue-500/10 text-blue-400 border-blue-500/50",children:"保存中..."})]})]})]}),sy.sections.sort((e,s)=>e.order-s.order).map(e=>{let s=sw(e.id),a=sf[e.color]||sf.blue,t=s.split("\n").length;return(0,l.jsxs)("div",{className:"border-l-4 ".concat(a.border," ").concat(a.bg," p-4 rounded"),children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,l.jsxs)("h5",{className:"font-bold text-[#E0E0E0]",children:["【",e.label,"】"]}),(0,l.jsxs)("span",{className:"text-xs text-[#A0A0A0]",children:[s.length,"文字 / ",t,"行"]})]}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("div",{className:"absolute left-0 top-0 bottom-0 w-8 bg-[#2D2D2D] border-r border-[#4A4A4A] text-xs text-[#666] font-mono flex flex-col items-end pr-2 py-2 overflow-hidden",children:s.split("\n").map((e,s)=>(0,l.jsx)("div",{className:"leading-6 whitespace-nowrap",children:s+1},s))}),(0,l.jsx)(c.T,{value:s,onChange:s=>s_(e.id,s.target.value),className:"pl-10 font-mono text-sm text-[#E0E0E0] bg-[#1A1A1A] border-[#4A4A4A] resize-none min-h-[120px]",placeholder:e.placeholder})]})]},e.id)})]}),(0,l.jsxs)(o.av,{value:"reading",className:"mt-4 space-y-4",children:[(0,l.jsxs)("div",{className:"space-y-3 pb-4 border-b border-[#4A4A4A]",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)(n.J,{className:"flex items-center gap-2 text-[#E0E0E0]",children:[(0,l.jsx)(R.A,{className:"h-4 w-4"}),"読み上げ速度"]}),(0,l.jsxs)("span",{className:"text-sm text-[#A0A0A0]",children:[ef.toFixed(1),"倍速"]})]}),(0,l.jsx)(_.A,{min:.5,max:2,step:.1,value:[ef],onValueChange:e=>ey(e[0]),className:"w-full"}),(0,l.jsxs)("div",{className:"flex justify-between text-xs text-[#4A4A4A]",children:[(0,l.jsx)("span",{children:"0.5倍"}),(0,l.jsx)("span",{children:"1.0倍"}),(0,l.jsx)("span",{children:"2.0倍"})]})]}),(0,l.jsx)("div",{className:"flex items-center gap-2 pb-4 border-b border-[#4A4A4A]",children:(0,l.jsx)(i.$,{variant:"outline",size:"sm",onClick:()=>eC(!ek),className:"border-[#4A4A4A] text-[#A0A0A0] hover:bg-[#4A4A4A] hover:text-[#E0E0E0]",children:ek?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(Z.A,{className:"h-4 w-4 mr-1"}),"停止"]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(V.A,{className:"h-4 w-4 mr-1"}),"読み上げ開始"]})})}),(0,l.jsx)("div",{className:"space-y-4 max-h-[500px] overflow-y-auto",children:sy.sections.sort((e,s)=>e.order-s.order).map((e,s)=>{let a=sw(e.id),t=sf[e.color]||sf.blue,i=a.split("\n");return(0,l.jsxs)("div",{className:"border-l-4 ".concat(t.border," ").concat(t.bg," p-4 rounded"),children:[(0,l.jsxs)("h5",{className:"font-bold text-lg text-[#E0E0E0] mb-3",children:["【",e.label,"】"]}),(0,l.jsx)("div",{className:"space-y-2",children:i.map((e,a)=>{let t=sy.sections.slice(0,s).reduce((e,s)=>e+sw(s.id).split("\n").length,0)+a;return(0,l.jsx)("div",{className:(0,B.cn)("text-lg leading-relaxed p-2 rounded transition-all",ew===t?"bg-primary/20 border-2 border-primary text-[#E0E0E0] font-semibold":"text-[#A0A0A0]"),children:e||"\xa0"},a)})})]},e.id)})})]}),(0,l.jsx)(o.av,{value:"timeline",className:"mt-4 space-y-4",children:s0?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"p-4 bg-[#2D2D2D] rounded-lg border border-[#4A4A4A]",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(v.A,{className:"h-5 w-5 text-primary"}),(0,l.jsx)("span",{className:"text-lg font-semibold text-[#E0E0E0]",children:"総時間"})]}),(0,l.jsx)("span",{className:"text-2xl font-bold text-primary",children:sY(s0.totalSeconds)})]})}),(0,l.jsx)("div",{className:"space-y-3",children:s0.sections.map((e,s)=>{let a=sf[e.section.color]||sf.blue,t=e.duration/s0.totalSeconds*100,i={blue:"bg-blue-500",green:"bg-green-500",purple:"bg-purple-500",yellow:"bg-yellow-500",orange:"bg-orange-500",pink:"bg-pink-500"}[e.section.color]||"bg-blue-500";return(0,l.jsxs)("div",{className:"border border-[#4A4A4A] rounded-lg p-4 bg-[#2D2D2D]",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(i)}),(0,l.jsxs)("h5",{className:"font-semibold text-[#E0E0E0]",children:["【",e.section.label,"】"]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-4 text-sm text-[#A0A0A0]",children:[(0,l.jsx)("span",{children:sY(e.startTime)}),(0,l.jsx)("span",{className:"text-primary",children:"→"}),(0,l.jsx)("span",{children:sY(e.endTime)})]})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between text-xs text-[#4A4A4A]",children:[(0,l.jsxs)("span",{children:["開始: ",sY(e.startTime)]}),(0,l.jsxs)("span",{className:"text-primary font-semibold",children:["継続時間: ",sY(e.duration)]}),(0,l.jsxs)("span",{children:["終了: ",sY(e.endTime)]})]}),(0,l.jsx)("div",{className:"w-full h-3 bg-[#1A1A1A] rounded-full overflow-hidden",children:(0,l.jsx)("div",{className:(0,B.cn)("h-full transition-all",a.bg.replace("/5","")),style:{width:"".concat(t,"%")}})}),(0,l.jsxs)("div",{className:"text-xs text-[#A0A0A0]",children:[e.chars,"文字 / 累積: ",sY(e.endTime)]})]})]},e.section.id)})})]}):(0,l.jsx)("div",{className:"text-center text-[#A0A0A0] py-8",children:"タイムラインを計算中..."})})]})})]})})}),!su&&sA&&(0,l.jsx)("div",{className:"fixed inset-0 bg-black/50 z-30",onClick:()=>sb(!1)}),!su&&(0,l.jsx)(K.B,{isOpen:sA,onClose:()=>sb(!1),title:"企画・台本サポート",isDesktop:su,children:s3}),su&&!sA&&(0,l.jsx)(K.R,{onOpen:()=>sb(!0),isDesktop:su,tabs:[{id:"generate",label:"生成",icon:(0,l.jsx)(j.A,{className:"h-4 w-4"})},{id:"persona",label:"ペルソナ",icon:(0,l.jsx)(N.A,{className:"h-4 w-4"})},{id:"history",label:"履歴",icon:(0,l.jsx)(J.A,{className:"h-4 w-4"})},{id:"saved",label:"保存済み",icon:(0,l.jsx)(F.A,{className:"h-4 w-4"})}],onTabClick:sj}),(0,l.jsx)(H.lG,{open:sc,onOpenChange:e=>{sd(e),e||sJ()},children:(0,l.jsxs)(H.Cf,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,l.jsxs)(H.c7,{children:[(0,l.jsx)(H.L3,{children:so?"ペルソナを編集":"新しいペルソナを作成"}),(0,l.jsx)(H.rr,{children:"ペルソナの情報を入力してください。AIがこの情報を元に企画案や台本を生成します。"})]}),(0,l.jsxs)("div",{className:"space-y-4 py-4",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(n.J,{htmlFor:"persona-name",children:"ペルソナ名 *"}),(0,l.jsx)(r.p,{id:"persona-name",value:sm.name,onChange:e=>sh(s=>({...s,name:e.target.value})),placeholder:"例: 元気なゲーマー女子",autoFocus:!0})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(n.J,{htmlFor:"persona-description",children:"ペルソナの特徴・話し方 *"}),(0,l.jsx)(c.T,{id:"persona-description",value:sm.description,onChange:e=>sh(s=>({...s,description:e.target.value})),placeholder:"例: いつも元気で明るく、ゲームが大好き。視聴者と積極的にコミュニケーションを取るスタイル。",className:"min-h-[120px]"})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(n.J,{children:"話し方のスタイル（オプション）"}),(0,l.jsx)("div",{className:"flex flex-wrap gap-2",children:["カジュアル","フォーマル","エネルギッシュ","落ち着いた","テクニカル","エンターテイニング"].map(e=>(0,l.jsx)(x.E,{variant:sm.speakingStyle.includes(e)?"default":"outline",className:"cursor-pointer",onClick:()=>{sh(s=>({...s,speakingStyle:s.speakingStyle.includes(e)?s.speakingStyle.filter(s=>s!==e):[...s.speakingStyle,e]}))},children:e},e))})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(n.J,{children:"キャラクターの特徴（オプション）"}),(0,l.jsx)("div",{className:"flex flex-wrap gap-2",children:["ゲーマー","歌好き","雑談好き","コラボ好き","イベント参加","その他"].map(e=>(0,l.jsx)(x.E,{variant:sm.traits.includes(e)?"default":"outline",className:"cursor-pointer",onClick:()=>{sh(s=>({...s,traits:s.traits.includes(e)?s.traits.filter(s=>s!==e):[...s.traits,e]}))},children:e},e))})]})]}),(0,l.jsxs)(H.Es,{children:[(0,l.jsx)(i.$,{variant:"outline",onClick:()=>{sd(!1),sJ()},children:"キャンセル"}),(0,l.jsx)(i.$,{onClick:sM,disabled:!sm.name.trim(),children:so?"更新":"作成"})]})]})})]})}},96681:(e,s,a)=>{Promise.resolve().then(a.bind(a,13631))}},e=>{e.O(0,[96,76,358],()=>e(e.s=96681)),_N_E=e.O()}]);