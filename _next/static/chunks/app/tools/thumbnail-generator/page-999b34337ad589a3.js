(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[837],{38073:(e,t,s)=>{Promise.resolve().then(s.bind(s,41157))},41157:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>X});var i=s(36166),n=s(5766),a=s(82789),l=s(49227),r=s(66614),o=s(2391),d=s(26423),c=s(10508),h=s(54038),u=s(87617),m=s(78926),x=s(1219),p=s(86520),g=s(9885),v=s(388),f=s(89534),j=s(28448),w=s(86821),b=s(95575),y=s(7505),N=s(72811),k=s(90542);let E=n.memo(e=>{let{id:t,isSelected:s,text:a,color:l="white",fontSize:r="2rem",className:o,x:d,y:c,width:h,height:u,rotation:m,onDragStop:x,onResizeStop:p,enableResizing:g,disableDragging:v}=e,{updateLayer:f}=(0,b.S)(),[j,y]=(0,n.useState)({x:d,y:c}),[E,S]=(0,n.useState)(!1),C=(0,n.useRef)(null),R=(0,n.useRef)(null);(0,n.useEffect)(()=>{y({x:d,y:c})},[d,c]);let z=(0,n.useCallback)(e=>{var s;e.preventDefault(),e.stopPropagation(),S(!0);let i=null==(s=C.current)?void 0:s.getSelfElement();if(!i)return;let n=i.parentElement;if(!n)return;let a=n.getBoundingClientRect(),l=a.left+j.x+h/2,r=a.top+j.y+u/2,o=e=>{if(0===e.touches.length)return;let s=e.touches[0].clientX-l;f(t,{rotation:180/Math.PI*Math.atan2(e.touches[0].clientY-r,s)+90})},d=()=>{S(!1),window.removeEventListener("touchmove",o),window.removeEventListener("touchend",d)};window.addEventListener("touchmove",o),window.addEventListener("touchend",d)},[t,f,j.x,j.y,h,u]);return(0,n.useEffect)(()=>{let e=R.current;if(e)return e.addEventListener("touchstart",z,{passive:!1}),()=>{e.removeEventListener("touchstart",z)}},[z]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(N.p,{ref:C,size:{width:h,height:u},position:j,onDragStart:()=>{if(E)return!1},onDrag:(e,t)=>{E||y({x:t.x,y:t.y})},onDragStop:x,onResizeStop:p,minWidth:50,minHeight:20,enableResizing:g,disableDragging:v||E,className:"border border-dashed border-transparent hover:border-gray-500 transition-colors duration-200",style:{display:"flex",alignItems:"center",justifyContent:"center"},children:(0,i.jsx)("div",{className:"w-full h-full flex items-center justify-center",style:{transform:"rotate(".concat(m,"deg)"),transformOrigin:"center"},children:(0,i.jsx)("p",{className:(0,w.cn)("cursor-move",o),style:{color:l,fontSize:r,lineHeight:1,whiteSpace:"pre-wrap"},children:a})})}),s&&(0,i.jsx)("div",{ref:R,onMouseDown:e=>{var s;e.preventDefault(),e.stopPropagation(),S(!0);let i=null==(s=C.current)?void 0:s.getSelfElement();if(!i)return;let n=i.parentElement;if(!n)return;let a=n.getBoundingClientRect(),l=a.left+j.x+h/2,r=a.top+j.y+u/2,o=e=>{let s=e.clientX-l;f(t,{rotation:180/Math.PI*Math.atan2(e.clientY-r,s)+90})},d=()=>{S(!1),window.removeEventListener("mousemove",o),window.removeEventListener("mouseup",d)};window.addEventListener("mousemove",o),window.addEventListener("mouseup",d)},className:"absolute cursor-grab active:cursor-grabbing bg-white border rounded-full p-1 shadow z-10",style:{left:j.x+h/2,top:j.y-30,transform:"translateX(-50%)"},children:(0,i.jsx)(k.A,{className:"h-4 w-4"})})]})}),S=n.memo(e=>{let{id:t,isSelected:s,src:a,alt:l,x:r,y:o,width:d,height:c,rotation:h,onDragStop:u,onResize:m,onResizeStop:x,onSelect:p,isLocked:g,isDraggable:v,lockAspectRatio:f,enableResizing:j,disableDragging:w,onRotateStart:y,onRotate:E,onRotateStop:S}=e,{updateLayer:C}=(0,b.S)(),[R,z]=(0,n.useState)({x:r,y:o}),[L,D]=(0,n.useState)(!1),A=(0,n.useRef)(null),P=(0,n.useRef)(null);(0,n.useEffect)(()=>{z({x:r,y:o})},[r,o]);let $=(0,n.useCallback)(e=>{var s;e.preventDefault(),e.stopPropagation(),D(!0);let i=null==(s=A.current)?void 0:s.getSelfElement();if(!i)return;let n=i.parentElement;if(!n)return;let a=n.getBoundingClientRect(),l=a.left+R.x+d/2,r=a.top+R.y+c/2,o=e=>{if(0===e.touches.length)return;let s=e.touches[0].clientX-l;C(t,{rotation:180/Math.PI*Math.atan2(e.touches[0].clientY-r,s)+90})},h=()=>{D(!1),window.removeEventListener("touchmove",o),window.removeEventListener("touchend",h)};window.addEventListener("touchmove",o),window.addEventListener("touchend",h)},[t,C,R.x,R.y,d,c]);return(0,n.useEffect)(()=>{let e=P.current;if(e)return e.addEventListener("touchstart",$,{passive:!1}),()=>{e.removeEventListener("touchstart",$)}},[$]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(N.p,{ref:A,size:{width:d,height:c},position:R,onDragStart:()=>{if(L)return!1},onDrag:(e,t)=>{L||z({x:t.x,y:t.y})},onDragStop:u,onResize:m,onResizeStop:x,lockAspectRatio:f,enableResizing:j,disableDragging:w||L,className:"border border-dashed border-transparent hover:border-gray-500 transition-colors duration-200",children:(0,i.jsx)("div",{style:{width:"100%",height:"100%",transform:"rotate(".concat(h,"deg)"),transformOrigin:"center"},children:(0,i.jsx)("div",{style:{width:"100%",height:"100%",backgroundImage:a?"url(".concat(a,")"):"none",backgroundSize:"cover",backgroundPosition:"center"}})})}),s&&(0,i.jsx)("div",{ref:P,onMouseDown:e=>{var s;e.preventDefault(),e.stopPropagation(),D(!0);let i=null==(s=A.current)?void 0:s.getSelfElement();if(!i)return;let n=i.parentElement;if(!n)return;let a=n.getBoundingClientRect(),l=a.left+R.x+d/2,r=a.top+R.y+c/2,o=e=>{let s=e.clientX-l;C(t,{rotation:180/Math.PI*Math.atan2(e.clientY-r,s)+90})},h=()=>{D(!1),window.removeEventListener("mousemove",o),window.removeEventListener("mouseup",h)};window.addEventListener("mousemove",o),window.addEventListener("mouseup",h)},className:"absolute cursor-grab active:cursor-grabbing bg-white border rounded-full p-1 shadow z-10",style:{left:R.x+d/2,top:R.y-30,transform:"translateX(-50%)"},children:(0,i.jsx)(k.A,{className:"h-4 w-4"})})]})}),C=e=>{let{id:t,isSelected:s,shapeType:a,backgroundColor:l,borderColor:r,borderWidth:o,rotation:d,onDragStop:c,onResize:h,onResizeStop:u,lockAspectRatio:m,enableResizing:x,disableDragging:p,x:g,y:v,width:f,height:j}=e,{updateLayer:w}=(0,b.S)(),[y,E]=(0,n.useState)({x:g||0,y:v||0}),[S,C]=(0,n.useState)(!1),R=(0,n.useRef)(null),z=(0,n.useRef)(null);(0,n.useEffect)(()=>{E({x:g||0,y:v||0})},[g,v]);let L=(0,n.useCallback)(e=>{var s;e.preventDefault(),e.stopPropagation(),C(!0);let i=null==(s=R.current)?void 0:s.getSelfElement();if(!i)return;let n=i.parentElement;if(!n)return;let a=n.getBoundingClientRect(),l=a.left+y.x+f/2,r=a.top+y.y+j/2,o=e=>{if(0===e.touches.length)return;let s=e.touches[0].clientX-l;w(t,{rotation:180/Math.PI*Math.atan2(e.touches[0].clientY-r,s)+90})},d=()=>{C(!1),window.removeEventListener("touchmove",o),window.removeEventListener("touchend",d)};window.addEventListener("touchmove",o),window.addEventListener("touchend",d)},[t,w,y.x,y.y,f,j]);return(0,n.useEffect)(()=>{let e=z.current;if(e)return e.addEventListener("touchstart",L,{passive:!1}),()=>{e.removeEventListener("touchstart",L)}},[L]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(N.p,{ref:R,size:{width:f,height:j},position:y,onDragStart:()=>{if(S)return!1},onDrag:(e,t)=>{S||E({x:t.x,y:t.y})},onDragStop:c,onResize:h,onResizeStop:u,lockAspectRatio:m,enableResizing:x,disableDragging:p||S,className:"border border-dashed border-transparent hover:border-gray-500 transition-colors duration-200",children:(0,i.jsx)("div",{style:{width:"100%",height:"100%",transform:"rotate(".concat(d,"deg)"),transformOrigin:"center"},children:(()=>{let e={width:"100%",height:"100%",style:{overflow:"visible"}};switch(a){case"line":return(0,i.jsx)("svg",{...e,children:(0,i.jsx)("line",{x1:0,y1:j/2,x2:f,y2:j/2,stroke:r,strokeWidth:o})});case"arrow":return(0,i.jsxs)("svg",{...e,children:[(0,i.jsx)("defs",{children:(0,i.jsx)("marker",{id:"arrowhead-".concat(t),markerWidth:"10",markerHeight:"7",refX:"10",refY:"3.5",orient:"auto",fill:r,children:(0,i.jsx)("polygon",{points:"0 0, 10 3.5, 0 7"})})}),(0,i.jsx)("line",{x1:0,y1:j/2,x2:f-10,y2:j/2,stroke:r,strokeWidth:o,markerEnd:"url(#arrowhead-".concat(t,")")})]});default:return(0,i.jsx)("div",{style:{width:"100%",height:"100%",backgroundColor:l,border:"".concat(o,"px solid ").concat(r),borderRadius:"circle"===a?"50%":"0"}})}})()})}),s&&(0,i.jsx)("div",{ref:z,onMouseDown:e=>{var s;e.preventDefault(),e.stopPropagation(),C(!0);let i=null==(s=R.current)?void 0:s.getSelfElement();if(!i)return;let n=i.parentElement;if(!n)return;let a=n.getBoundingClientRect(),l=a.left+y.x+f/2,r=a.top+y.y+j/2,o=e=>{let s=e.clientX-l;w(t,{rotation:180/Math.PI*Math.atan2(e.clientY-r,s)+90})},d=()=>{C(!1),window.removeEventListener("mousemove",o),window.removeEventListener("mouseup",d)};window.addEventListener("mousemove",o),window.addEventListener("mouseup",d)},className:"absolute cursor-grab active:cursor-grabbing bg-white border rounded-full p-1 shadow z-10",style:{left:y.x+f/2,top:y.y-30,transform:"translateX(-50%)"},children:(0,i.jsx)(k.A,{className:"h-4 w-4"})})]})};var R=s(57347),z=s(54654),L=s(94431),D=s(23191),A=s(28647),P=s(87727),$=s(58421),F=s(99955);let M=()=>{let{layers:e,updateLayer:t,removeLayer:s,selectedLayerId:n,setSelectedLayerId:a,reorderLayers:l,duplicateLayer:o,moveLayerUp:d,moveLayerDown:c}=(0,b.S)();return(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold",children:"レイヤー"}),(0,i.jsx)($.F,{className:"h-[calc(100vh-250px)] w-full rounded-md border p-4",children:0===e.length?(0,i.jsx)("p",{className:"text-muted-foreground",children:"レイヤーがありません。"}):(0,i.jsx)(F.JY,{onDragEnd:e=>{e.destination&&l(e.source.index,e.destination.index)},children:(0,i.jsx)(F.gL,{droppableId:"layers",children:l=>(0,i.jsxs)("div",{...l.droppableProps,ref:l.innerRef,className:"space-y-2",children:[e.map((l,h)=>(0,i.jsx)(F.sx,{draggableId:l.id,index:h,children:(u,m)=>(0,i.jsxs)("div",{ref:u.innerRef,...u.draggableProps,...u.dragHandleProps,className:"flex items-center justify-between p-2 rounded-md border ".concat(n===l.id?"bg-accent":"bg-card"," ").concat(m.isDragging?"shadow-lg opacity-90 bg-blue-100":""),onClick:()=>a(l.id),children:[(0,i.jsx)("div",{className:"flex items-center space-x-2",children:(0,i.jsx)("span",{className:"text-sm font-medium truncate w-24",children:l.name})}),(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)(r.$,{variant:"ghost",size:"icon",onClick:e=>{e.stopPropagation(),d(l.id)},disabled:0===h,children:(0,i.jsx)(R.A,{className:"h-4 w-4"})}),(0,i.jsx)(r.$,{variant:"ghost",size:"icon",onClick:e=>{e.stopPropagation(),c(l.id)},disabled:h===e.length-1,children:(0,i.jsx)(z.A,{className:"h-4 w-4"})}),(0,i.jsx)(r.$,{variant:"ghost",size:"icon",onClick:s=>{s.stopPropagation(),(s=>{var i;t(s,{visible:!(null==(i=e.find(e=>e.id===s))?void 0:i.visible)})})(l.id)},children:l.visible?(0,i.jsx)(L.A,{className:"h-4 w-4"}):(0,i.jsx)(D.A,{className:"h-4 w-4"})}),(0,i.jsx)(r.$,{variant:"ghost",size:"icon",onClick:e=>{e.stopPropagation(),o(l.id)},children:(0,i.jsx)(A.A,{className:"h-4 w-4"})}),(0,i.jsx)(r.$,{variant:"ghost",size:"icon",onClick:e=>{e.stopPropagation(),s(l.id)},children:(0,i.jsx)(P.A,{className:"h-4 w-4 text-red-500"})})]})]})},l.id)),l.placeholder]})})})})]})},I=["image/jpeg","image/jpg","image/png","image/webp"];function X(){let{isOpen:e,setIsOpen:t,isDesktop:s}=(0,u.c)({defaultOpen:!1,desktopDefaultOpen:!0}),[N,k]=n.useState("settings"),[R,z]=n.useState(!1),{handleAsyncError:L}=(0,m.u)(),{selectedTemplate:D,setSelectedTemplate:A,currentText:P,setCurrentText:$,layers:F,addLayer:X,updateLayer:O,selectedLayerId:W,setSelectedLayerId:B}=(0,b.S)(),T=F.find(e=>e.id===W);n.useEffect(()=>{let e=e=>{"Shift"===e.key&&z(!0)},t=e=>{"Shift"===e.key&&z(!1)};return window.addEventListener("keydown",e),window.addEventListener("keyup",t),()=>{window.removeEventListener("keydown",e),window.removeEventListener("keyup",t)}},[]),n.useEffect(()=>{s?t(!0):t(!1)},[s]);let J=n.useCallback(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"standard",t=document.getElementById("thumbnail-preview");t&&await L(async()=>{let s={standard:{pixelRatio:1,quality:.8},high:{pixelRatio:2,quality:.9},ultra:{pixelRatio:3,quality:1}}[e],i=await (0,a.$E)(t,{cacheBust:!0,pixelRatio:s.pixelRatio,quality:s.quality}),n=document.createElement("a");n.download="thumbnail-".concat(e,".png"),n.href=i,n.click()},"画像の生成に失敗しました")},[L]),Y=n.useCallback((e,t,s)=>{O(e,{x:s.x,y:s.y})},[O]),_=n.useCallback((e,t,s,i,n)=>{O(e,{width:s.offsetWidth,height:s.offsetHeight,x:n.x,y:n.y})},[O]),q=e=>{let t=e.target.files;if(t){for(let e of Array.from(t)){if(e.size>0xa00000){l.oR.error("ファイルサイズが大きすぎます: ".concat(e.name),{description:"10MB以下のファイルを選択してください。"});continue}if(!I.includes(e.type)){l.oR.error("ファイル形式が無効です: ".concat(e.name),{description:"JPEG, PNG, WEBP形式の画像ファイルを選択してください。"});continue}let t=URL.createObjectURL(e);X({type:"image",name:e.name,visible:!0,locked:!1,x:s?550:50,y:s?250:50,width:s?300:150,height:s?300:150,src:t})}e.target.value=""}},H=e=>{let t=F.filter(e=>"shape"===e.type).length*(s?20:5),i=F.filter(t=>t.shapeType===e).length+1,n="",a=s?550:10,l=s?250:10,r=s?300:50,o=s?300:50,d=s?2:1,c=s?300:100,h=s?5:3;switch(e){case"rectangle":n="四角 ".concat(i);break;case"circle":n="円 ".concat(i);break;case"line":n="線 ".concat(i);break;case"arrow":n="矢印 ".concat(i)}X({type:"shape",shapeType:e,name:n,visible:!0,locked:!1,x:a+t,y:l+t,width:"line"===e||"arrow"===e?c:r,height:"line"===e||"arrow"===e?h:o,backgroundColor:"#cccccc",borderColor:"#000000",borderWidth:d})},V=()=>{X({type:"text",name:"テキスト ".concat(F.filter(e=>"text"===e.type).length+1),visible:!0,locked:!1,x:s?550:50,y:s?250:50,width:s?300:150,height:s?100:50,text:P,color:"#000000",fontSize:s?"2rem":"1rem"})};if(!D)return(0,i.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,i.jsx)("p",{children:"テンプレートを読み込み中..."})});let U=()=>(0,i.jsxs)(j.nD,{type:"multiple",className:"w-full",defaultValue:["text"],children:[(0,i.jsxs)(j.As,{value:"text",children:[(0,i.jsx)(j.$m,{children:"テキスト"}),(0,i.jsxs)(j.ub,{className:"space-y-4 pt-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(v.J,{htmlFor:"thumbnail-text",children:"テキスト内容"}),(0,i.jsx)(p.T,{id:"thumbnail-text",value:P,onChange:e=>$(e.target.value),className:"h-24"})]}),(0,i.jsx)("div",{className:"pt-4",children:(0,i.jsx)(r.$,{variant:"outline",className:"w-full",onClick:V,children:"テキストを追加"})})]})]}),(0,i.jsxs)(j.As,{value:"images",children:[(0,i.jsx)(j.$m,{children:"画像"}),(0,i.jsx)(j.ub,{className:"space-y-4 pt-4",children:(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(v.J,{htmlFor:"add-images",children:"画像を追加"}),(0,i.jsx)(f.p,{id:"add-images",type:"file",accept:"image/*",multiple:!0,onChange:q})]})})]}),(0,i.jsxs)(j.As,{value:"shapes",children:[(0,i.jsx)(j.$m,{children:"図形"}),(0,i.jsx)(j.ub,{className:"space-y-4 pt-4",children:(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,i.jsx)(r.$,{variant:"outline",onClick:()=>H("rectangle"),children:"四角を追加"}),(0,i.jsx)(r.$,{variant:"outline",onClick:()=>H("circle"),children:"円を追加"}),(0,i.jsx)(r.$,{variant:"outline",onClick:()=>H("line"),children:"線を追加"}),(0,i.jsx)(r.$,{variant:"outline",onClick:()=>H("arrow"),children:"矢印を追加"})]})})]}),(0,i.jsxs)(j.As,{value:"style",children:[(0,i.jsx)(j.$m,{children:"スタイル"}),(0,i.jsxs)(j.ub,{className:"space-y-4 pt-4",children:[!T&&(0,i.jsx)("p",{className:"text-sm text-muted-foreground",children:"レイヤーを選択してください"}),(null==T?void 0:T.type)==="text"&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(v.J,{htmlFor:"text-color",children:"テキストカラー"}),(0,i.jsx)("input",{id:"text-color",type:"color",value:T.color,onChange:e=>O(T.id,{color:e.target.value}),className:"w-full h-10 rounded-md"})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)(v.J,{htmlFor:"font-size",children:["フォントサイズ (",T.fontSize,")"]}),(0,i.jsx)(g.A,{id:"font-size",min:1,max:8,step:.1,value:[parseFloat(T.fontSize||"1")],onValueChange:e=>O(T.id,{fontSize:"".concat(e[0],"rem")})})]})]}),(null==T?void 0:T.type)==="shape"&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(v.J,{htmlFor:"shape-fill",children:"塗りつぶし"}),(0,i.jsx)("input",{id:"shape-fill",type:"color",value:T.backgroundColor,onChange:e=>O(T.id,{backgroundColor:e.target.value}),className:"w-full h-10 rounded-md"})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(v.J,{htmlFor:"shape-stroke",children:"枠線"}),(0,i.jsx)("input",{id:"shape-stroke",type:"color",value:T.borderColor,onChange:e=>O(T.id,{borderColor:e.target.value}),className:"w-full h-10 rounded-md"})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)(v.J,{htmlFor:"shape-stroke-width",children:["枠線の太さ (",T.borderWidth,"px)"]}),(0,i.jsx)(g.A,{id:"shape-stroke-width",min:0,max:20,step:1,value:[T.borderWidth||0],onValueChange:e=>O(T.id,{borderWidth:e[0]})})]})]})]})]})]}),G=(0,i.jsxs)(h.tU,{value:N,onValueChange:k,className:"w-full",children:[(0,i.jsxs)(h.j7,{className:"grid w-full grid-cols-3",children:[(0,i.jsx)(h.Xi,{value:"settings",children:"テンプレート"}),(0,i.jsx)(h.Xi,{value:"tools",children:"ツール"}),(0,i.jsx)(h.Xi,{value:"layers",children:"レイヤー"})]}),(0,i.jsx)(h.av,{value:"settings",className:"mt-4",children:(0,i.jsx)(y.A,{onSelectTemplate:A,selectedTemplateId:D.id})}),(0,i.jsx)(h.av,{value:"tools",className:"mt-4",children:U()}),(0,i.jsx)(h.av,{value:"layers",className:"mt-4",children:(0,i.jsx)(M,{})})]}),K=(0,i.jsxs)("div",{className:"w-full",children:[(0,i.jsx)("div",{className:"mb-4",children:(0,i.jsx)("h3",{className:"text-lg font-semibold",children:"テンプレート選択"})}),(0,i.jsx)(y.A,{onSelectTemplate:A,selectedTemplateId:D.id})]});return(0,i.jsxs)("div",{className:"relative flex flex-col lg:h-screen",children:[e&&!s&&(0,i.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-30 lg:hidden",onClick:()=>t(!1)}),(0,i.jsxs)("div",{className:"flex flex-col lg:flex-row flex-grow lg:h-full lg:overflow-y-auto",children:[(0,i.jsxs)("main",{className:"flex-1 overflow-y-auto",children:[(0,i.jsx)("div",{className:"p-2 pt-20 lg:p-6 lg:pt-6",children:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{id:"thumbnail-preview",className:(0,w.cn)("aspect-video w-full bg-card relative border rounded-md",{"simple-enhanced":"template-1"===D.id,"stylish-enhanced":"template-2"===D.id,"cute-enhanced":"template-3"===D.id,"cool-enhanced":"template-4"===D.id,"bg-gray-200":"template-5"===D.id}),children:["template-4"===D.id&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"digital-overlay"}),(0,i.jsx)("div",{className:"light-ray-1"}),(0,i.jsx)("div",{className:"light-ray-2"})]}),F.slice().reverse().map(e=>{let t=e.id===W,s=t&&!e.locked,n=t&&!e.locked;return e.visible?"image"===e.type?(0,i.jsx)(S,{id:e.id,isSelected:t,src:e.src||"",alt:e.name,x:e.x,y:e.y,width:e.width,height:e.height,rotation:e.rotation,onDragStop:(t,s)=>Y(e.id,t,s),onResize:(t,s,i,n,a)=>_(e.id,s,i,n,a),onResizeStop:(t,s,i,n,a)=>_(e.id,s,i,n,a),lockAspectRatio:R,enableResizing:n,disableDragging:!s,onSelect:()=>B(e.id),isLocked:e.locked,isDraggable:s,onRotateStart:()=>{},onRotate:()=>{},onRotateStop:()=>{}},e.id):"text"===e.type?(0,i.jsx)(E,{id:e.id,isSelected:t,text:e.text||"",color:e.color||"#000000",fontSize:e.fontSize||"1rem",x:e.x,y:e.y,width:e.width,height:e.height,rotation:e.rotation,onDragStop:(t,s)=>Y(e.id,t,s),onResizeStop:(t,s,i,n,a)=>_(e.id,s,i,n,a),enableResizing:n,disableDragging:!s},e.id):"shape"===e.type&&e.shapeType?(0,i.jsx)(C,{id:e.id,isSelected:t,shapeType:e.shapeType,backgroundColor:e.backgroundColor||"#cccccc",borderColor:e.borderColor||"#000000",borderWidth:e.borderWidth||0,x:e.x,y:e.y,width:e.width,height:e.height,rotation:e.rotation,onDragStop:(t,s)=>Y(e.id,t,s),onResize:(t,s,i,n,a)=>_(e.id,s,i,n,a),onResizeStop:(t,s,i,n,a)=>_(e.id,s,i,n,a),lockAspectRatio:R,enableResizing:n,disableDragging:!s},e.id):null:null})]}),(0,i.jsxs)("div",{className:"mt-4 flex justify-end space-x-2",children:[(0,i.jsx)(r.$,{onClick:()=>J("standard"),size:"sm",children:"標準画質"}),(0,i.jsx)(r.$,{onClick:()=>J("high"),size:"sm",children:"高画質"}),(0,i.jsx)(r.$,{onClick:()=>J("ultra"),size:"sm",children:"最高画質"})]})]})}),(0,i.jsx)("div",{className:"lg:hidden",children:(0,i.jsxs)("div",{className:"p-2 lg:p-4 space-y-4",children:[(0,i.jsx)(j.nD,{type:"single",collapsible:!0,className:"w-full",defaultValue:"tools",children:(0,i.jsxs)(j.As,{value:"tools",children:[(0,i.jsx)(j.$m,{className:"text-base font-semibold",children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(o.A,{className:"h-4 w-4"}),(0,i.jsx)("span",{children:"ツール"})]})}),(0,i.jsx)(j.ub,{className:"pt-2",children:U()})]})}),(0,i.jsx)("div",{children:(0,i.jsx)(M,{})})]})})]}),!e&&(0,i.jsx)(x.R,{onOpen:()=>t(!0),isDesktop:s,tabs:[{id:"settings",label:"テンプレート",icon:(0,i.jsx)(d.A,{className:"h-4 w-4"})},{id:"tools",label:"ツール",icon:(0,i.jsx)(o.A,{className:"h-4 w-4"})},{id:"layers",label:"レイヤー",icon:(0,i.jsx)(c.A,{className:"h-4 w-4"})}],onTabClick:e=>{console.log("Tab clicked:",e)}}),(0,i.jsx)(x.B,{isOpen:e,onClose:()=>t(!1),title:"",isDesktop:s,className:"lg:w-96",children:s?G:K})]})]})}}},e=>{e.O(0,[96,76,358],()=>e(e.s=38073)),_N_E=e.O()}]);