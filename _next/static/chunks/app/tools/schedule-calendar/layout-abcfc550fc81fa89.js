(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[764],{388:(e,t,s)=>{"use strict";s.d(t,{J:()=>o});var a=s(6166),l=s(5766),r=s(1219),n=s(4911),i=s(6821);let d=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(r.b,{ref:t,className:(0,i.cn)(d(),s),...l})});o.displayName=r.b.displayName},2265:(e,t,s)=>{"use strict";s.d(t,{Fs:()=>d,Ng:()=>i,VD:()=>o,tG:()=>r});var a=s(400);let l="vtuber-schedule-calendar-items";function r(){try{let e=localStorage.getItem(l);return e?JSON.parse(e):[]}catch(e){return console.error("Failed to load schedules from localStorage",e),[]}}function n(e){try{localStorage.setItem(l,JSON.stringify(e))}catch(e){console.error("Failed to save schedules to localStorage",e)}}function i(e){let t=r(),s={...e,id:(0,a.A)(),isCompleted:!1};return t.push(s),n(t),s}function d(e){let t=r(),s=t.findIndex(t=>t.id===e.id);-1!==s&&(t[s]=e,n(t))}function o(e){n(r().filter(t=>t.id!==e))}},4038:(e,t,s)=>{"use strict";s.d(t,{Xi:()=>d,av:()=>o,j7:()=>i,tU:()=>n});var a=s(6166);s(5766);var l=s(3692),r=s(6821);function n(e){let{className:t,...s}=e;return(0,a.jsx)(l.bL,{"data-slot":"tabs",className:(0,r.cn)("flex flex-col gap-2",t),...s})}function i(e){let{className:t,...s}=e;return(0,a.jsx)(l.B8,{"data-slot":"tabs-list",className:(0,r.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",t),...s})}function d(e){let{className:t,...s}=e;return(0,a.jsx)(l.l9,{"data-slot":"tabs-trigger",className:(0,r.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...s})}function o(e){let{className:t,...s}=e;return(0,a.jsx)(l.UC,{"data-slot":"tabs-content",className:(0,r.cn)("flex-1 outline-none",t),...s})}},4699:(e,t,s)=>{"use strict";s.d(t,{p:()=>i,r:()=>d});var a=s(6166),l=s(5766),r=s(2265);let n=(0,l.createContext)(void 0);function i(e){let{children:t}=e,[s,i]=(0,l.useState)(!1),[d,o]=(0,l.useState)(new Date),[c,m]=(0,l.useState)([]),[u,x]=(0,l.useState)(null),f=()=>{m((0,r.tG)())};return(0,l.useEffect)(()=>{f()},[]),(0,a.jsx)(n.Provider,{value:{isModalOpen:s,setIsModalOpen:i,selectedDate:d,setSelectedDate:o,schedules:c,refreshSchedules:f,editingSchedule:u,setEditingSchedule:x},children:t})}function d(){let e=(0,l.useContext)(n);if(void 0===e)throw Error("useSchedule must be used within a ScheduleProvider");return e}},6390:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>eT});var a=s(6166),l=s(5766),r=s(4038),n=s(6614),i=s(6179),d=s(1021),o=s(5795),c=s(8391),m=s(6423),u=s(4699),x=s(1332),f=s(2574),h=s(6821);let p=x.bL;x.l9;let g=x.ZL;x.bm;let j=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(x.hJ,{ref:t,className:(0,h.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...l})});j.displayName=x.hJ.displayName;let v=l.forwardRef((e,t)=>{let{className:s,children:l,...r}=e;return(0,a.jsxs)(g,{children:[(0,a.jsx)(j,{}),(0,a.jsxs)(x.UC,{ref:t,className:(0,h.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...r,children:[l,(0,a.jsxs)(x.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(f.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});v.displayName=x.UC.displayName;let b=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,h.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...s})};b.displayName="DialogHeader";let N=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(x.hE,{ref:t,className:(0,h.cn)("text-lg font-semibold leading-none tracking-tight",s),...l})});N.displayName=x.hE.displayName,l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(x.VY,{ref:t,className:(0,h.cn)("text-sm text-muted-foreground",s),...l})}).displayName=x.VY.displayName;var y=s(8926),w=s(3981),C=s(5718),k=s(9534);let S=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("textarea",{className:(0,h.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...l})});S.displayName="Textarea";var R=s(6522),z=s(1205),T=s(388);let F=y.Op,$=l.createContext({}),E=e=>{let{...t}=e;return(0,a.jsx)($.Provider,{value:{name:t.name},children:(0,a.jsx)(y.xI,{...t})})},D=()=>{let e=l.useContext($),t=l.useContext(P),{getFieldState:s,formState:a}=(0,y.xW)(),r=s(e.name,a);if(!e)throw Error("useFormField should be used within <FormField>");let{id:n}=t;return{id:n,name:e.name,formItemId:"".concat(n,"-form-item"),formDescriptionId:"".concat(n,"-form-item-description"),formMessageId:"".concat(n,"-form-item-message"),...r}},P=l.createContext({}),I=l.forwardRef((e,t)=>{let{className:s,...r}=e,n=l.useId();return(0,a.jsx)(P.Provider,{value:{id:n},children:(0,a.jsx)("div",{ref:t,className:(0,h.cn)("space-y-2",s),...r})})});I.displayName="FormItem";let V=l.forwardRef((e,t)=>{let{className:s,...l}=e,{error:r,formItemId:n}=D();return(0,a.jsx)(T.J,{ref:t,className:(0,h.cn)(r&&"text-destructive",s),htmlFor:n,...l})});V.displayName="FormLabel";let _=l.forwardRef((e,t)=>{let{...s}=e,{error:l,formItemId:r,formDescriptionId:n,formMessageId:i}=D();return(0,a.jsx)(z.DX,{ref:t,id:r,"aria-describedby":l?"".concat(n," ").concat(i):"".concat(n),"aria-invalid":!!l,...s})});_.displayName="FormControl",l.forwardRef((e,t)=>{let{className:s,...l}=e,{formDescriptionId:r}=D();return(0,a.jsx)("p",{ref:t,id:r,className:(0,h.cn)("text-[0.8rem] text-muted-foreground",s),...l})}).displayName="FormDescription";let A=l.forwardRef((e,t)=>{var s;let{className:l,children:r,...n}=e,{error:i,formMessageId:d}=D(),o=i?String(null!=(s=null==i?void 0:i.message)?s:""):r;return o?(0,a.jsx)("p",{ref:t,id:d,className:(0,h.cn)("text-[0.8rem] font-medium text-destructive",l),...n,children:o}):null});A.displayName="FormMessage";var M=s(2265),U=s(9227),J=s(53),L=s(6208),Y=s(5212);let H=L.bL,G=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(L.q7,{ref:t,className:(0,h.cn)("border-b",s),...l})});G.displayName="AccordionItem";let O=l.forwardRef((e,t)=>{let{className:s,children:l,...r}=e;return(0,a.jsx)(L.Y9,{className:"flex",children:(0,a.jsxs)(L.l9,{ref:t,className:(0,h.cn)("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",s),...r,children:[l,(0,a.jsx)(Y.A,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})})});O.displayName=L.l9.displayName;let q=l.forwardRef((e,t)=>{let{className:s,children:l,...r}=e;return(0,a.jsx)(L.UC,{ref:t,className:(0,h.cn)("overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",s),...r,children:(0,a.jsx)("div",{className:"pb-4 pt-0",children:l})})});q.displayName=L.UC.displayName;var X=s(7406);let Z=X.bL,W=X.l9,B=l.forwardRef((e,t)=>{let{className:s,align:l="center",sideOffset:r=4,...n}=e;return(0,a.jsx)(X.ZL,{children:(0,a.jsx)(X.UC,{ref:t,align:l,sideOffset:r,className:(0,h.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",s),...n})})});B.displayName=X.UC.displayName;let Q={categories:["雑談","ゲーム","歌枠","飲酒","コラボ","その他"],platforms:["YouTube","Twitch","IRIAM","17LIVE","その他"],snsTemplates:[{id:"1",name:"基本テンプレート",content:"\uD83D\uDCE2配信告知\uD83D\uDCE2\n\nタイトル: {title}\n日時: {date} {time}\nカテゴリ: {category}\nプラットフォーム: {platform}\n\n詳細: {notes}\n\n{hashtags}"},{id:"2",name:"シンプルテンプレート",content:"✨{title}✨\n{date} {time}より配信開始！\n{platform}にて！\n\n{hashtags}"}],hashtags:["#新人VTuber","#VTuberはじめました"]},K=[{value:"{title}",label:"タイトル"},{value:"{date}",label:"日付"},{value:"{time}",label:"時間"},{value:"{category}",label:"カテゴリ"},{value:"{platform}",label:"プラットフォーム"},{value:"{notes}",label:"備考"},{value:"{hashtags}",label:"共通ハッシュタグ"}],ee=(0,l.createContext)(void 0);function et(e){let{children:t}=e,[s,r]=(0,l.useState)(()=>{{let e=localStorage.getItem("vtuber_schedule_app_settings");if(e){let t=JSON.parse(e);return{...Q,...t}}}return Q});return(0,l.useEffect)(()=>{localStorage.setItem("vtuber_schedule_app_settings",JSON.stringify(s))},[s]),(0,a.jsx)(ee.Provider,{value:{settings:s,updateSettings:e=>{r(t=>({...t,...e})),U.oR.success("設定を保存しました。")}},children:t})}function es(){let e=(0,l.useContext)(ee);if(void 0===e)throw Error("useSettings must be used within a SettingsProvider");return e}function ea(){let{settings:e,updateSettings:t}=es(),[s,r]=(0,l.useState)(""),[i,d]=(0,l.useState)(""),[o,c]=(0,l.useState)(""),[m,u]=(0,l.useState)(""),[x,f]=(0,l.useState)(""),h=(0,l.useRef)(null);return(0,a.jsxs)("div",{className:"space-y-6 p-4",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"設定"}),(0,a.jsxs)(H,{type:"single",collapsible:!0,className:"w-full",defaultValue:"item-1",children:[(0,a.jsxs)(G,{value:"item-1",children:[(0,a.jsx)(O,{children:"カテゴリ設定"}),(0,a.jsxs)(q,{children:[(0,a.jsx)("div",{className:"flex flex-wrap gap-2 mb-4",children:e.categories.map(s=>(0,a.jsxs)("span",{className:"flex items-center bg-secondary text-secondary-foreground px-3 py-1 rounded-full text-sm",children:[s,(0,a.jsx)(n.$,{variant:"ghost",size:"icon",className:"ml-2 h-5 w-5",onClick:()=>{t({categories:e.categories.filter(e=>e!==s)})},children:"\xd7"})]},s))}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(k.p,{placeholder:"新しいカテゴリ",value:s,onChange:e=>r(e.target.value),className:"flex-grow"}),(0,a.jsx)(n.$,{onClick:()=>{s&&!e.categories.includes(s)&&(t({categories:[...e.categories,s]}),r(""))},children:"追加"})]})]})]}),(0,a.jsxs)(G,{value:"item-2",children:[(0,a.jsx)(O,{children:"プラットフォーム設定"}),(0,a.jsxs)(q,{children:[(0,a.jsx)("div",{className:"flex flex-wrap gap-2 mb-4",children:e.platforms.map(s=>(0,a.jsxs)("span",{className:"flex items-center bg-secondary text-secondary-foreground px-3 py-1 rounded-full text-sm",children:[s,(0,a.jsx)(n.$,{variant:"ghost",size:"icon",className:"ml-2 h-5 w-5",onClick:()=>{t({platforms:e.platforms.filter(e=>e!==s)})},children:"\xd7"})]},s))}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(k.p,{placeholder:"新しいプラットフォーム",value:i,onChange:e=>d(e.target.value),className:"flex-grow"}),(0,a.jsx)(n.$,{onClick:()=>{i&&!e.platforms.includes(i)&&(t({platforms:[...e.platforms,i]}),d(""))},children:"追加"})]})]})]}),(0,a.jsxs)(G,{value:"item-3",children:[(0,a.jsx)(O,{children:"SNSテンプレート設定"}),(0,a.jsxs)(q,{children:[(0,a.jsx)("div",{className:"space-y-4 mb-4",children:e.snsTemplates.map(s=>(0,a.jsxs)("div",{className:"border p-3 rounded-md",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,a.jsx)("h4",{className:"font-semibold",children:s.name}),(0,a.jsx)(n.$,{variant:"destructive",size:"sm",onClick:()=>{var a;return a=s.id,void t({snsTemplates:e.snsTemplates.filter(e=>e.id!==a)})},children:"削除"})]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap",children:s.content})]},s.id))}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(T.J,{htmlFor:"newSnsTemplateName",children:"新しいテンプレート名"}),(0,a.jsx)(k.p,{id:"newSnsTemplateName",value:m,onChange:e=>u(e.target.value),placeholder:"例: 告知用テンプレート"}),(0,a.jsx)(T.J,{htmlFor:"newSnsTemplateContent",children:"内容"}),(0,a.jsx)(S,{id:"newSnsTemplateContent",ref:h,value:x,onChange:e=>f(e.target.value),placeholder:"例: \uD83D\uDCE2配信告知\uD83D\uDCE2\\nタイトル: {title}",rows:5}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:(0,a.jsxs)(Z,{children:[(0,a.jsx)(W,{asChild:!0,children:(0,a.jsx)(n.$,{variant:"outline",size:"sm",children:"変数を挿入"})}),(0,a.jsx)(B,{className:"w-auto p-0",children:(0,a.jsx)("div",{className:"flex flex-col",children:K.map(e=>(0,a.jsx)(n.$,{variant:"ghost",size:"sm",onClick:()=>(e=>{let t=h.current;if(t){let s=t.selectionStart,a=t.selectionEnd;f(x.substring(0,s)+e+x.substring(a)),t.focus(),setTimeout(()=>t.setSelectionRange(s+e.length,s+e.length),0)}})(e.value),className:"justify-start",children:e.label},e.value))})})]})}),(0,a.jsx)(n.$,{onClick:()=>{if(m&&x){let s={id:String(Date.now()),name:m,content:x};t({snsTemplates:[...e.snsTemplates,s]}),u(""),f("")}},className:"mt-2",children:"テンプレートを追加"})]})]})]}),(0,a.jsxs)(G,{value:"item-4",children:[(0,a.jsx)(O,{children:"ハッシュタグ設定"}),(0,a.jsxs)(q,{children:[(0,a.jsx)("div",{className:"flex flex-wrap gap-2 mb-4",children:e.hashtags.map(s=>(0,a.jsxs)("span",{className:"flex items-center bg-secondary text-secondary-foreground px-3 py-1 rounded-full text-sm",children:[s,(0,a.jsx)(n.$,{variant:"ghost",size:"icon",className:"ml-2 h-5 w-5",onClick:()=>{t({hashtags:e.hashtags.filter(e=>e!==s)})},children:"\xd7"})]},s))}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(k.p,{placeholder:"新しいハッシュタグ (例: #VTuber)",value:o,onChange:e=>c(e.target.value),className:"flex-grow"}),(0,a.jsx)(n.$,{onClick:()=>{o&&!e.hashtags.includes(o)&&(t({hashtags:[...e.hashtags,o]}),c(""))},children:"追加"})]})]})]})]})]})}let el=C.Ikc({title:C.YjP().max(50,{message:"タイトルは50文字までです。"}).optional(),date:C.YjP().min(1,{message:"日付は必須です。"}),time:C.YjP().optional(),category:C.YjP().optional(),platform:C.YjP().optional(),notes:C.YjP().max(200,{message:"備考は200文字までです。"}).optional()});function er(){let{selectedDate:e,setIsModalOpen:t,refreshSchedules:s,editingSchedule:r,setEditingSchedule:i}=(0,u.r)(),{settings:d}=es(),o=(0,y.mN)({resolver:(0,w.u)(el),defaultValues:{title:"",date:e?(0,J.GP)(e,"yyyy-MM-dd"):(0,J.GP)(new Date,"yyyy-MM-dd"),time:"",category:"",platform:"",notes:""}});(0,l.useEffect)(()=>{r?o.reset(r):e&&o.reset({...o.getValues(),date:(0,J.GP)(e,"yyyy-MM-dd"),title:"",time:"",category:"",platform:"",notes:""})},[r,e,o]);let c=(()=>{let e=[];for(let t=0;t<24;t++)for(let s=0;s<60;s+=30){let a=String(t).padStart(2,"0"),l=String(s).padStart(2,"0");e.push("".concat(a,":").concat(l))}return e})();return(0,a.jsx)(F,{...o,children:(0,a.jsxs)("form",{onSubmit:o.handleSubmit(e=>{try{r?((0,M.Fs)({...r,...e}),U.oR.success("スケジュールを更新しました。")):((0,M.Ng)(e),U.oR.success("スケジュールを保存しました。")),s(),t(!1),i(null)}catch(e){console.error("Failed to save schedule",e),U.oR.error("処理に失敗しました。")}}),className:"space-y-4",children:[(0,a.jsx)(E,{control:o.control,name:"title",render:e=>{let{field:t}=e;return(0,a.jsxs)(I,{children:[(0,a.jsx)(V,{children:"タイトル"}),(0,a.jsx)(_,{children:(0,a.jsx)(k.p,{placeholder:"配信タイトル",...t})}),(0,a.jsx)(A,{})]})}}),(0,a.jsx)(E,{control:o.control,name:"date",render:e=>{let{field:t}=e;return(0,a.jsxs)(I,{children:[(0,a.jsx)(V,{children:"日付"}),(0,a.jsx)(_,{children:(0,a.jsx)(k.p,{type:"date",...t})}),(0,a.jsx)(A,{})]})}}),(0,a.jsx)(E,{control:o.control,name:"time",render:e=>{let{field:t}=e;return(0,a.jsxs)(I,{children:[(0,a.jsx)(V,{children:"時間"}),(0,a.jsxs)(R.l6,{onValueChange:t.onChange,value:t.value||"",children:[(0,a.jsx)(_,{children:(0,a.jsx)(R.bq,{children:(0,a.jsx)(R.yv,{placeholder:"時間を選択"})})}),(0,a.jsx)(R.gC,{children:c.map(e=>(0,a.jsx)(R.eb,{value:e,children:e},e))})]}),(0,a.jsx)(A,{})]})}}),(0,a.jsx)(E,{control:o.control,name:"category",render:e=>{let{field:t}=e;return(0,a.jsxs)(I,{children:[(0,a.jsx)(V,{children:"カテゴリ"}),(0,a.jsxs)(R.l6,{onValueChange:t.onChange,value:t.value||"",children:[(0,a.jsx)(_,{children:(0,a.jsx)(R.bq,{children:(0,a.jsx)(R.yv,{placeholder:"カテゴリを選択"})})}),(0,a.jsx)(R.gC,{children:d.categories.map(e=>(0,a.jsx)(R.eb,{value:e,children:e},e))})]}),(0,a.jsx)(A,{})]})}}),(0,a.jsx)(E,{control:o.control,name:"platform",render:e=>{let{field:t}=e;return(0,a.jsxs)(I,{children:[(0,a.jsx)(V,{children:"プラットフォーム"}),(0,a.jsxs)(R.l6,{onValueChange:t.onChange,value:t.value||"",children:[(0,a.jsx)(_,{children:(0,a.jsx)(R.bq,{children:(0,a.jsx)(R.yv,{placeholder:"プラットフォームを選択"})})}),(0,a.jsx)(R.gC,{children:d.platforms.map(e=>(0,a.jsx)(R.eb,{value:e,children:e},e))})]}),(0,a.jsx)(A,{})]})}}),(0,a.jsx)(E,{control:o.control,name:"notes",render:e=>{let{field:t}=e;return(0,a.jsxs)(I,{children:[(0,a.jsx)(V,{children:"備考"}),(0,a.jsx)(_,{children:(0,a.jsx)(S,{placeholder:"メモ、詳細など",...t})}),(0,a.jsx)(A,{})]})}}),(0,a.jsx)(n.$,{type:"submit",children:r?"更新":"保存"})]})})}function en(){let{isModalOpen:e,setIsModalOpen:t,editingSchedule:s,setEditingSchedule:l}=(0,u.r)();return(0,a.jsx)(p,{open:e,onOpenChange:e=>{t(e),e||l(null)},children:(0,a.jsxs)(v,{children:[(0,a.jsx)(b,{children:(0,a.jsx)(N,{children:s?"スケジュールを編集":"新規スケジュール登録"})}),(0,a.jsx)(er,{})]})})}var ei=s(8944),ed=s(5258),eo=s(5130),ec=s(725),em=s(7258),eu=s(969),ex=s(6755),ef=s(7727),eh=s(2924);let ep=eh.bL;eh.l9;let eg=eh.ZL,ej=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(eh.hJ,{className:(0,h.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...l,ref:t})});ej.displayName=eh.hJ.displayName;let ev=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsxs)(eg,{children:[(0,a.jsx)(ej,{}),(0,a.jsx)(eh.UC,{ref:t,className:(0,h.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...l})]})});ev.displayName=eh.UC.displayName;let eb=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,h.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...s})};eb.displayName="AlertDialogHeader";let eN=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,h.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s})};eN.displayName="AlertDialogFooter";let ey=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(eh.hE,{ref:t,className:(0,h.cn)("text-lg font-semibold",s),...l})});ey.displayName=eh.hE.displayName;let ew=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(eh.VY,{ref:t,className:(0,h.cn)("text-sm text-muted-foreground",s),...l})});ew.displayName=eh.VY.displayName;let eC=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(eh.rc,{ref:t,className:(0,h.cn)((0,n.r)(),s),...l})});eC.displayName=eh.rc.displayName;let ek=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(eh.ZD,{ref:t,className:(0,h.cn)((0,n.r)({variant:"outline"}),"mt-2 sm:mt-0",s),...l})});function eS(){let{schedules:e,selectedDate:t,setIsModalOpen:s,setEditingSchedule:r,refreshSchedules:i}=(0,u.r)(),[d,o]=(0,l.useState)(null),c=(0,ei.R)(),m=t?e.filter(e=>(0,ed.r)((0,eo.H)(e.date),t)):[],x=e.filter(e=>(0,ec.G)((0,eo.H)(e.date))||(0,ed.r)((0,eo.H)(e.date),c)).sort((e,t)=>(0,eo.H)(e.date).getTime()-(0,eo.H)(t.date).getTime()),f=e.filter(e=>(0,em.R)((0,eo.H)(e.date))&&!(0,ed.r)((0,eo.H)(e.date),c)).sort((e,t)=>(0,eo.H)(t.date).getTime()-(0,eo.H)(e.date).getTime()),h=e=>(0,a.jsxs)("div",{className:"border p-2 rounded-md text-sm",children:[(0,a.jsx)("p",{className:"font-bold",children:e.title||"(タイトルなし)"}),(0,a.jsxs)("p",{children:[(0,J.GP)((0,eo.H)(e.date),"M月d日 (E)",{locale:eu.ja})," ",e.time]}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:[e.category," / ",e.platform]}),(0,a.jsxs)("div",{className:"flex justify-end mt-2 space-x-2",children:[(0,a.jsx)(n.$,{variant:"outline",size:"icon",className:"h-6 w-6",onClick:()=>{r(e),s(!0)},children:(0,a.jsx)(ex.A,{className:"h-4 w-4"})}),(0,a.jsx)(n.$,{variant:"destructive",size:"icon",className:"h-6 w-6",onClick:()=>o(e.id),children:(0,a.jsx)(ef.A,{className:"h-4 w-4"})})]})]},e.id);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"space-y-6 mt-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"font-semibold mb-2",children:[t?(0,J.GP)(t,"M月d日 (E)",{locale:eu.ja}):"日付を選択"," の予定"]}),(0,a.jsx)("div",{className:"space-y-2",children:m.length>0?m.map(h):(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"予定はありません。"})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold mb-2",children:"これからの予定"}),(0,a.jsx)("div",{className:"space-y-2 max-h-60 overflow-y-auto pr-2",children:x.length>0?x.map(h):(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"予定はありません。"})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold mb-2",children:"過去の予定"}),(0,a.jsx)("div",{className:"space-y-2 max-h-40 overflow-y-auto pr-2",children:f.length>0?f.map(h):(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"表示できる過去の予定はありません。"})})]})]}),(0,a.jsx)(ep,{open:!!d,onOpenChange:e=>!e&&o(null),children:(0,a.jsxs)(ev,{children:[(0,a.jsxs)(eb,{children:[(0,a.jsx)(ey,{children:"本当に削除しますか？"}),(0,a.jsx)(ew,{children:"この操作は元に戻せません。スケジュールを完全に削除します。"})]}),(0,a.jsxs)(eN,{children:[(0,a.jsx)(ek,{children:"いいえ"}),(0,a.jsx)(eC,{onClick:()=>{if(d){try{(0,M.VD)(d),U.oR.success("スケジュールを削除しました。"),i()}catch(e){console.error("Failed to delete schedule",e),U.oR.error("スケジュールの削除に失敗しました。")}o(null)}},children:"はい"})]})]})})]})}function eR(){let{schedules:e,selectedDate:t}=(0,u.r)(),{settings:s}=es(),[r,i]=(0,l.useState)(""),[d,o]=(0,l.useState)(""),c=(0,l.useRef)(null),m=e.find(e=>e.date===(t?(0,J.GP)(t,"yyyy-MM-dd"):""));(0,l.useEffect)(()=>{s.snsTemplates.length>0&&!r&&i(s.snsTemplates[0].id)},[s.snsTemplates,r]),(0,l.useEffect)(()=>{let e=s.snsTemplates.find(e=>e.id===r);if(e){let t=e.content;m?t=(t=(t=(t=(t=(t=t.replace(/{title}/g,m.title||"未定")).replace(/{date}/g,m.date?(0,J.GP)(new Date(m.date),"yyyy/MM/dd",{locale:eu.ja}):"未定")).replace(/{time}/g,m.time||"未定")).replace(/{category}/g,m.category||"未定")).replace(/{platform}/g,m.platform||"未定")).replace(/{notes}/g,m.notes||""):["{title}","{date}","{time}","{category}","{platform}","{notes}"].forEach(e=>{t=t.replace(RegExp(e,"g"),"")}),o(t=t.replace(/{hashtags}/g,s.hashtags.join(" ")))}},[r,m,s.snsTemplates,s.hashtags]);let x=async()=>{try{await navigator.clipboard.writeText(d),U.oR.success("クリップボードにコピーしました！")}catch(e){console.error("Failed to copy: ",e),U.oR.error("コピーに失敗しました。")}};return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{htmlFor:"templateSelect",children:"テンプレート選択"}),(0,a.jsxs)(R.l6,{value:r,onValueChange:i,children:[(0,a.jsx)(R.bq,{id:"templateSelect",children:(0,a.jsx)(R.yv,{placeholder:"テンプレートを選択"})}),(0,a.jsx)(R.gC,{children:s.snsTemplates.map(e=>(0,a.jsx)(R.eb,{value:e.id,children:e.name},e.id))})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{htmlFor:"postContent",children:"投稿内容"}),(0,a.jsx)(S,{id:"postContent",ref:c,value:d,onChange:e=>o(e.target.value),className:"h-48",placeholder:m?"":"カレンダーで日付を選択すると、スケジュール情報が自動で入力されます。"})]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:(0,a.jsxs)(Z,{children:[(0,a.jsx)(W,{asChild:!0,children:(0,a.jsx)(n.$,{variant:"outline",size:"sm",children:"ハッシュタグを挿入"})}),(0,a.jsx)(B,{className:"w-auto p-2",children:(0,a.jsx)("div",{className:"flex flex-col space-y-2",children:s.hashtags.map(e=>(0,a.jsx)(n.$,{variant:"ghost",size:"sm",onClick:()=>(e=>{let t=c.current;if(t){let s=t.selectionStart,a=t.selectionEnd;o(d.substring(0,s)+e+d.substring(a)),t.focus(),setTimeout(()=>t.setSelectionRange(s+e.length,s+e.length),0)}})(e+" "),className:"justify-start",children:e},e))})})]})}),(0,a.jsxs)("div",{className:"flex gap-2 mt-4",children:[(0,a.jsx)(n.$,{onClick:()=>{let e=encodeURIComponent(d);window.open("https://twitter.com/intent/tweet?text=".concat(e),"_blank"),U.oR.success("Xへの投稿画面を開きました。")},disabled:!d,className:"flex-grow",children:"Xに投稿"}),(0,a.jsx)(n.$,{onClick:x,disabled:!d,variant:"outline",className:"flex-grow",children:"コピー"})]})]})}function ez(e){let{children:t}=e,[s,x]=l.useState(!0),[f,h]=l.useState("schedule-management"),{setIsModalOpen:p}=(0,u.r)();return(0,a.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,a.jsxs)("div",{className:"flex flex-grow h-full overflow-y-auto",children:[(0,a.jsx)("main",{className:"flex-grow h-full p-4 overflow-y-auto ".concat(s?"w-full lg:w-3/4":"w-full"),children:t}),(0,a.jsxs)("aside",{className:"p-4 border-l flex-shrink-0 ".concat(s?"w-1/4 block":"w-0 hidden"," overflow-y-auto"),children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"サイドパネル"}),(0,a.jsx)(n.$,{variant:"ghost",size:"icon",onClick:()=>x(!s),children:s?(0,a.jsx)(i.A,{className:"h-5 w-5"}):(0,a.jsx)(d.A,{className:"h-5 w-5"})})]}),(0,a.jsxs)(r.tU,{value:f,onValueChange:h,className:"w-full",children:[(0,a.jsxs)(r.j7,{className:"grid w-full grid-cols-3",children:[(0,a.jsx)(r.Xi,{value:"schedule-management",children:"予定管理"}),(0,a.jsx)(r.Xi,{value:"sns-posting",children:"SNS投稿"}),(0,a.jsx)(r.Xi,{value:"settings",children:"設定"})]}),(0,a.jsx)(r.av,{value:"schedule-management",className:"mt-4",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(n.$,{onClick:()=>p(!0),children:"予定を追加"}),(0,a.jsx)(eS,{})]})}),(0,a.jsx)(r.av,{value:"sns-posting",className:"mt-4",children:(0,a.jsx)(eR,{})}),(0,a.jsx)(r.av,{value:"settings",className:"mt-4",children:(0,a.jsx)(ea,{})})]})]}),!s&&(0,a.jsxs)("div",{className:"p-4 border-l flex-shrink-0 flex flex-col items-center justify-start space-y-4",children:[(0,a.jsx)(n.$,{variant:"ghost",size:"icon",onClick:()=>x(!0),children:(0,a.jsx)(d.A,{className:"h-5 w-5"})}),(0,a.jsx)(n.$,{variant:"ghost",size:"icon",onClick:()=>{x(!0),h("schedule-management")},children:(0,a.jsx)(o.A,{className:"h-5 w-5"})}),(0,a.jsx)(n.$,{variant:"ghost",size:"icon",onClick:()=>{x(!0),h("sns-posting")},children:(0,a.jsx)(c.A,{className:"h-5 w-5"})}),(0,a.jsx)(n.$,{variant:"ghost",size:"icon",onClick:()=>{x(!0),h("settings")},children:(0,a.jsx)(m.A,{className:"h-5 w-5"})})]})]}),(0,a.jsx)(en,{})]})}function eT(e){let{children:t}=e;return(0,a.jsx)(u.p,{children:(0,a.jsx)(et,{children:(0,a.jsx)(ez,{children:t})})})}ek.displayName=eh.ZD.displayName},6522:(e,t,s)=>{"use strict";s.d(t,{bq:()=>m,eb:()=>x,gC:()=>u,l6:()=>o,yv:()=>c});var a=s(6166),l=s(5766),r=s(3807),n=s(5212),i=s(1038),d=s(6821);let o=r.bL;r.YJ;let c=r.WT,m=l.forwardRef((e,t)=>{let{className:s,children:l,...i}=e;return(0,a.jsxs)(r.l9,{ref:t,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),...i,children:[l,(0,a.jsx)(r.In,{asChild:!0,children:(0,a.jsx)(n.A,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=r.l9.displayName;let u=l.forwardRef((e,t)=>{let{className:s,children:l,position:n="popper",...i}=e;return(0,a.jsx)(r.ZL,{children:(0,a.jsx)(r.UC,{ref:t,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:n,...i,children:(0,a.jsx)(r.LM,{className:(0,d.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:l})})})});u.displayName=r.UC.displayName,l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(r.JU,{ref:t,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...l})}).displayName=r.JU.displayName;let x=l.forwardRef((e,t)=>{let{className:s,children:l,...n}=e;return(0,a.jsxs)(r.q7,{ref:t,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...n,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(r.VF,{children:(0,a.jsx)(i.A,{className:"h-4 w-4"})})}),(0,a.jsx)(r.p4,{children:l})]})});x.displayName=r.q7.displayName,l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(r.wv,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",s),...l})}).displayName=r.wv.displayName},6614:(e,t,s)=>{"use strict";s.d(t,{$:()=>d,r:()=>i});var a=s(6166);s(5766);var l=s(1205),r=s(4911),n=s(6821);let i=(0,r.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function d(e){let{className:t,variant:s,size:r,asChild:d=!1,...o}=e,c=d?l.DX:"button";return(0,a.jsx)(c,{"data-slot":"button",className:(0,n.cn)(i({variant:s,size:r,className:t})),...o})}},6821:(e,t,s)=>{"use strict";s.d(t,{cn:()=>r});var a=s(4471),l=s(9819);function r(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,l.QP)((0,a.$)(t))}},7434:(e,t,s)=>{Promise.resolve().then(s.bind(s,6390))},9534:(e,t,s)=>{"use strict";s.d(t,{p:()=>n});var a=s(6166),l=s(5766),r=s(6821);let n=l.forwardRef((e,t)=>{let{className:s,type:l,...n}=e;return(0,a.jsx)("input",{type:l,className:(0,r.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...n})});n.displayName="Input"}},e=>{e.O(0,[254,227,475,560,677,112,625,148,842,544,134,358],()=>e(e.s=7434)),_N_E=e.O()}]);